
// statr -->tax payer acc detasils function  
function onchangeBankNameRTGS(obj){
	var bankId = obj.value;
	var flag=false;
	var index;
	if(bankId == "-1"){
		alert(selectBank);
		return false;
	}
	else{
		var beneBankNameIndex = document.getElementById('bankNameRTGS').selectedIndex;
		var beneBankName =  document.getElementById('bankNameRTGS')[beneBankNameIndex].text;
		document.getElementById('bankNameRTGSText').value = beneBankName;
		
		var taxPayerId=document.getElementById('hidTaxPayerId').value;
		var obligationId="0";
		FetchBranchNameFromBankId.fetchBranchNameFromBankId(taxPayerId,obligationId,bankId,{async:false,callback: function(data){
			if(data != null && data.length>=1 ){
				dwr.util.removeAllOptions('branchNameRTGS');
				var oOption=document.createElement("option");
				optionId="-1";
				optionValue="--Select--";
				oOption.text=optionValue;
				oOption.value=optionId;
				oOption.title=optionValue;
				document.getElementById("branchNameRTGS").add(oOption);
				for(var i = 0 ;i<data.length ; i++){
					var oOption=document.createElement("option");
					optionId=data[i].branchIdRTGS;
					optionValue=data[i].branchNameRTGS;
					oOption.text=optionValue;
					oOption.value=optionId;
					oOption.title=optionValue;
					document.getElementById("branchNameRTGS").add(oOption);
				}
				return true;
			}
			else if(data.length<1){
				alert(noBranchAvailable);
				return false;
			}
			else{
				alert(errFetchingData);	
				return false;
			}
		}});
		
		var noOfOptions=document.getElementById("beneBankNameRTGS").length;
		for(index=0; index<noOfOptions ; index++)
			{
				if(document.getElementById('beneBankNameRTGS')[index].value==bankId)
					{
						flag=true;
						break;
					}
			}
		if(flag)
			{
				document.getElementById('beneBankNameRTGS').value=bankId;
				onchangeBeneBankNameRTGS(document.getElementById('beneBankNameRTGS'));
				document.getElementById('beneBankNameRTGS').disabled=true;
			}
		else{
			document.getElementById('beneBankNameRTGS').disabled=false;
			document.getElementById('beneBankNameRTGS').value=-1;
		}
		
	}
}
function onchangeBranchNameRTGS(obj){
	var branchNameRTGS=document.getElementById('branchNameRTGS').selectedIndex;
	var branchNameRTGSText= document.getElementById('branchNameRTGS')[branchNameRTGS].text;
	document.getElementById('branchNameRTGSText').value =branchNameRTGSText;
}
function onchangeAccountNoRTGS(obj){
}
//End-->tax payer acc detasils function


// start -->rtgs acc details(Mendatory)function
function onchangeBeneBankNameRTGS(obj){
	var beneBankId = obj.value;
	if(beneBankId == "-1"){
		alert(beneficiaryBankName);
		return false;
	}
	else{
		var beneBankNameIndex = document.getElementById('beneBankNameRTGS').selectedIndex;
		var beneBankName =  document.getElementById('beneBankNameRTGS')[beneBankNameIndex].text;
		document.getElementById('hidBeneBankNameRTGS').value = beneBankName;
		document.getElementById('hidBeneBankIdRTGS').value = beneBankId;
		
		var taxPayerId=document.getElementById('hidTaxPayerId').value;
		var obligationId=document.getElementById('cmbTaxSubHead').value;
		var oOption;
		FetchBeneAccountList.fetchBeneAccountList(taxPayerId,obligationId,beneBankId,{async:false,callback: function(data){
			if(data != null && data.length>=1 ){
				dwr.util.removeAllOptions('beneAccNameRTGS');
				oOption =document.createElement("option");
				optionId="-1";
				optionValue="--Select--";
				oOption.text=optionValue;
				oOption.value=optionId;
				oOption.title=optionValue;
				document.getElementById("beneAccNameRTGS").add(oOption);
				for(var i = 0 ;i<data.length ; i++){
					if(obligationId==12)
					{
						var accName=data[i].beneAccNameRTGS.toLowerCase();
						var nssf="nssf";
						if(accName.indexOf(nssf) != -1)
						{
							var oOption=document.createElement("option");
							optionId=data[i].beneAccIdRTGS;
							optionValue=data[i].beneAccNameRTGS+" ("+data[i].beneAccNoRTGS+")";
							oOption.text=optionValue;
							oOption.value=optionId;
							oOption.title=optionValue;
							document.getElementById("beneAccNameRTGS").add(oOption);
						}
					}
					else
					{
						var accName=data[i].beneAccNameRTGS.toLowerCase();
						var nssf="nssf";
						if(accName.indexOf(nssf) == -1)
						{
							var oOption=document.createElement("option");
							optionId=data[i].beneAccIdRTGS;
							optionValue=data[i].beneAccNameRTGS+" ("+data[i].beneAccNoRTGS+")";
							oOption.text=optionValue;
							oOption.value=optionId;
							oOption.title=optionValue;
							document.getElementById("beneAccNameRTGS").add(oOption);
						}
					}
						}
				return true;
			}
			else if(data.length<1){
				alert(noAccountForBeneficiaryBankName);
				document.getElementById("beneAccNameRTGS").length=1;
				document.getElementById("beneAccNameRTGS").selectedIndex=0;
				return false;
			}
			else{
				alert(errFetchingData);	
				return false;
			}
		}});
	}
}

function onchangeBeneAccNameRTGS(obj){
	
	var beneAccId = obj.value;
	if(beneAccId == "-1"){
		alert(selectAccountName);
		return false;
	}
	else{
		var beneAccNameIndex = document.getElementById('beneAccNameRTGS').selectedIndex;
		var beneAccName =  document.getElementById('beneAccNameRTGS')[beneAccNameIndex].text;
		var beneAccNo = 0; 
		var accArray = beneAccName.split("(");
		var beneAccName = accArray[0];
		document.getElementById('hidBeneAccNameRTGS').value = beneAccName;
		beneAccNo = accArray[1].substring(0,accArray[1].length-1);
		beneAccNo = trim(beneAccNo," ");
		document.getElementById('hidBeneAccNoRTGS').value = beneAccNo;
	}
	
}
//End-->rtgs acc details(Mendatory)function

//Start-->rtgs acc details(Optional)function
function onchangeSwiftCodeRTGS(obj){
}

function onchangeInterBankRTGS(obj){
}
function validateRTGS(id)
{
	var rtnFlag;
	rtnFlag=validateFormFieldOnEvent(id,RTGSJson);
	getErrTabToggle('TabView','2');	
	if(!rtnFlag)
	{
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
	}
	return rtnFlag;	
}
//End-->rtgs acc details(Optional)function
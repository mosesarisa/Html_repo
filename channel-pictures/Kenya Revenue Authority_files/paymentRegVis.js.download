function resetWithholdeeInfoInVIS(){
	document.getElementById('in_vatOnImpTable_12').value="";
	document.getElementById('in_vatOnImpTable_3').value="";
	document.getElementById('in_vatOnImpTable_4').value="";
	document.getElementById('in_vatOnImpTable_4').readOnly=false;
	document.getElementById('in_vatOnImpTable_4').className='form101_textfcurr form101_textfcurr_width';
}
function calcVatOnInvoice()
{
	var invoiceValue=removeCommaFrmInput(document.getElementById('in_vatOnImpTable_7').value);
	var taxRate=document.getElementById('in_vatOnImpTable_11').value;
	var afterTax=parseInt(Math.ceil(parseInt(invoiceValue,10)*parseFloat(taxRate)/parseInt(100,10)),10);
	document.getElementById('in_vatOnImpTable_7').value=convertToKenyanShillingFormatVal(invoiceValue, true);
	document.getElementById('in_vatOnImpTable_8').value=convertToKenyanShillingFormatVal(afterTax, true);
}

function beforeAddVisFunction()
{
	var checkDuplicateFlag=true;
	if(document.getElementById('hidIsPartial').value != "Y")
	{
		checkDuplicateFlag = isVISRegistered();
	}
	if(checkDuplicateFlag==false)
	{
		return false;
	}
	else
	{
		amtToPaidVis=parseInt(removeCommaFrmInput(document.getElementById('in_vatOnImpTable_8').value),10)+parseInt(removeCommaFrmInput(document.getElementById('txtTotalTaxValue').value),10);
		amtOfInvoceVis=parseInt(removeCommaFrmInput(document.getElementById('in_vatOnImpTable_7').value),10)+parseInt(removeCommaFrmInput(document.getElementById('txtTotalInvocieValue').value),10);
		document.getElementById('vatOnImpTable').style.display = '';
		document.getElementById('hidTaxRateVIS').value=document.getElementById('in_vatOnImpTable_11').value;
		if(selectedFlagVis>=1 && modifyFlagVis != 1)
		{
			alert(cntAddMoreDetails);
			return false;
		}
		return true;
	}
}

function afterAddVisFunction()
{
	document.getElementById('in_vatOnImpTable_11').value=document.getElementById('hidTaxRateVIS').value;
	document.getElementById('txtTotalTaxValue').value=convertToKenyanShillingFormatVal(amtToPaidVis,true);
	document.getElementById('txtTotalInvocieValue').value=convertToKenyanShillingFormatVal(amtOfInvoceVis,true);
	document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(amtToPaidVis,true); 
	document.getElementById('in_vatOnImpTable_4').readOnly=false;
	selectedFlagVis=selectedFlagVis+1;
	if(document.getElementById('hidIsPartial').value == "Y" || document.getElementById('hidIsPartial').value == "y" )
	{
		for(var i=3; i<14;i++)
		{
			document.getElementById('in_vatOnImpTable_'+i).readOnly=true;
			if(document.getElementById('in_vatOnImpTable_'+i).className=='readonlyInput form101_textfcurr_width textonlyRight' || document.getElementById('in_vatOnImpTable_'+i).className=='form101_textfcurr form101_textfcurr_width textonlyRight')
			{
				document.getElementById('in_vatOnImpTable_'+i).className='readonlyInput form101_textfcurr_width textonlyRight';
			}
			else
			{
				document.getElementById('in_vatOnImpTable_'+i).className='readonlyInput form101_textfcurr_width';
			}
		}
		var tabObj1 = document.getElementById('vatOnImpTable');
		for (var i = 1, n = tabObj1.rows.length; i <n; i++) 
		{ 
			document.getElementById('id_vatOnImpTable_'+i+'_2').href = '#'; 
			document.getElementById('id_vatOnImpTable_'+i+'_2').style.visibility = 'hidden'; 
		}
		document.getElementById('visRadio_'+rowNumbmerPartial).checked=false;
		selectedFlagPartial=selectedFlagPartial+1;
	}
	createSkipFieldForAddRow('vatOnImpTable','paymentRegForm');
}

function onchangeSupplierPinVAT(obj){
	var pin = trim(obj.value);
	if(validPIN(obj)){
		FetchTaxpayerDetailWithoutValidationSplObl.fetchTaxpayerDetailWithoutValidationSplObl(pin, {async:false,callback:function(data){
			if(data != NULL &&  data != null){
				if(data.isDataAvailable == N_FLAG){
					if(data.isAgent == ERROR ||data.isAgent == NO_CALL_MADE){ // Handled Scenario : 1) if no call made from Controller to impl 2) impl to facade
						alert(errFetchingData);
					}
					else if(data.isAgent == NO_DETAILS_FOUND){// Handled Scenario : 1) call made to facade with invalid PIN
						alert(validPin);
					}
					resetWithholdeeInfoInVIS();
					return false;
				}

				if(data.taxPayerFirstName != null || data.taxPayerId != null){

					document.getElementById('in_vatOnImpTable_12').value = data.taxPayerId;
					document.getElementById('in_vatOnImpTable_4').value=data.taxPayerFirstName;
					document.getElementById('in_vatOnImpTable_4').readOnly=true;
					document.getElementById('in_vatOnImpTable_4').className='readonlyInput form101_textfcurr_width';
					//document.getElementById('withholAddressWith').value=data.mobileNumber;
					//dwr.util.setValue('withholAddressWith',data.taxPayerFullAddr);

				}
				if(data.taxPayerFirstName == 'null' || data.taxPayerFirstName == null){
					alert(validPin);
					resetWithholdeeInfoInVIS();
					return false;
				}
			}
			else{
				alert(errFetchingData);
				resetWithholdeeInfoInVIS()
				return false;
			}

		}});

		return true;
	}
	else{
		resetWithholdeeInfoInVIS();
		return false;
	}
}

function addVisData()
{
	resetErrorList();
	if(validateFormFields(visJson))
	{
		hideTab('TabView',5);
		resetErrorList();
		incError=0;
		if(selectedFlagVis>=1 && modifyFlagVis != 1)
		{
			alert(cntAddMoreThanOneDetail);
			return false;
		}
		if( removeCommaFrmInput(document.getElementById('in_vatOnImpTable_7').value)>0  &&  removeCommaFrmInput(document.getElementById('in_vatOnImpTable_8').value)>0 )
		{
			if(addConfirm('a_vatOnImpTable'))
			{
				if(document.getElementById('a_vatOnImpTable').innerHTML!="Modify")
				{
					if(document.getElementById('hidIsPartial').value == "Y" || document.getElementById('hidIsPartial').value == "y" )
					{
						addrow('vatOnImpTable', '6', '15','4','validateDeleteRowVisTable','validateModifyRowVisTable','N','N','','3,7');
					}
					else
					{
						addrow('vatOnImpTable', '6', '15','4','validateDeleteRowVisTable','validateModifyRowVisTable','N','N','','3');
					}
				}else{
					return true;
				}
			}
		}
		else
		{
			document.getElementById('in_vatOnImpTable_7').value=0;
			document.getElementById('in_vatOnImpTable_8').value=0;
			alert(invoiceValue);
			return false;
		}
	}
	else
	{
		getErrTabToggle('TabView','2');	
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";		
	}
}

function validateDeleteRowVisTable(tab_str, rowno, cols) 
{
	if(deleteFlagVis==1 && modifyFlagVis==0)
	{
		var table = document.getElementById('vatOnImpTable');  
		var	totalAmt = removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
		var tempAmt = table.rows[rowno].cells[8].innerHTML;
		totalAmt = totalAmt - parseInt(removeCommaFrmInput(tempAmt),"10");
		amtOfInvoceVis=removeCommaFrmInput(document.getElementById('txtTotalInvocieValue').value);
		amtOfInvoceVis=amtOfInvoceVis-parseInt(removeCommaFrmInput(table.rows[rowno].cells[7].innerHTML),"10");
		
		document.getElementById('txtTotalAmountPaidOblig').value =  totalAmt;
		document.getElementById('txtTotalAmountPaidOblig').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true);
		document.getElementById('txtTotalTaxValue').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true); 
		selectedFlagVis=selectedFlagVis-1;
		deleteFlagVis = 0;
		if(selectedFlagVis==0)
		{
			clear_table_data('vatOnImpTable');
		}
		if(document.getElementById('hidIsPartial').value != "Y" && document.getElementById('hidIsPartial').value != "y" )
		{
			document.getElementById('txtTotalInvocieValue').value=convertToKenyanShillingFormatVal(amtOfInvoceVis, true);
		}
		else{
			document.getElementById('txtTotalInvocieValue').value=0;
		}
		if(document.getElementById('hidIsPartial').value == "Y" || document.getElementById('hidIsPartial').value == "y" )
		{
			selectedFlagPartial=selectedFlagPartial-1;
		}

		//currentPaymentVis();

	}
	else
	{
		deleteFlagVis = 0;
	}
}
function validateModifyRowVisTable(tab_str, rowno, cols) 
{
	modifyFlagVis = 1;
	commonModifyFlag=1;
	if(document.getElementById('in_vatOnImpTable_3').value!=""||document.getElementById('in_vatOnImpTable_3').value!==null)
	{
		document.getElementById('in_vatOnImpTable_4').readOnly=true;
		document.getElementById('in_vatOnImpTable_4').className='readonlyInput form101_textfcurr_width';
	}

}
function beforeModifyVisTable() 
{
	if(addVisData())
	{
		resetErrorList();
		if(validateFormFields(visJson)){
		var table = document.getElementById('vatOnImpTable');
		amtToPaidVis=table.rows[rowno].cells[8].innerHTML;
		document.getElementById('hidTaxRateVIS').value=document.getElementById('in_vatOnImpTable_11').value;
		amtOfInvoceVis=(removeCommaFrmInput(table.rows[rowno].cells[7].innerHTML));
		}
		else
		{
			getErrTabToggle('TabView','2');	
			tabview_switch('TabView', '2');
			hideAndShowTable("errorDiv");
			document.getElementById('btnTbl').style.display="none";		
			return false;
		}
	}else{
		return false;
	}

}
function afterModifyVisTable() 
{
	modifyFlagVis = 0;
	commonModifyFlag=0;
	var table = document.getElementById('vatOnImpTable');
	document.getElementById('in_vatOnImpTable_11').value=document.getElementById('hidTaxRateVIS').value;
	var tmpAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var modifyAmt;
	if(document.all)
	{
		modifyAmt=(table.rows[rowno].cells[8].innerText);
	}
	else
	{
		modifyAmt=table.rows[rowno].cells[8].textContent;
	}
	document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(parseInt(tmpAmt,10)+parseInt(removeCommaFrmInput(modifyAmt),"10")-parseInt(removeCommaFrmInput(amtToPaidVis),10),true); 
	document.getElementById('txtTotalTaxValue').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true);
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
	document.getElementById('txtTotalAmountPaidOblig').className='readonlyInput form101_textfcurr_width';
	var tmpAmt=removeCommaFrmInput(document.getElementById('txtTotalInvocieValue').value);
	var modifyAmt1;
	if(document.all)
	{
		modifyAmt1=(table.rows[rowno].cells[7].innerText);
	}
	else
	{
		modifyAmt1=table.rows[rowno].cells[7].textContent;
	}
	document.getElementById('txtTotalInvocieValue').value=convertToKenyanShillingFormatVal(parseInt(tmpAmt,10)+parseInt(removeCommaFrmInput(modifyAmt1),"10")-parseInt(removeCommaFrmInput(amtOfInvoceVis),10),true); 
	document.getElementById('in_vatOnImpTable_4').readOnly=false;
	document.getElementById('in_vatOnImpTable_4').className='form101_textfcurr form101_textfcurr_width';
}
function afterDeleteVisTable()
{
	deleteFlagVis = 1;
}
function clearFormVis()
{
	modifyFlagVis = 0;
	commonModifyFlag=0;
	document.getElementById('hidTaxRateVIS').value=document.getElementById('in_vatOnImpTable_11').value;
	if(clear_table('vatOnImpTable','10'))
	{
		document.getElementById('in_vatOnImpTable_11').value=document.getElementById('hidTaxRateVIS').value; 
		document.getElementById('in_vatOnImpTable_8').value =0;
		if(document.getElementById('hidIsPartial').value == "Y" || document.getElementById('hidIsPartial').value == "y" )
		{
			document.getElementById('visRadio_'+rowNumbmerPartial).checked=false;
		}
		//currentPaymentVis();
	}

}

function showVisPartialTable(partialDetailArray){
	if(partialDetailArray.length>=1){
		document.getElementById('navigationLegend').innerHTML = PreviousLiabilityDetails ;
		var cntr = 0;
		var tabObj = document.getElementById("in_TaxSplObligHdrTbl_3");
		for(var l = tabObj.rows.length; l >1 ;l--){
			tabObj.deleteRow(l -1);
		}	
		for(var i=0;i<partialDetailArray.length;i++){
			cntr = parseInt(cntr);
			var tabRow = tabObj.insertRow(tabObj.rows.length);
			tabRow.id="visHdrRow_"+cntr;
			var tabCell = new Array();
			for (var j=0;j<18;j++){
				tabCell[j] = tabRow.insertCell(j);
			}
			var pmtSplDetailVO = partialDetailArray[i];
			/*if(document.all)
			{
				var element = document.createElement("<input type = 'radio' onclick = 'onSelectVisHdrRadio(this);'>");
				element.setAttribute("name", "visRadio");
				element.setAttribute("id", "visRadio_"+cntr);
				element.setAttribute("value", cntr);					            
				tabCell[0].appendChild(element);

			}
			else{
				var element = document.createElement('input');       
				element.setAttribute('type', 'radio');     
				element.setAttribute('name', 'visRadio');
				element.setAttribute('id', 'visRadio_'+cntr);
				element.setAttribute('value', cntr);     
				element.setAttribute("onclick","javascript:onSelectVisHdrRadio(this);");
				tabCell[0].appendChild(element);
			}*/
			var element = document.createElement('input');       
			element.type ='radio';
			element.onclick = function () {onSelectVisHdrRadio(this);};
			element.value = cntr;
			element.id = 'visRadio_'+cntr;
			element.name = "visRadio";
			element.className='bordercl';
			tabCell[0].appendChild(element); 

			/*	tabCell[0].innerHTML = cntr+1;
			tabCell[0].style.textAlign="center";
			tabCell[0].style.fontSize="11";*/

			tabCell[1].innerHTML = pmtSplDetailVO.transactionDateVAT;
			tabCell[1].style.textAlign="center";
			tabCell[1].style.fontSize="11";

			tabCell[2].innerHTML = pmtSplDetailVO.invoiceNumberVAT;
			tabCell[2].style.textAlign="center";
			tabCell[2].style.fontSize="11";

		/*	tabCell[3].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.valueOfTaxPayable).toFixed(2),true);
			tabCell[3].style.textAlign="right";
			tabCell[3].style.fontSize="11";

			tabCell[4].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.amountPaid).toFixed(2),true);
			tabCell[4].style.textAlign="right";
			tabCell[4].style.fontSize="11";

			tabCell[5].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.amountPayable).toFixed(2),true);
			tabCell[5].style.textAlign="right";
			tabCell[5].style.fontSize="11";*/

			tabCell[3].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualPrincipalAmount).toFixed(2),true);
			tabCell[3].style.textAlign="right";
			tabCell[3].style.fontSize="11";


			tabCell[4].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualFineAmount).toFixed(2),true);
			tabCell[4].style.textAlign="right";
			tabCell[4].style.fontSize="11";


			tabCell[5].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualPenaltyAmount).toFixed(2),true);
			tabCell[5].style.textAlign="right";
			tabCell[5].style.fontSize="11";

			tabCell[6].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualInterestAmount).toFixed(2),true);
			tabCell[6].style.textAlign="right";
			tabCell[6].style.fontSize="11";

			tabCell[7].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualLiabilityAmount).toFixed(2),true);
			tabCell[7].style.textAlign="right";
			tabCell[7].style.fontSize="11";


			var element = document.createElement('input');
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.bclSplObilgationHdrId;
			element.width = "0%";
			tabCell[8].appendChild(element);
			tabCell[8].style.display = "none";

			var element = document.createElement('input');
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.bclSplObilgationDtlId;
			element.width = "0%";
			tabCell[9].appendChild(element);
			tabCell[9].style.display = "none";

			var element = document.createElement('input');
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.obilgationHdrId;
			element.width = "0%";
			tabCell[10].appendChild(element);
			tabCell[10].style.display = "none";

			var element = document.createElement('input');
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.obilgationDtlId;
			element.width = "0%";
			tabCell[11].appendChild(element);
			tabCell[11].style.display = "none";


			var element = document.createElement('input'); //actualPrincipalAmount
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.actualPrincipalAmount;
			element.width = "0%";
			tabCell[12].appendChild(element);
			tabCell[12].style.display = "none";

			var element = document.createElement('input'); //actualFineAmount
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.actualFineAmount;
			element.width = "0%";
			tabCell[13].appendChild(element);
			tabCell[13].style.display = "none";

			var element = document.createElement('input'); //actualPenaltyAmount
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.actualPenaltyAmount;
			element.width = "0%";
			tabCell[14].appendChild(element);
			tabCell[14].style.display = "none";

			var element = document.createElement('input');  //actualInterestAmount
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.actualInterestAmount;
			element.width = "0%";
			tabCell[15].appendChild(element);
			tabCell[15].style.display = "none";

			var element = document.createElement('input'); // actualLiabilityAmount
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.actualLiabilityAmount;
			element.width = "0%";
			tabCell[16].appendChild(element);
			tabCell[16].style.display = "none";
			
			var element = document.createElement('input'); // actualLiabilityAmount
			element.type = 'hidden';
			element.value =  pmtSplDetailVO.parentId;
			element.width = "0%";
			tabCell[17].appendChild(element);
			tabCell[17].style.display = "none";

			cntr = cntr+1;
		}
		document.getElementById("navigationFieldset").style.display = "";
		//	document.getElementById("navigationTable").style.display = "";
		document.getElementById("in_TaxSplObligHdrTbl_3").style.display = "";
		document.getElementById("navigationTableTaxSpl").style.display = "";
		//	document.getElementById("navigationTable").style.display = "";
		document.getElementById('hidNavigationFlag').value = "6";
		validatePaginationLastTaxSpl();
		validatePaginationFirstTaxSpl();
	}
}
function onSelectVisHdrRadio(obj)
{
	rowNumbmerPartial=obj.value;
	if(selectedFlagVis>0 && document.getElementById('hidIsPartial').value != "Y")
	{
		alert(cntAddPrevLiab);
		document.getElementById('visRadio_'+rowNumbmerPartial).checked=false;
	}
	else
	{
		var taxPayerId=document.getElementById('hidTaxPayerId').value;
		var rowNum = obj.value;
		objValue=obj.value;
		//alert(rowNum);
		var rowRef = document.getElementById("visHdrRow_" + rowNum);
		bclPaymentHdrId = 0;// not of use
		bclPaymentDtlId = 0 ;// not of use


		var rowNum = obj.value;
		objValue=obj.value;
		var rowRef = document.getElementById("visHdrRow_" + rowNum);
		bclPaymentHdrId = 0;// not of use
		bclPaymentDtlId = 0 ;// not of use

		bclSplObligHdrId = 0;
		bclSplObliDtlId = 0;// not of use

		obligationHdrId = 0;// of no use
		obligationDtlId = 0;// used
		clear_Page_data('vatOnImpTable','10');
		document.getElementById('hidIsPartial').value = "Y";
		startIndexStr=parseInt(document.getElementById('startIndexUpdate').value);
		if(document.all)
		{
			bclSplObligHdrId = (rowRef.getElementsByTagName("INPUT")[1].value);
			bclSplObliDtlId = (rowRef.getElementsByTagName("INPUT")[2].value);
			obligationHdrId = (rowRef.getElementsByTagName("INPUT")[3].value);
			obligationDtlId = (rowRef.getElementsByTagName("INPUT")[4].value);
			/*bclSplObligHdrId = (rowRef.getElementsByTagName("INPUT")[6].value);
		bclSplObliDtlId = (rowRef.getElementsByTagName("INPUT")[7].value);
		obligationHdrId = (rowRef.getElementsByTagName("INPUT")[8].value);
		obligationDtlId = (rowRef.getElementsByTagName("INPUT")[9].value);*/
			
			actualPrincipalAmount = (rowRef.getElementsByTagName("INPUT")[5].value);
			actualFineAmount = (rowRef.getElementsByTagName("INPUT")[6].value);
			actualPenaltyAmount = (rowRef.getElementsByTagName("INPUT")[7].value);
			actualInterestAmount = (rowRef.getElementsByTagName("INPUT")[8].value);
			actualLiabilityAmount = (rowRef.getElementsByTagName("INPUT")[9].value);
			
			parentId = (rowRef.getElementsByTagName("INPUT")[10].value);

		}
		else
		{
			bclSplObligHdrId = (rowRef.getElementsByTagName("INPUT")[1].value);
			bclSplObliDtlId = (rowRef.getElementsByTagName("INPUT")[2].value);
			obligationHdrId = (rowRef.getElementsByTagName("INPUT")[3].value);
			obligationDtlId = (rowRef.getElementsByTagName("INPUT")[4].value);
			actualPrincipalAmount = (rowRef.getElementsByTagName("INPUT")[5].value);
			actualFineAmount = (rowRef.getElementsByTagName("INPUT")[6].value);
			actualPenaltyAmount = (rowRef.getElementsByTagName("INPUT")[7].value);
			actualInterestAmount = (rowRef.getElementsByTagName("INPUT")[8].value);
			actualLiabilityAmount = (rowRef.getElementsByTagName("INPUT")[9].value);
			
			parentId = (rowRef.getElementsByTagName("INPUT")[10].value);

		}

		FetchSpecialObligationDtlWeb.fetchSpecialObligationDtlWeb(bclSplObliDtlId,VisOblCode,taxPayerId,parentId,startIndexStr,{async:false,callback:function(data){
			if(data!=null){
				document.getElementById('btnTransactionDate').style.display="none";
				
				document.getElementById('invoiceValueTd1').style.display="none";
				document.getElementById('invoiceValueTd2').style.display="none";
				document.getElementById('principleAmuntTd1').style.display="";
				document.getElementById('principleAmuntTd2').style.display="";
				
				document.getElementById('vatOnImpRow6').style.display="";
				document.getElementById('visInvoiceValueTh').style.display="none"; 
				
				document.getElementById('taxRateVATTd1').style.display="none";
				document.getElementById('taxRateVATTd2').style.display="none";
				document.getElementById('ValueOfInterestPayableTd1').style.display="";
				document.getElementById('ValueOfInterestPayableTd2').style.display="";
				
				document.getElementById('tdTotalInvocieValue1').style.display="none";
				document.getElementById('tdTotalInvocieValue2').style.display="none";
				document.getElementById('tdTotalInvocieValue3').style.display="";
				document.getElementById('tdTotalInvocieValue4').style.display="";
				
				document.getElementById('bclSplObligationHdrId').value = bclSplObligHdrId;	
				for(var i=3; i<18;i++)
				{
					document.getElementById('in_vatOnImpTable_'+i).readOnly=true;
					if(document.getElementById('in_vatOnImpTable_'+i).className=='readonlyInput form101_textfcurr_width textonlyRight' || document.getElementById('in_vatOnImpTable_'+i).className=='form101_textfcurr form101_textfcurr_width textonlyRight')
					{
						document.getElementById('in_vatOnImpTable_'+i).className='readonlyInput form101_textfcurr_width textonlyRight';
					}
					else
					{
						document.getElementById('in_vatOnImpTable_'+i).className='readonlyInput form101_textfcurr_width';
					}
				}
				var pmtSplDetailVOList=data;
				if(pmtSplDetailVOList.length>=1 && pmtSplDetailVOList[0].isDataAvailable == "Y"){
					var pmtSplDetailVO = pmtSplDetailVOList[0];

					if(pmtSplDetailVO.supplierPinVAT != null &&pmtSplDetailVO.supplierPinVAT != "" && pmtSplDetailVO.supplierPinVAT != 'null' && pmtSplDetailVO.supplierPinVAT != "null"){
						document.getElementById('in_vatOnImpTable_3').value = pmtSplDetailVO.supplierPinVAT;
					}
					if(pmtSplDetailVO.supplierNameVAT != null &&pmtSplDetailVO.supplierNameVAT != "" && pmtSplDetailVO.supplierNameVAT != 'null' && pmtSplDetailVO.supplierNameVAT != "null"){
						document.getElementById('in_vatOnImpTable_4').value = pmtSplDetailVO.supplierNameVAT;
					}
					if(pmtSplDetailVO.countryOfRegionVAT != null &&pmtSplDetailVO.countryOfRegionVAT != "" && pmtSplDetailVO.countryOfRegionVAT != 'null' && pmtSplDetailVO.countryOfRegionVAT != "null"){
						document.getElementById('in_vatOnImpTable_9').value = pmtSplDetailVO.countryOfRegionVAT;
					}
					if(pmtSplDetailVO.descOfServiceVAT != null &&pmtSplDetailVO.descOfServiceVAT != "" && pmtSplDetailVO.descOfServiceVAT != 'null' && pmtSplDetailVO.descOfServiceVAT != "null"){
						document.getElementById('in_vatOnImpTable_10').value = pmtSplDetailVO.descOfServiceVAT;
					}
					if(pmtSplDetailVO.transactionDateVAT != null &&pmtSplDetailVO.transactionDateVAT != "" && pmtSplDetailVO.transactionDateVAT != 'null' && pmtSplDetailVO.transactionDateVAT != "null"){
						document.getElementById('in_vatOnImpTable_5').value = pmtSplDetailVO.transactionDateVAT;
					}
					if(pmtSplDetailVO.invoiceNumberVAT != null &&pmtSplDetailVO.invoiceNumberVAT != "" && pmtSplDetailVO.invoiceNumberVAT != 'null' && pmtSplDetailVO.invoiceNumberVAT != "null"){
						document.getElementById('in_vatOnImpTable_6').value = pmtSplDetailVO.invoiceNumberVAT;
					}
					if(pmtSplDetailVO.taxRateVAT != null &&pmtSplDetailVO.taxRateVAT != "" && pmtSplDetailVO.taxRateVAT != 'null' && pmtSplDetailVO.taxRateVAT != "null"){
						document.getElementById('in_vatOnImpTable_11').value = convertToKenyanShillingFormatValWithDecimal(parseFloat( pmtSplDetailVO.taxRateVAT,10).toFixed(2),true);
						//document.getElementById('').readOnly=true; to be disabled
					}
					if(pmtSplDetailVO.invoiceValueVAT != null &&pmtSplDetailVO.invoiceValueVAT != "" && pmtSplDetailVO.invoiceValueVAT != 'null' && pmtSplDetailVO.invoiceValueVAT != "null"){
						document.getElementById('in_vatOnImpTable_7').value = convertToKenyanShillingFormatVal(Math.ceil(pmtSplDetailVO.invoiceValueVAT),true);
					}
					if(pmtSplDetailVO.taxPayableValueVAT != null &&pmtSplDetailVO.taxPayableValueVAT != "" && pmtSplDetailVO.taxPayableValueVAT != 'null' && pmtSplDetailVO.taxPayableValueVAT != "null"){
						document.getElementById('in_vatOnImpTable_8').value = convertToKenyanShillingFormatVal(Math.ceil(pmtSplDetailVO.taxPayableValueVAT),true);
					}
					if(pmtSplDetailVO.supplierIdVAT != null &&pmtSplDetailVO.supplierIdVAT != "" && pmtSplDetailVO.supplierIdVAT != 'null' && pmtSplDetailVO.supplierIdVAT != "null"){
						document.getElementById('in_vatOnImpTable_12').value = pmtSplDetailVO.supplierIdVAT;
					}

					document.getElementById('in_vatOnImpTable_8').value =convertToKenyanShillingFormatVal(Math.ceil(actualLiabilityAmount),true); ;
					document.getElementById('in_vatOnImpTable_14').value=	convertToKenyanShillingFormatVal(Math.ceil(actualPrincipalAmount),true);
					document.getElementById('in_vatOnImpTable_15').value=	convertToKenyanShillingFormatVal(Math.ceil(actualFineAmount),true);
					document.getElementById('in_vatOnImpTable_16').value=convertToKenyanShillingFormatVal(Math.ceil(actualPenaltyAmount),true);
					document.getElementById('in_vatOnImpTable_17').value=convertToKenyanShillingFormatVal(Math.ceil(actualInterestAmount),true) ;
					
					document.getElementById('in_vatOnImpTable_13').value = bclSplObliDtlId;
					//document.getElementById('in_vatOnImpTable_9').value = "Kenya";
				}

			}
			else{
			}

		}});	
	}
}

function validateVisDtls(id)
{
	var rtnFlag;
	rtnFlag = validateFormFieldOnEvent(id, visJson);
	{
		getErrTabToggle('TabView','2');	
		if(!rtnFlag)
		{
			tabview_switch('TabView', '2');
			hideAndShowTable("errorDiv");
			document.getElementById('btnTbl').style.display="none";
		}
		return rtnFlag;	
	}
}
function confirmForPartialVis()
{
	if(document.getElementById('hidIsPartial').value == "Y" || document.getElementById('hidIsPartial').value == "y" )
	{
		if(selectedFlagPartial==0)
		{
			if (confirm(previousLiabilityAddingAlert))
			{
				return addVisData();
			}
		}
		else
		{
			return addVisData();
		}
	}
	else
	{
		return addVisData();
	}
}

function currentPaymentVis()
{
	if((document.getElementById('hidIsPartial').value != "Y" || document.getElementById('hidIsPartial').value != "y" )&&(selectedFlagPartial==0))
	{
		for(var i=3; i<14;i++)
		{
			document.getElementById('in_vatOnImpTable_'+i).readOnly=false;
			if(document.getElementById('in_vatOnImpTable_'+i).className=='readonlyInput form101_textfcurr_width textonlyRight' || document.getElementById('in_vatOnImpTable_'+i).className=='form101_textfcurr form101_textfcurr_width textonlyRight')
			{
				document.getElementById('in_vatOnImpTable_'+i).className='form101_textfcurr form101_textfcurr_width textonlyRight';
			}
			else
			{
				document.getElementById('in_vatOnImpTable_'+i).className='form101_textfcurr form101_textfcurr_width';
			}
		}
		document.getElementById('hidIsPartial').value = "N";
		document.getElementById('btnTransactionDate').style.display="";
		
		document.getElementById('invoiceValueTd1').style.display="";
		document.getElementById('invoiceValueTd2').style.display="";
		document.getElementById('principleAmuntTd1').style.display="none";
		document.getElementById('principleAmuntTd2').style.display="none";
		
		document.getElementById('vatOnImpRow6').style.display="none";
		document.getElementById('visInvoiceValueTh').style.display=""; 
		document.getElementById('taxRateVATTd1').style.display="";
		document.getElementById('taxRateVATTd2').style.display="";
		document.getElementById('ValueOfInterestPayableTd1').style.display="none";
		document.getElementById('ValueOfInterestPayableTd2').style.display="none";
		
		document.getElementById('tdTotalInvocieValue1').style.display="";
		document.getElementById('tdTotalInvocieValue2').style.display="";
		document.getElementById('tdTotalInvocieValue3').style.display="none";
		document.getElementById('tdTotalInvocieValue4').style.display="none";
		
		
		document.getElementById('in_vatOnImpTable_11').readOnly=true;
		document.getElementById('in_vatOnImpTable_11').className='readonlyInput form101_textfcurr_width';
		document.getElementById('in_vatOnImpTable_8').readOnly=true;
		document.getElementById('in_vatOnImpTable_8').className='readonlyInput form101_textfcurr_width textonlyRight';
		modifyFlagVis=0;
		commonModifyFlag=0;
		document.getElementById('hidTaxRateVIS').value=document.getElementById('in_vatOnImpTable_11').value;
		clear_Page_data('vatOnImpTable','10');
		document.getElementById('in_vatOnImpTable_11').value=document.getElementById('hidTaxRateVIS').value;
	}
}
function beforeDeleteWithVis()
{
	if(modifyFlagVis==1)
	{
		alert(completeModify);
		return false;
	}
}
function isVISRegistered(){
	var taxpayerId = document.getElementById('hidTaxPayerId').value;
	var obligationId = VisOblCode;
	//var obligationId = document.getElementById('hidTaxPayerId').value;


	var invoiceNumberVAT = document.getElementById('in_vatOnImpTable_6').value;
	var transactionDateVAT = document.getElementById('in_vatOnImpTable_5').value;

	var PmtSplDetailVO = {
			taxpayerId  : taxpayerId,
			obligationId : obligationId,

			invoiceNumberVAT  : invoiceNumberVAT ,
			transactionDateVAT  : transactionDateVAT

	};

	if(isSplObligationRegisteredWeb(PmtSplDetailVO))
		return true;
	else
		return false;

}

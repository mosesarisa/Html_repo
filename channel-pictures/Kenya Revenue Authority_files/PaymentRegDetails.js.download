/*function checkAgentOrPayee(pin){

	//alert("regDetaul.js-->checkAgentOrPayee-->pin"+pin);
	document.getElementById('txtPin').value= trim(document.getElementById('hidLogedInPinNo').value,'');
	document.getElementById('hidIsAgentThroughReg').value="no";
	document.getElementById('txtPin').readOnly=true;
	document.getElementById('hidIsAgentThroughReg').value="N";
	agentFlag=0;
	fetchTaxpayerDetail(document.getElementById('txtPin').value);

	var pinNo= trim(pin,''); 
	/*CheckAgentOrPayee.checkAgentOrPayee(pinNo,function(data) {
		if(data != null){
			var agnetArray=data.split("-");
			isAgent=agnetArray[0];
			var agentId=agnetArray[1];
			if(isAgent == "Y" || isAgent == "y"){
				document.getElementById('txtPin').value='';
				document.getElementById('txtPin').readOnly=false;
				document.getElementById('hidIsAgentThroughReg').value="yes";
				document.getElementById('hidAgentId').value=agentId;
				document.getElementById('hidIsAgentThroughReg').value="Y";
				alert("You have logged in as an Agent, Please enter valid Tax Payer PIN.");
				agentFlag=1;
			}
			else if(isAgent == "n" || isAgent == "N"){
				document.getElementById('txtPin').value= trim(document.getElementById('hidLogedInPinNo').value,'');
				document.getElementById('hidIsAgentThroughReg').value="no";
				document.getElementById('txtPin').readOnly=true;
				document.getElementById('hidIsAgentThroughReg').value="N";
				agentFlag=0;
				fetchTaxpayerDetail(pin);
			}
			else{alert('Error while fetching data...');}
		}
		else{alert('Error while fetching data...');}
	});*/
//}*/
var paymentTypeValueForRecord;
var taxHeadValueForRecord;
var taxSubHeadValueForRecord;
var taxSubHeadValueForPrevRecord;
var taxSubHeadValueForPrevRecordCGT;
var taxSubHeadValueForPrevRecordForCGT;
var taxSubHeadValueForPrevRecordMRI;
var taxSubHeadValueForPrevRecordForMRI;
var taxSubHeadValueForPrevRecordForHousingLevy;
var pinLoginTime;// used when user wants to change pin in outside or agent login savePaymentDetails
var TotalAssmntAmt=0;
var flagForCGT=0;
var flagForMRI=0;
var flagForHousingLevy=0;;
var flagForMergeCGT=1;
var flagForMergeMRI=1;
var isMergeCGT=1;
var isMergeMRI=1;
var VATWithHoldingAssmntTax=0;
var RentWithHoldingAssmntTax=0;
var TotalPriorAssmntAmt=0;
var iTaxPriorAssmntTax=0;
var isiTaxPriorAssmnt=false;
var iTaxModifyFlag=0;
var taxSubHeadValueForPrevRecordAmnesty;
var taxSubHeadValueForPrevRecordForAmnesty;
var flagForAmnesty=0;
var isMergeAmnesty=1;
var flagForMergeAmnesty=1;
var isItrReg=false;
var isITRegCancelled=false;
var isVATRegCancelled=false;
var VisAssmntTax=0;

function checkAgentOrPayee(isAgent, agentType, tPin, isSubAgent){
	if(((isAgent =="Y" ||isAgent =="y") || (isSubAgent =="Y" ||isSubAgent =="y")) && agentType != "INTER"){
		if(agentType=="VWHT")
			{
				document.getElementById('hidLogedInPinNo').value=tPin;
			}
		//Added by Mingu for it Paypoint :: START
		if(agentType=="ITWHT")
		{
			document.getElementById('hidLogedInPinNo').value=tPin;
		}
		//Added by Mingu for it Paypoint :: END
		document.getElementById('txtPin').value=tPin;
		document.getElementById('txtPin').readOnly=true;		document.getElementById('txtPin').className='readonlyInput form101_textfcurr_width';
		document.getElementById('hidIsAgentThroughReg').value="yes";
		//document.getElementById('hidAgentId').value=agentId;
		document.getElementById('hidIsAgentThroughReg').value="Y";
		//alert("You have logged in as an Agent, Please enter valid Tax Payer PIN.");
		agentFlag=1;
		fetchTaxpayerDetail(document.getElementById('txtPin'));
	}
	else{
		if(tPin.length>11 && tPin.substring(11,12)=="B")
			{
				document.getElementById('hidLogedInPinNo').value=tPin.substring(0,11);
			}
		document.getElementById('txtPin').value= trim(document.getElementById('hidLogedInPinNo').value,'');
		document.getElementById('hidIsAgentThroughReg').value="no";
		document.getElementById('txtPin').readOnly=true;
		document.getElementById('txtPin').className='readonlyInput form101_textfcurr_width';
		document.getElementById('hidIsAgentThroughReg').value="N";
		agentFlag=0;
		fetchTaxpayerDetail(document.getElementById('txtPin'));
	}

}
function checkPin(pin)
{
	if(paymentRegPinDetailsOblJson)
	{
		checkAgentOrPayee(pin);
		return true;
	}
	else{
		document.getElementById('txtPin').value="";
		document.getElementById('txtFirstName').value="";
		document.getElementById('taxPayerFullAddr').value="";
		document.getElementById('txtPin').readOnly=false;
		document.getElementById('txtPin').className='form101_textfcurr form101_textfcurr_width';
		return false;
	}

}

function fetchTaxpayerDetail(obj){
	if(validPIN(obj)){
		var pin=trim(document.getElementById('txtPin').value,'');
		pinLoginTime=pin;
		var logedInPin=trim(document.getElementById('hidLogedInPinNo').value,'');
		if(pin=='' || pin == null){
			document.getElementById('txtFirstName').value="";
			document.getElementById('taxPayerFullAddr').value="";
			return false;
		}else{
			pin=pin.toUpperCase();
		}
		/*if((isAgent =="Y" ||isAgent =="y") && agentType != "INTER"){
			if(logedInPin==pin){
				alert("You have logged in as an Agent so cannot make self payment");
				return false;
			}
		}*/
		if(obligationDtlsList!=null){
			var rawLength=obligationDtlsRowCount;
			if(rawLength>0){
				alert(removePaymentUsingDel);
				document.getElementById('txtPin').value=pin;
				return false;
			}	
		}
		FetchTaxPayerDetail.fetchTaxPayerDetail(pin,logedInPin,{async:false,callback: function(data){

			if(data != 'null' &&  data != null){
				if(data.taxPayerCitizenshipCode != null){
					document.getElementById('taxPayerCitizenshipCode').value = data.taxPayerCitizenshipCode;
				}
				if(data.vatWhtPaymentPeriodData!=null && data.vatWhtPaymentPeriodData.length>0)
					{
						dwr.util.removeAllOptions('VatWhtTaxPeriodYear');
						var option=document.createElement("option");
						option.text='--Year--';
						option.value='-1';
						document.getElementById("VatWhtTaxPeriodYear").add(option); 
						for(var i=0; i<data.vatWhtPaymentPeriodData.length;i++)
							{
								var option=document.createElement("option");
								option.text=data.vatWhtPaymentPeriodData[i];
								option.value=data.vatWhtPaymentPeriodData[i];
								document.getElementById("VatWhtTaxPeriodYear").add(option); 
							}
					}
					//added for VAT services imported :: 66743
					if(data.vISPaymentPeriodData!=null && data.vISPaymentPeriodData.length>0)
					{
						//added on 11/09/2023 for Ticket #70465
						var visTaxPeriodYear = document.getElementById("VisTaxPeriodYear");
						if(visTaxPeriodYear != null){
						//End 11/09/2023 for Ticket #70465
						dwr.util.removeAllOptions("VisTaxPeriodYear");
						var option=document.createElement("option");
						option.text='--Year--';
						option.value='-1';
						document.getElementById("VisTaxPeriodYear").add(option); 
						for(var i=0; i<data.vISPaymentPeriodData.length;i++)
							{
								var option=document.createElement("option");
								option.text=data.vISPaymentPeriodData[i];
								option.value=data.vISPaymentPeriodData[i];
								document.getElementById("VisTaxPeriodYear").add(option); 
							}
						}
					}
					//END
				
				if(data.whtPaymentPeriodData!=null && data.whtPaymentPeriodData.length>0) {
					dwr.util.removeAllOptions("ITWhtTaxPeriodYear");
					var option=document.createElement("option");
					option.text='--Year--';
					option.value='-1';
					document.getElementById("ITWhtTaxPeriodYear").add(option); 
					for(var i=0; i<data.whtPaymentPeriodData.length;i++)
						{
							var option=document.createElement("option");
							option.text=data.whtPaymentPeriodData[i];
							option.value=data.whtPaymentPeriodData[i];
							document.getElementById("ITWhtTaxPeriodYear").add(option); 
						}
				}
				
				if(data.advPaymentPeriodData!=null && data.advPaymentPeriodData.length>0) {
					dwr.util.removeAllOptions("AdvTaxPeriodYearAmnd");
					var option=document.createElement("option");
					option.text='--Year--';
					option.value='-1';
					document.getElementById("AdvTaxPeriodYearAmnd").add(option); 
					for(var i=0; i<data.advPaymentPeriodData.length;i++)
						{
							var option=document.createElement("option");
							var taxprdText='Jan '+data.advPaymentPeriodData[i]+' - Dec '+data.advPaymentPeriodData[i];
							var taxprdVal = '01/01/'+data.advPaymentPeriodData[i]+'-31/12/'+data.advPaymentPeriodData[i];
							/*option.text=data.advPaymentPeriodData[i];
							option.value=data.advPaymentPeriodData[i];*/
							option.text=taxprdText;
							option.value=taxprdVal;
							document.getElementById("AdvTaxPeriodYearAmnd").add(option); 
						}
				}
				
				//changes done for CR Rent Income Withholding
				if(data.rentIncomeWithPaymentPeriodData!=null && data.rentIncomeWithPaymentPeriodData.length>0) {
					dwr.util.removeAllOptions("RentIncomeWithTaxPeriodYear");
					var option=document.createElement("option");
					option.text='--Year--';
					option.value='-1';
					document.getElementById("RentIncomeWithTaxPeriodYear").add(option); 
					for(var i=0; i<data.rentIncomeWithPaymentPeriodData.length;i++)
						{
							var option=document.createElement("option");
							option.text=data.rentIncomeWithPaymentPeriodData[i];
							option.value=data.rentIncomeWithPaymentPeriodData[i];
							document.getElementById("RentIncomeWithTaxPeriodYear").add(option); 
						}
				}
				//end
				//Start:Added by Bhavana for no. of days for Date of transfer 
				document.getElementById("noODaysForDateOfTransfer").value=data.noODaysForDateOfTransfer; 
				//End:Added by Bhavana for no. of days for Date of transfer 
				
				//changes done for Enhancement 1
				/*if(data.advPaymentPeriodData!=null)
				{
					dwr.util.removeAllOptions('AdvTaxPeriodYear');
					var option=document.createElement("option");
					option.text='--Year--';
					option.value='-1';
					document.getElementById("AdvTaxPeriodYear").add(option); 
					for(var i=0; i<data.advPaymentPeriodData.length;i++)
						{
							var option=document.createElement("option");
							option.text=data.advPaymentPeriodData[i];
							option.value=data.advPaymentPeriodData[i];
							document.getElementById("AdvTaxPeriodYear").add(option); 
						}
				}*/
				//end

				if(data.isDataAvailable == "N"){

					if(data.isAgent == "ERROR" ||data.isAgent == "NO_CALL"){ // Handled Scenario : 1) if no call made from Controller to impl 2) impl to facade
						alert(errFetchingData);
					}
					else if(data.isAgent == "AGENT_ERROR"){// Handled Scenario : 1) No call made to validate taxpayer with agent 2) or got exception in same scenario
						alert(errValidatingAgent);
					}
					else if(data.isAgent == "INVALID_TP"){// Handled Scenario : 1) Invalid taxpayer while agnet login
						alert(invalidTpForAgent);
					}
					else if(data.isAgent == "NDF"){// Handled Scenario : 1) call made to facade with invalid PIN
						alert(invalidPin);
					}
					clearFormWithoutWarning();
					document.getElementById('txtPin').focus();
					if(document.getElementById('isWithoutLogin').value=="Y" ||document.getElementById('isWithoutLogin').value=="y"){
						document.getElementById('cmbPaymentType').disabled=false;
					}
					else{
						document.getElementById('cmbPaymentType').disabled=true;
					}
					return false;
				}

				if(data.isAgent == "NO"){
					if(data.taxPayerFirstName != null || data.taxPayerId != null){
						if(document.getElementById('cmbPaymentType')!=null)
							document.getElementById('cmbPaymentType').disabled=false;
						document.getElementById('txtPin').value= pin;
						document.getElementById('hidEffectiveDt').value=data.effectiveDate;
						document.getElementById('txtFirstName').value=data.taxPayerFirstName;					
						document.getElementById('hidTaxPayerId').value=data.taxPayerId;
						document.getElementById('mobileNumber').value=data.mobileNumber;
						//ADDED by Mingu for iTax-KEBS integration :: START
						document.getElementById('kebsEntryNo').value=data.entryNo;
						//ADDED by Mingu for iTax-KEBS integration :: end
						// ADDED by Mingu and Ruth for pin with no obligation :: START
						document.getElementById('isPinWithNoOblig').value=data.isPinWithNoOblig;
						if(data.isPinWithNoOblig == 'Y'){
							dwr.util.removeAllOptions(document.getElementById("cmbTaxHead"));
							var oOption = document.createElement("OPTION"); 
							oOption.text="--Select--"; 
							oOption.value="-1"; 
							document.getElementById("cmbTaxHead").add(oOption); 
							var itOption = document.createElement("OPTION");
							itOption.text="Income Tax"; 
							itOption.value="IT"; 
							document.getElementById("cmbTaxHead").add(itOption);
						}
						// ADDED by Mingu and Ruth for pin with no obligation :: end
						document.getElementById('hidPinNo').value=pin;
						document.getElementById('hidAccMonth').value=data.accMonth;
						document.getElementById('hidEmailId').value=data.emailId;
						document.getElementById('email').readOnly=true;
						document.getElementById('email').className='readonlyInput form101_textfcurr_width';
						document.getElementById('txtFirstName').readOnly=true;	
						document.getElementById('taxPayerFullAddr').readOnly=true;	
						document.getElementById('taxPayerFullAddr').className='readonlyInput form101_textfcurr_width ';
						document.getElementById('txtFirstName').className='readonlyInput form101_textfcurr_width ';
						hidShowTextAreaCounter('taxPayerFullAddrDiv',0);
						document.getElementById('email').value=data.emailId;
						dwr.util.setValue('taxPayerFullAddr',data.taxPayerFullAddr);
						//Added for Ticket 61107 
						removeQuotes();
						//Added for Ticket 61107
						document.getElementById('currServerDate').value=data.fromDate;
						document.getElementById('nssfEffDate').value =data.nssfEffDate;
						document.getElementById('isMigrated').value =data.isMigrated;
						document.getElementById('taxPayerRegWith').value =data.taxPayerRegWith;
						document.getElementById('rentIncomeWithEffectiveDate').value =data.rentIncomeWithEffectiveDate;
						/*
						This is used to fill map of obligations for different tax head 
						 */

						var allMapKey;
						var allMapValue;
						for (var i=0; i < data.allObligationsMapList.length; i++){
							allMapKey=data.allObligationsMapList[i].key;
							allMapValue=data.allObligationsMapList[i].value;
							AllObligationsMap[allMapKey] = allMapValue;
						}
						var allMapKeyWithStatus;
						var allMapValueWithStatus;
						for (var i=0; i < data.allObligationsMapWithStatusList.length; i++){
							allMapKeyWithStatus=data.allObligationsMapWithStatusList[i].key;
							allMapValueWithStatus=data.allObligationsMapWithStatusList[i].value;
							AllObligationsWithStatusMap[allMapKeyWithStatus] = allMapValueWithStatus;
							//Added to check if the vat registration is not cancelled for PT
							if((allMapKeyWithStatus=="9")  && (allMapValueWithStatus.includes("CAN") || allMapValueWithStatus.includes("CANF"))){
								isVATRegCancelled=true;
								
							}
						}
						//Added to check if the ITR/ITNR reg is cancelled for PT Validation :Start
						for (var i=0; i < data.allObligationsMapWithStatusList.length; i++){
							
							allMapKeyWithStatus=data.allObligationsMapWithStatusList[i].key;
							allMapValueWithStatus=data.allObligationsMapWithStatusList[i].value;

							if((allMapKeyWithStatus=="2"|| allMapKeyWithStatus=="3") && allMapValueWithStatus.includes("REG")){
								isITRegCancelled=false;
								break;
							}
							else if((allMapKeyWithStatus=="2"|| allMapKeyWithStatus=="3") && (allMapValueWithStatus.includes("CAN") || allMapValueWithStatus.includes("CANF"))){
								isITRegCancelled=true;
							}
							
							
						}

						//Added to check if the ITR/ITNR reg is cancelled for PT Validation :End
						var itMapKey;
						var itMapValue;
						for (var i=0; i < data.itObligationsMapList.length; i++){
							itMapKey=data.itObligationsMapList[i].key;
							itMapValue=data.itObligationsMapList[i].value;
							if(itMapValue.includes("0101") || itMapValue.includes("0102") || itMapValue.includes("0107")){
								isItrReg=true;
							}
							ITObligationsMap[itMapKey] = itMapValue;
						}

						var vatMapKey;
						var vatMapValue;
						for (var i=0; i < data.vatObligationsMapList.length; i++){
							vatMapKey=data.vatObligationsMapList[i].key;
							vatMapValue=data.vatObligationsMapList[i].value;
							if(vatMapValue.includes("0201") && !isVATRegCancelled){
								isVATReg=true;
							}
							VATObligationsMap[vatMapKey] = vatMapValue;
						}

						var exciseMapKey;
						var exciseMapValue;
						for (var i=0; i < data.exciseObligationsMapList.length; i++){
							exciseMapKey=data.exciseObligationsMapList[i].key;
							exciseMapValue=data.exciseObligationsMapList[i].value;
							ExciseObligationsMap[exciseMapKey] = exciseMapValue;
						}

						var agencyMapKey;
						var agencyMapValue;
						for (var i=0; i < data.agencyObligationsMapList.length; i++){
							agencyMapKey=data.agencyObligationsMapList[i].key;
							agencyMapValue=data.agencyObligationsMapList[i].value;
							AgencyObligationsMap[agencyMapKey] = agencyMapValue;
						}

						var ntrMapKey;
						var ntrMapValue;
						for (var i=0; i < data.ntrObligationsMapList.length; i++){
							ntrMapKey=data.ntrObligationsMapList[i].key;
							ntrMapValue=data.ntrObligationsMapList[i].value;
							NTRObligationsMap[ntrMapKey] = ntrMapValue;
						}

						var otherMapKey;
						var otherMapValue;
						for (var i=0; i < data.otherObligationsMapList.length; i++){
							otherMapKey=data.otherObligationsMapList[i].key;
							otherMapValue=data.otherObligationsMapList[i].value;
							OtherObligationsMap[otherMapKey] = otherMapValue;
						}

						/* this code is used for obligation lise with effective registration date*/
						var mapKey;
						var mapValue;
						for (var i=0; i < data.obligListWithIdAndEffectiveDt.length; i++){
							mapKey=data.obligListWithIdAndEffectiveDt[i].key;
							mapValue=data.obligListWithIdAndEffectiveDt[i].value;
							obligMap[mapKey] = mapValue;
						}

						dwr.util.removeAllOptions('cmbSpecOblig');
						if(document.getElementById('hidAuthAgentFlow').value == "y"){
							setTaxHeadAndSubHeadForTaxTypeSpecificUser();
							//setvalidObligationForAgent();
						}
						for(var i=0;i<data.obligationName.length;i++){
							if(data.obligationName[i].key == document.getElementById('hidObligationId').value){
								document.getElementById('hidTaxType').value= data.obligationName[i].value;
							}
						}
					}
				}
				else if(data.isAgent == "YES"){
					alert(invalidTpForAgent);
					clearFormWithoutWarning();

				}
				else{
					alert(invalidPin);
					clearFormWithoutWarning();
				}
			}
			else if(data == 'null' || data == null){ //if any how returened data is null
				clearFormWithoutWarning();
				document.getElementById('txtPin').focus();
				if(document.getElementById('isWithoutLogin').value=="Y" ||document.getElementById('isWithoutLogin').value=="y"){
					if(document.getElementById('cmbPaymentType')!=null)
						document.getElementById('cmbPaymentType').disabled=false;
				}
				else{
					if(document.getElementById('cmbPaymentType')!=null)
						document.getElementById('cmbPaymentType').disabled=true;
				}
				//alert("Please enter valid PIN");
				alert(errFetchingData);
				return false;
			}
		}
		});
		return true;
	}
	else{//if PIN format is not valid
		//	alert("Please enter valid PIN");
		clearFormWithoutWarning();
		return false;
	}
}
/* Added by Mingu and Kirui for Ticket 61107 :: START */
function removeQuotes(){
	var taxPayerFullAddr = document.getElementById("taxPayerFullAddr").value;
	taxPayerFullAddr = taxPayerFullAddr.replace(/["']/g,"");
	document.getElementById("taxPayerFullAddr").value = taxPayerFullAddr;
	//added by Mingu to remove quotes from firstName and Email :: START
	var txtFirstName = document.getElementById("txtFirstName").value;
	txtFirstName = txtFirstName.replace(/["']/g,"");
	document.getElementById("txtFirstName").value = txtFirstName;
	//added by Mingu to remove quotes from firstName and Email :: END
}
/* Added by Mingu and Kirui for Ticket 61107 :: START */

function setvalidObligationForAgent()
{
	var authObligId=document.getElementById("hidAuthAgentObligId").value;
	tempObligType=new Array();
	tempObligId=new Array();
	var j=0;
	for(var i=0;i<document.getElementById("cmbTaxType").options.length;i++)
	{
		if(authObligId==document.getElementById('cmbTaxType').options[i].value)
		{
			tempObligType[j]=document.getElementById('cmbTaxType').options[i].text;
			tempObligId[j]=document.getElementById('cmbTaxType').options[i].value;
			j=j+1;
		}
	}
	var taxTypeOpt=document.getElementById("cmbTaxType");
	var option=document.createElement("option");
	taxTypeOpt.options.length=0;
	option.text='--Select--';
	option.value='-1';
	try 
	{
		taxTypeOpt.add(option, null);
	}
	catch(error) 
	{
		taxTypeOpt.add(option);
	}
	for(var i=0;i<j;i++)
	{
		var taxTypeOpt=document.getElementById("cmbTaxType");
		var option=document.createElement("option");
		option.text=tempObligType[i];
		option.value=tempObligId[i];
		try 
		{
			taxTypeOpt.add(option, null);
		}
		catch(error) 
		{
			taxTypeOpt.add(option);
		}
	}
	document.getElementById('rdoTaxHead2').style.display='none';	
	document.getElementById('otrLabel').style.display='none';	

	document.getElementById('rdoTaxHead3').style.display='none';	
	document.getElementById('ntrLabel').style.display='none';

	return true;
}

function onClickTab(obj)
{
	if(obj.id=="approvalTab5")
	{
		{
			document.getElementById('btnTbl').style.display="none";
			return true;
		}
	}
	if(obj.id=="approvalTab1")
	{
		{
			document.getElementById('btnTbl').style.display="";
			return true;
		}
	}

}



function fetchTaxpayerDetailForReturn(byPassFlag,pin,taxPeriodFrom,taxPeriodTo,taxPeriod,obligationId,bankCd){
	if(validatePIN(pin)){
		var logedInPin=trim(document.getElementById('hidLogedInPinNo').value,'');
		//FetchTaxpayerDetailWithoutValidation.fetchTaxpayerDetailWithoutValidation(pin ,{ async: false, callback: function(data){
		FetchTaxPayerDetail.fetchTaxPayerDetail(pin,pin,{async:false,callback: function(data){
			if(data != NULL &&  data != null){
				if(data.isAgent == "ERROR" ||data.isAgent == "NO_CALL"){ // Handled Scenario : 1) if no call made from Controller to impl 2) impl to facade
					alert(errFetchingData);
					return false;
				}
				else if(data.isAgent == "AGENT_ERROR"){// Handled Scenario : 1) No call made to validate taxpayer with agent 2) or got exception in same scenario
					alert(errValidatingTpLoggedInAgent);
					return false;
				}
				else if(data.isAgent == "INVALID_TP"){// Handled Scenario : 1) Invalid taxpayer while agnet login
					alert(invalidTpForAgent);
					return false;
				}
				else if(data.isAgent == "NDF"){// Handled Scenario : 1) call made to facade with invalid PIN
					alert(invalidPin);
					return false;
				}

				//start 
				if(data.isAgent == "NO"){
					if(data.taxPayerFirstName != null || data.taxPayerId != null){
						document.getElementById('cmbPaymentType').disabled=false;
						document.getElementById('txtPin').value= pin;
						document.getElementById('hidEffectiveDt').value=data.effectiveDate;
						document.getElementById('txtFirstName').value=data.taxPayerFirstName;					
						document.getElementById('hidTaxPayerId').value=data.taxPayerId;
						document.getElementById('mobileNumber').value=data.mobileNumber;
						document.getElementById('hidPinNo').value=pin;
						document.getElementById('hidAccMonth').value=data.accMonth;
						document.getElementById('hidEmailId').value=data.emailId;
						document.getElementById('email').readOnly=true;
						document.getElementById('email').className='readonlyInput form101_textfcurr_width';
						document.getElementById('txtFirstName').readOnly=true;	
						document.getElementById('taxPayerFullAddr').readOnly=true;	
						document.getElementById('taxPayerFullAddr').className='readonlyInput form101_textfcurr_width ';
						document.getElementById('txtFirstName').className='readonlyInput form101_textfcurr_width ';
						hidShowTextAreaCounter('taxPayerFullAddrDiv',0);
						document.getElementById('email').value=data.emailId;
						dwr.util.setValue('taxPayerFullAddr',data.taxPayerFullAddr);
						document.getElementById('currServerDate').value=data.fromDate;
						/*
						This is used to fill map of obligations for different tax head 
						 */
						var itMapKey;
						var itMapValue;
						for (var i=0; i < data.itObligationsMapList.length; i++){
							itMapKey=data.itObligationsMapList[i].key;
							itMapValue=data.itObligationsMapList[i].value;
							ITObligationsMap[itMapKey] = itMapValue;
						}

						var vatMapKey;
						var vatMapValue;
						for (var i=0; i < data.vatObligationsMapList.length; i++){
							vatMapKey=data.vatObligationsMapList[i].key;
							vatMapValue=data.vatObligationsMapList[i].value;
							VATObligationsMap[vatMapKey] = vatMapValue;
						}

						var exciseMapKey;
						var exciseMapValue;
						for (var i=0; i < data.exciseObligationsMapList.length; i++){
							exciseMapKey=data.exciseObligationsMapList[i].key;
							exciseMapValue=data.exciseObligationsMapList[i].value;
							ExciseObligationsMap[exciseMapKey] = exciseMapValue;
						}

						var agencyMapKey;
						var agencyMapValue;
						for (var i=0; i < data.agencyObligationsMapList.length; i++){
							agencyMapKey=data.agencyObligationsMapList[i].key;
							agencyMapValue=data.agencyObligationsMapList[i].value;
							AgencyObligationsMap[agencyMapKey] = agencyMapValue;
						}

						var ntrMapKey;
						var ntrMapValue;
						for (var i=0; i < data.ntrObligationsMapList.length; i++){
							ntrMapKey=data.ntrObligationsMapList[i].key;
							ntrMapValue=data.ntrObligationsMapList[i].value;
							NTRObligationsMap[ntrMapKey] = ntrMapValue;
						}

						var otherMapKey;
						var otherMapValue;
						for (var i=0; i < data.otherObligationsMapList.length; i++){
							otherMapKey=data.otherObligationsMapList[i].key;
							otherMapValue=data.otherObligationsMapList[i].value;
							OtherObligationsMap[otherMapKey] = otherMapValue;
						}

						/* this code is used for obligation lise with effective registration date*/
						var mapKey;
						var mapValue;
						for (var i=0; i < data.obligListWithIdAndEffectiveDt.length; i++){
							mapKey=data.obligListWithIdAndEffectiveDt[i].key;
							mapValue=data.obligListWithIdAndEffectiveDt[i].value;
							obligMap[mapKey] = mapValue;
						}

						dwr.util.removeAllOptions('cmbSpecOblig');
						if(document.getElementById('hidAuthAgentFlow').value == "y"){
							setvalidObligationForAgent();
						}
						for(var i=0;i<data.obligationName.length;i++){
							if(data.obligationName[i].key == document.getElementById('hidObligationId').value){
								document.getElementById('hidTaxType').value= data.obligationName[i].value;
							}
						}
					}
				}
				else if(data.isAgent == "YES"){
					alert(invalidTpForAgent);
					clearFormWithoutWarning();

				}
				else{
					alert(invalidPin);
					clearFormWithoutWarning();
				}
			}
			else if(data == 'null' || data == null){ //if any how returened data is null
				clearFormWithoutWarning();
				document.getElementById('txtPin').focus();
				if(document.getElementById('isWithoutLogin').value=="Y" ||document.getElementById('isWithoutLogin').value=="y"){
					document.getElementById('cmbPaymentType').disabled=false;
				}
				else{
					document.getElementById('cmbPaymentType').disabled=true;
				}
				//alert("Please enter valid PIN");
				alert(errFetchingData);
				return false;
			}
		}});
		return true;

	}
	else{//if PIN format is not valid
		return false;
	}
}
function setDataFromPaymentRegForm(byPassFlag,pin,taxPeriodFrom,taxPeriodTo,taxPeriod,obligationId,bankCd,taxHeadFromRturn){


	fetchTaxpayerDetailForReturn(byPassFlag,pin,taxPeriodFrom,taxPeriodTo,taxPeriod,obligationId,bankCd);
	onChangeCmbTaxHead(document.getElementById("cmbTaxHead"));

	document.getElementById('cmbTaxSubHead').value=obligationId;

	onChangeCmbSubTaxHead(document.getElementById('cmbTaxSubHead'));
	document.getElementById('hidByPassFlag').value=byPassFlag;
	document.getElementById('hidTaxPeriod').value=taxPeriod;

	document.getElementById('cmbPaymentMode').value=cheque;
	document.getElementById("hidObligationType").value=TAX;
	document.getElementById('hidPaymentType').value=SAT;
	document.getElementById('cmbBankName').value=bankCd;

	document.getElementById('noTaxPeriodTd').style.display = 'none';
	document.getElementById('noTaxPeriodTd1').style.display = 'none';
	document.getElementById('CmbTaxPeriodTd').style.display = '';

	document.getElementById('cmbPaymentType').value="SAT";
	onChngCmbPmtType(document.getElementById('cmbPaymentType'));


	document.getElementById('paymentTaxObligForm').style.display='';
	document.getElementById('paymentRegSpecObligationForm').style.display='none';
	document.getElementById('paymentRegNTRForm').style.display='none';
	document.getElementById('btnTbl').style.display='';
	document.getElementById('totalAmountPaidFieldSet').style.display='';	

	if(obligationId==VATCode||obligationId==exciseTaxOblCode||obligationId==payeeCode){

		var dateArr = taxPeriodFrom.split('/');
		var year = dateArr[2];	
		document.getElementById('cmbTaxPeriodYear').value = year;
		getSelectedMonthOfSelectedYearWeb('cmbTaxPeriodYear','cmbTaxPeriodMonth','false');
		document.getElementById('cmbTaxPeriod').value = taxPeriod;
	}
	else{
		document.getElementById('tdCmbTaxPeriodYear').style.display = 'none';
		document.getElementById('cmbTaxPeriod').value = taxPeriod;
	}

	if(fetchObligationDTL(taxPeriod)){
		//	alert("Dear Taxpayer, defaultly your transaction will be done through Cash/Cheque and Receiving Bank is Central Bank of Kenya.\n If u wish, you can change your Mode of Payment/Receiving Bank from Taxpayer Info screen.");
		return true;
	}
}

function onChageTabClearTaxOblig()
{
	document.getElementById('ObligationDetailFieldSet').style.display='none'; 
	document.getElementById('navigationTable').style.display='none';
	document.getElementById('navigationTableTaxSpl').style.display='none'; 
	document.getElementById('LiablibilityTbl').style.display='none';
	document.getElementById('cmbTaxPeriod').options.length=1;
	document.getElementById('paymentRegTransmissionTaxFieldSet').style.display ='none';
	document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
	//Added for DAT - 11/2023
	document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
	document.getElementById('paymentRegVISFieldSet').style.display='none';
	//Added for VIS payment cancelletion :: 66743
	document.getElementById('pmtCanclVIS').style.display="none";
	document.getElementById('chooseExcelPaymentMethod1').style.display="none";
	//END
	document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
	document.getElementById('paymentRegWithholdeeSet').style.display='none';
	document.getElementById('TotalTaxFieldSet').style.display='none';
	document.getElementById('disclaimerFieldSet').style.display='none';
	document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
	document.getElementById('paymentRegVISFieldSet').style.display='none';
	document.getElementById('paymentRegWithholdeeSet').style.display='none';
	document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
	document.getElementById('TotalTaxFieldSet').style.display='none';
	document.getElementById('navigationFieldset').style.display='none';
	document.getElementById("txtTotalAmountPaidOblig").value=0;  
	document.getElementById("txtTotalAmountPaidOblig").readOnly=true;
	document.getElementById('txtTotalAmountPaidOblig').className='readonlyInput form101_textfcurr_width textonlyRight';
	document.getElementById('txtWithholdeePinTransmissionTax').value="";
	document.getElementById('txtwithholdeeNameTransmissionTax').value="";
	document.getElementById('taxwithholdeeAddressTransmissionTax').value="";
	document.getElementById('txtTelephoneNoTransmissionTax').value="";
	clear_table_data("transmissionTaxTable");
	clear_table_data("withholdeeFormTable");
	clear_table_data("shippingTaxTable");
	clear_table_data("vatOnImpTable");
	clear_table_data("taxObligationTable");
	clear_table_data("rentIncomeWithholdeeWebFormTable");
	clear_table_data("rentIncomeWithTable");
	selectedFlagTaxOblig=0;
	selectedFlagShipping=0 ;
	selectedFlagNSSF=0;
	selectedFlagCable=0;
	selectedFlagVis=0;
	selectedFlagWithHoldee=0;
	selectedFlagRentIncomeWithHoldee=0;
	selectedFlagVatWithHoldee=0;
	document.getElementById("checkDisclaimer").checked=false;
	resetErrorList();
	hideTab('TabView',2);
	incError=0;	
}
function validateUserDtls(id)
{
	var rtnFlag;
	rtnFlag=validateFormFieldOnEvent(id,bankNameJson,paymentRegDetailsOblJson,paymentRegPmtTtypeJson);
	getErrTabToggle('TabView','2');	
	if(!rtnFlag)
	{
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
	}
	return rtnFlag;	
}
function validateTaxHead(id)
{
	var rtnFlag;
	rtnFlag=validateFormFieldOnEvent(id,taxHeadJson);
	getErrTabToggle('TabView','2');	
	if(!rtnFlag)
	{
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
	}
	return rtnFlag;	
}
function validateTaxSubHead(id)
{
	var rtnFlag;
	rtnFlag=validateFormFieldOnEvent(id,paymentRegTaxDetailsJson);
	getErrTabToggle('TabView','2');	
	if(!rtnFlag)
	{
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
	}
	return rtnFlag;	
}

//Added on 13/09/2024 to sort RENT WHT Issue.
//Allow generation of interest or penalty only or principal only not both
function clearTxtTotalAmountPaidOblig(){
		//clear_table_data('rentIncomeWithholdeeWebFormTable');
		//clear_table_data('rentIncomeWithWebFormLiablibilityTbl');
		document.getElementById('txtTotalAmountPaidOblig').value="0";
}
//End 13/09/2024

function validatePaymentType(id)
{
	var rtnFlag;
	rtnFlag=validateFormFieldOnEvent(id,paymentRegPmtTtypeJson);
	getErrTabToggle('TabView','2');	
	if(!rtnFlag)
	{
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
	}
	return rtnFlag;	
}
function validatePaymentModeDtls(id)
{
	var rtnFlag;
	rtnFlag=validateFormFieldOnEvent(id,paymentModeJson);
	getErrTabToggle('TabView','2');	
	if(!rtnFlag)
	{
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
	}
	return rtnFlag;	
}
function onchangeCmbPaymentMode(obj){
	var modeOfPayment = obj.value;
	if(modeOfPayment == "-1")
	{
		alert(payMode);
		document.getElementById('paymentRTGSFieldSet').style.display='none';
		document.getElementById('cmbBankName').style.display=''; 
		document.getElementById('bankNameLabel').style.display=''; 
		return false;
	}
	else if(modeOfPayment == cheque)
	{
		document.getElementById('hidIsRTGS').value="N";
		document.getElementById('paymentRTGSFieldSet').style.display='none';
		document.getElementById('cmbBankName').style.display=''; 
		document.getElementById('bankNameLabel').style.display=''; 
		hideTab('TabView',2);
		resetErrorList();
		incError=0;
	}
	else if(modeOfPayment == cash)
	{
		document.getElementById('hidIsRTGS').value="N";
		document.getElementById('paymentRTGSFieldSet').style.display='none';
		document.getElementById('cmbBankName').style.display=''; 
		document.getElementById('bankNameLabel').style.display=''; 
		hideTab('TabView',2);
		resetErrorList();
		incError=0;
	}
	else if(modeOfPayment == RTGS )
	{
		document.getElementById('hidIsRTGS').value="Y";
		document.getElementById('paymentRTGSFieldSet').style.display='';
		document.getElementById('cmbBankName').style.display='none'; 
		document.getElementById('bankNameLabel').style.display='none';
		document.getElementById('cmbBankName').selectedIndex=0; 
		document.getElementById('beneBankNameRTGS').disabled=false;
		hideTab('TabView',2);
		resetErrorList();
		incError=0;
	}
	else
	{
		document.getElementById('hidIsRTGS').value="N";
		document.getElementById('paymentRTGSFieldSet').style.display='none';
		document.getElementById('cmbBankName').style.display=''; 
		document.getElementById('bankNameLabel').style.display=''; 
		hideTab('TabView',2);
		resetErrorList();
		incError=0;
	}
}
function savePaymentDetails()
{
	resetErrorList();
	if(isModifyActive==true){
		alert("Please complete modify action first");
		return false;
	}
//	if(document.getElementById('cmbTaxHead').value==VAT )
//	{
//	if(document.getElementById('cmbTaxSubHead').value== VatWithholding)
//		{
//			return true;
//		}
//	} 	
	if((document.getElementById('isWithoutLogin').value=="Y" ||document.getElementById('isWithoutLogin').value=="y")&& (document.getElementById('cmbTaxHead').value==AGENCY_NOTICE))
	{
		if(	!validateFormFields(paymentRegEmailDetailsOblJson,taxHeadJson,paymentRegPmtTtypeJson,paymentModeJson,bankNameJson))
		{
			getErrTabToggle('TabView','2');	
			tabview_switch('TabView', '2');
			hideAndShowTable("errorDiv");
			document.getElementById('btnTbl').style.display="none";
			return false;
		}
	}
	else
	{
		if(document.getElementById('isCountyPmt').value=='Yes' || document.getElementById('isCountyPmt').value=='Y'){
			return true;
		}
		if(document.getElementById('paymentiTaxPriorAdditionalAssmntForm').style.display=='')
		{
			var tableObj = document.getElementById('iTaxPriorAssmntTable');
			var rowCount=tableObj.rows.length;
			var flagForAssmnt=0;
			if(rowCount>1)
			{
				for(var i = 1, n = tableObj.rows.length; i <n; i++) 
				{
					if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted'){
						if (document.all) {// for IE
							flagForAssmnt=1;
						}
						else{
							flagForAssmnt=1;
						}
					}

				}
			}
			if(flagForAssmnt==0)
			{
				if(!validateFormFields(taxHeadJson,iTaxPriorAssmntJson,paymentModeJson,bankNameJson))
				{
					getErrTabToggle('TabView','2');	
					tabview_switch('TabView', '2');
					hideAndShowTable("errorDiv");
					document.getElementById('btnTbl').style.display="none";
					return false;
				}
			}	
			else
			{
				if(!validateFormFields(taxHeadJson,paymentModeJson,bankNameJson))
				{
					getErrTabToggle('TabView','2');	
					tabview_switch('TabView', '2');
					hideAndShowTable("errorDiv");
					document.getElementById('btnTbl').style.display="none";
					return false;
				}
			}
		}
		else
		{
			if(!validateFormFields(paymentRegDetailsOblJson,paymentRegPmtTtypeJson,paymentModeJson,bankNameJson))
			{
				getErrTabToggle('TabView','2');	
				tabview_switch('TabView', '2');
				hideAndShowTable("errorDiv");
				document.getElementById('btnTbl').style.display="none";
				return false;
			}
		}
	}
	if(!validateFormFields(bankNameJson))
	{
		getErrTabToggle('TabView','2');	
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
		return false;
	}

	else
	{
		if(document.getElementById('cmbPaymentMode').value==RTGS)
		{
			resetErrorList();
			if(!validateFormFields(RTGSJson))
			{
				getErrTabToggle('TabView','2');	
				tabview_switch('TabView', '2');
				hideAndShowTable("errorDiv");
				document.getElementById('btnTbl').style.display="none";
				return false;				
			}
			if(trim(document.getElementById('swiftCodeRTGS').value)!="" ){
				if(trim(document.getElementById('interBankRTGS').value)=="" ){
					alert(interBankForTrans);
					return false;
				}
			}
			if(trim(document.getElementById('interBankRTGS').value)!="" ){
				if(trim(document.getElementById('swiftCodeRTGS').value)=="" ){
					alert(swiftCodeForTrans);
					return false;
				}
			}
		}
	}
	if(isWithoutLogin == "Y" || isWithoutLogin =="y")
	{
		validateCaptcha = validateCaptchaForPayment("captcahText_taxObl","captcha_img_taxObl");//this method returns true according to right captcha validation
		return validateCaptcha;
	}
	else
	{
		validateCaptcha = true;// for inside login captcha validation is not required so it is set true explicitly  (&& validateCaptcha)
		return validateCaptcha;
	}
	
	//changes done for iTax Prior Assmnt
	if(document.getElementById('paymentiTaxPriorAdditionalAssmntForm').style.display=='')
	{
		var tableObj = document.getElementById('iTaxPriorAssmntTable');
		var rowCount=tableObj.rows.length;
		var flagForAssmnt=0;
		if(rowCount>1)
		{
			for(var i = 1, n = tableObj.rows.length; i <n; i++) 
			{
				if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted'){
					if (document.all) {// for IE
						flagForAssmnt=1;
					}
					else{
						flagForAssmnt=1;
					}
				}

			}
		}
		if(flagForAssmnt==0)
		{
			if(!validateFormFields(iTaxPriorAssmntJson))
			{
				getErrTabToggle('TabView','2');	
				tabview_switch('TabView', '2');
				hideAndShowTable("errorDiv");
				document.getElementById('btnTbl').style.display="none";
				return false;
			}
		}
	}
	//end
	
	
}
	function submitPaymentForm()
	{
		if(document.getElementById('isCountyPmt')!=null && (document.getElementById('isCountyPmt').value=='Yes' || document.getElementById('isCountyPmt').value=='Y' )){// Added by sanidhya for County revenue
			if(document.getElementById('countySubHeadRevenueStream').value=="LL")
				{
				var obligation="LL";
				submitCountyForm(obligation);
		 		}else if(document.getElementById('countySubHeadRevenueStream').value=="SBP")
		 			{
		 			var obligation="SBP";
		 			submitCountyForm(obligation);
		 			}
				
		}
		/*//By Miral For CGT :: START 
		else if(document.getElementById('cmbPaymentType').value==EAT && document.getElementById('cmbTaxHead').value==IT && document.getElementById('cmbTaxSubHead').value==CGT)
			{
				document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
				document.paymentRegForm.submit();
			}
		//By Miral For CGT :: END
*/		
		/*65215*/
		//else if(document.getElementById('cmbPaymentType').value==SAT || document.getElementById('cmbPaymentType').value==VTDP)
		else if(document.getElementById('cmbPaymentType').value==SAT || document.getElementById('cmbPaymentType').value==VTDP
				/*65215 added for NITA arrears payments*/|| document.getElementById('cmbPaymentType').value==NITAR
				/*70023 added for AHL penalty payments*/|| document.getElementById('cmbPaymentType').value==PEN
				|| document.getElementById('cmbPaymentType').value==LEGDBT)
			
		{
			if(document.getElementById('cmbTaxHead').value==TAX)
			{
				savePaymentDetailOblig();
					
			}
			
			if(document.getElementById('cmbTaxHead').value=='VATWitholding' && document.getElementById('cmbPaymentType').value!=VTDP)
			{
				saveVatWitholdingDetailOblig();
				return true;
			}
			if(document.getElementById('cmbTaxHead').value==VAT)
				{
					if(document.getElementById('cmbTaxSubHead').value==VatWithholding && document.getElementById('cmbPaymentType').value!=VTDP)
						{
						saveVatWitholdingDetailOblig();
						return true;
						}
				
				}
			
			//changes done for Enhancement 1
			if(document.getElementById('cmbTaxHead').value==IT)
				{
					if(document.getElementById('cmbTaxSubHead').value==advanceObligationId && document.getElementById('cmbPaymentType').value!=VTDP)
						{
						if(document.getElementById('specOblAdvPmtTypeRadio1').checked == true
								&& document.getElementById('specOblAdvPmtTypeRadio2').checked == false)
						{
							saveAdvTaxDetailOblig();
							return true;
						}
						}
				
				}
			
			//end
			if(document.getElementById('cmbTaxHead').value==IT || document.getElementById('cmbTaxHead').value==VAT || document.getElementById('cmbTaxHead').value==EXCISE || (document.getElementById('cmbTaxHead').value==AGENCY_REVENUE && document.getElementById('cmbTaxSubHead').value==NSSF))
			{
				//changes done for Enhancement 1
				if(document.getElementById('cmbTaxSubHead').value==advanceObligationId && document.getElementById('cmbPaymentType').value!=VTDP)
				{
					if(document.getElementById('specOblAdvPmtTypeRadio2').checked == true
							&& document.getElementById('specOblAdvPmtTypeRadio1').checked == false)
						{savePaymentDetailOTR();}
						
				}
				else if(document.getElementById('cmbTaxSubHead').value==foreignAmnestyObligId)
				{
					savePaymentDetailForeignAmnesty();
					
				}
				else if(document.getElementById('cmbTaxSubHead').value==exciseObligationId)
				{
					savePaymentDetailNTR();
						
				}
				//changes done for CR Rent Income Withholding
				else if(document.getElementById('cmbTaxSubHead').value==rentIncomeWith)
				{
					saveRentIncomeWithPaymentOblig();
				}
				//end
				//CR CGT
				else if(document.getElementById('cmbTaxSubHead').value==CGT && (document.getElementById('specOblCGTPmtTypeRadio2').value=="n" || document.getElementById('specOblCGTPmtTypeRadio1').value=="e" ) && document.getElementById('cmbPaymentType').value!=VTDP)//&& cond added by miral for not calling this method in case of interest pay Reg 
				{
					saveCGTPaymentOblig();
				}
				
				//END
				
				else if(document.getElementById("specOblCGTPmtTypeRadio3").value=="IPREG" && document.getElementById('cmbPaymentType').value!="VTDP")//added By miral for interest pay Reg
				{	
					document.getElementById('hidCgtType').value=document.getElementById('cmbCGTType').value;
					document.getElementById('isIntPayReg').value=document.getElementById("specOblCGTPmtTypeRadio3").value;
					var tabObj2 = document.getElementById("cgtInterestTable");
					var count2=0;
					for (var i = 1, n = tabObj2.rows.length; i <n; i++) 
					{ 
						var modify;
						modify=trim(tabObj2.rows[i].cells[2].innerText);
						if((trim(document.getElementById('id_temp_'+'cgtInterestTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify")) {
							count2++;
						}
					}
					if(count2<=0) {
						alert("Please enter Interest details.");
						return false;
					}
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.paymentRegForm.submit();
						
				}
				
				else if(document.getElementById("specOblCGTPmtTypeRadio4").value=="PPREG" && document.getElementById('cmbPaymentType').value!=VTDP)//added  for Penalty pay Reg
				{	
					document.getElementById('hidCgtType').value=document.getElementById('cmbCGTType').value;
					document.getElementById('isPenPayReg').value=document.getElementById("specOblCGTPmtTypeRadio4").value;
					document.getElementById('txtTotalAmountPaidOblig').value=removeCommaFrmInput(document.getElementById("total_cgtPenaltyTable_6").value);
					if(document.getElementById('txtTotalAmountPaidOblig').value<=0){
						alert("Amount to be paid should be greater than 0.");
						return false;
					}
					var tabObj2 = document.getElementById("cgtPenaltyTable");
					var count2=0;
					for (var i = 1, n = tabObj2.rows.length; i <n; i++) 
					{ 
						var modify;
						modify=trim(tabObj2.rows[i].cells[2].innerText);
						if((trim(document.getElementById('id_temp_'+'cgtPenaltyTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify")) {
							count2++;
						}
					}
					if(count2<=0) {
						alert("Please enter penalty details.");
						return false;
					}
					if(saveConfirm()){
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.paymentRegForm.submit();
					}
						
				}
				//end
				
				//PT CR
				else if(document.getElementById('cmbTaxSubHead').value==PT)
				{	
					if(document.getElementById("isPtAmended").value!=null && document.getElementById("isPtAmended").value=="true"  ){
					checkIfReconsiledForPT();
					}else if(document.getElementById("isPtAmended").value!=null && document.getElementById("isPtAmended").value=="false" ){
						savePTPaymentOblig();
					}else{
						return false;
					}
						
				}
				//end
				
				else if(document.getElementById('cmbTaxSubHead').value==44)
				{	
					saveDSTPaymentOblig();
				}
				//Added for SEP #81171
				else if(document.getElementById('cmbTaxSubHead').value==47)
				{	
					saveSEPPaymentOblig();
				}
				//Added for SEP #81171
				
				//Added for DAT - 11/2023
				else if(document.getElementById('cmbTaxSubHead').value==45)
				{	
					saveDATPaymentOblig();
				}
				else
				{
					savePaymentDetailOblig();
						
				}
			}
			else if(document.getElementById('cmbTaxHead').value==NTR)
			{
				savePaymentDetailNTR();
					
			}
			else if(document.getElementById('cmbTaxHead').value==AGENCY_REVENUE)
			{
				if (document.getElementById('cmbTaxSubHead').value==GPBTobligationId)
					{
					if (document.getElementById('cmbGPBTType').value==("-1"))
					{	
						alert ("Select GPBT type");
						return false;
					}
					savePaymentDetailOTR();
					}
				else
				savePaymentDetailOTR();
					
			}
			else if (document.getElementById('cmbTaxHead').value==AGENCY_NOTICE)
			{
				saveAgencyDetails();
					
			}
			else if (document.getElementById('cmbTaxHead').value==AUCTION_NOTICE)
			{
				saveAuctionDetails();
					
			}
			else if (document.getElementById('cmbTaxHead').value==OTHER)
			{
				savePaymentDetailNSSF();
					
			}

		}
		else if(document.getElementById('cmbPaymentType').value==TIP)
		{
			saveTipDetails();
				
		}
		// TODO add for TMT
		else if(document.getElementById('cmbPaymentType').value==TMT)
		{
			saveTmtDetails();
			
		}
		else if(document.getElementById('cmbPaymentType').value==TAP)
		{
			saveTapDetails();
			
		}
		else if (document.getElementById('cmbTaxHead').value==OTHER && document.getElementById("cmbTaxSubHead").value==agencyNotice)
		{
			savePaymentDetailAgencyNotice();
				
		}
		else if(document.getElementById('cmbTaxHead').value==EXCISE && document.getElementById('cmbTaxSubHead').value==importCertificateObligId)
		{
			savePaymentDetailCashBond();
				
		}		
		else if (document.getElementById('cmbTaxHead').value==OTHER)
		{
			savePaymentDetailCashBond();
				
		}
		else if(document.getElementById('cmbTaxHead').value==PPP)
		{
			if(selectFlagPPP>0)
			{
				if(removeCommaFrmInput(document.getElementById('txtTotalAmountPaidPPP').value)>0)
				{
					if(saveConfirm())
					{
						document.getElementById('back').disabled=true;
						document.getElementById('cmdSaveOblig').disabled=true;
						document.getElementById('cmdClearOblig').disabled=true;
						document.getElementById("txtTotalAmountPaidPPP").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidPPP").value);
						document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
						document.paymentRegForm.submit();
					}
					
					
				}
				else
				{
					alert(totalAmtGreaterThenZero);
					return false;
				}
			}
			else
			{
				alert(atleastOneInstallmentDetails);
				return false;
			}
		}
		else if(document.getElementById('cmbPaymentType').value==AAT || document.getElementById('cmbPaymentType').value==EAT){
			if(document.getElementById('forSpecialPayPointPage').value!='true')
			{
			if (removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value) <= 0) {
				alert(totalAmtGreaterThenZero);
				return false;}
			else{
				if (confirm(saveDetails)) {
					document.getElementById('hidPaymentType').value='AAT';
					document.getElementById('back').disabled=true;
					document.getElementById('cmdSaveOblig').disabled=true;
					document.getElementById('cmdClearOblig').disabled=true;
					document.getElementById('txtTotalAmountPaidOblig').value=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.paymentRegForm.submit();
					return true;
				}
			}	
		}else{
			if (removeCommaFrmInput(document.getElementById('total_VATWHTAdditionalAssmntTable_5').value) <= 0) {
				alert(totalAmtGreaterThenZero);
				return false;}
			else{
				if (confirm(saveDetails)) {
					document.getElementById('hidPaymentType').value='AAT';
					document.getElementById('hidObligationType').value='TAX';
					document.getElementById('hidObligationId').value='29';
					document.getElementById('back').disabled=true;
					document.getElementById('cmdSaveOblig').disabled=true;
					document.getElementById('cmdClearOblig').disabled=true;
					document.getElementById('total_VATWHTAdditionalAssmntTable_5').value=removeCommaFrmInput(document.getElementById('total_VATWHTAdditionalAssmntTable_5').value);
					document.VATWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.VATWitholdingPaymentRegForm.submit();
					return true;
				}
			}	
		}	
	}
		//changes done for iTax Prior Assessment
		else if(document.getElementById('hidPaymentType').value==LAT){
			var amtPay=removeCommaFrmInput(document.getElementById('amountPayableiTaxPrior').value);
			var amtPay=parseInt(amtPay);
			var amtPaid=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
			var amtPaid=parseInt(amtPaid);
			if (removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value) <= 0) {
				alert(totalAmtGreaterThenZero);
				return false;
			}
			else if(iTaxModifyFlag==1)
			{
				alert('Please complete modify operation first');
				return false;
			}
			else{
				if (confirm(saveDetails)) {
					if(amtPaid==amtPay)
					{
						document.getElementById('hidIsPartial').value='N';
					}
					document.getElementById('hidPaymentType').value='LAT';
					document.getElementById('hidObligationType').value='TAXOTR';
					document.getElementById('back').disabled=true;
					document.getElementById('cmdSaveOblig').disabled=true;
					document.getElementById('cmdClearOblig').disabled=true;
					document.getElementById('txtTotalAmountPaidOblig').value=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.paymentRegForm.submit();
					return true;
				}
			}	
		}
		//Added by Jaimin in stamp duty for Additional Assessment / Penalty
		else if(document.getElementById('cmbPaymentType').value==AAPT){
			var amtPaid=removeCommaFrmInput(document.getElementById('changeAmount').value);
			var amtPaid=parseInt(amtPaid);
			if (removeCommaFrmInput(document.getElementById('changeAmount').value) <= 0) {
				alert(totalAmtGreaterThenZero);
				return false;
			}else{
				if (confirm(saveDetails)) {
					var obligationId = document.getElementById("obligationId").value;
					var taxPeriodFromDt= document.getElementById("hidObligationFromDate").value;
					var taxPeriodToDt= document.getElementById("hidObligationToDate").value;
					//var bclSplObligationDtlId = document.getElementById("bclSplObligationDtlId").value;
					var changeAmount = document.getElementById("changeAmount").value;
					var  isAdditionalAssessment = document.getElementById("isAdditionalAssessment").value;
					var amountPayable=document.getElementById("changeAmountForAAPT").value;
					var hdrId= document.getElementById("bclSplObligationDtlIdForAAPT").value;
					document.getElementById("changeAmountForAAPT").value=changeAmount;
					document.getElementById("bclSplObligationDtlIdForAAPT").value=hdrId;
					document.getElementById("hidObligationId").value=stampDutyObligationId;
					document.getElementById("obligationId").value= obligationId;
					document.getElementById("hidObligationFromDate").value=taxPeriodFromDt;
					document.getElementById("hidObligationToDate").value=taxPeriodToDt;
					//document.getElementById("bclSplObligationDtlId").value=bclSplObligationDtlId;
					document.getElementById("changeAmount").value=changeAmount;
					document.getElementById('hidPaymentType').value='AAPT';
					document.getElementById('hiddenTotalValue').value=changeAmount;
					document.getElementById('hidObligationType').value='OTR';
					document.getElementById('back').disabled=true;
					document.getElementById('cmdSaveOblig').disabled=true;
					document.getElementById('cmdClearOblig').disabled=true;
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.paymentRegForm.submit();
					return true;
				}
			}
		} 
		//Ended by Jaimin in stamp duty for Additional Assessment / Penalty
		else if(document.getElementById('paymentiTaxPriorAdditionalAssmntForm').style.display=='')
			{

			var tableObj = document.getElementById('iTaxPriorAssmntTable');
			var rowCount=tableObj.rows.length;
			var flagForAssmnt=0;
			if(rowCount>1)
			{
				for(var i = 1, n = tableObj.rows.length; i <n; i++) 
				{
					if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted'){
						if (document.all) {// for IE
							flagForAssmnt=1;
						}
						else{
							flagForAssmnt=1;
						}
					}

				}
			}
			if(flagForAssmnt==0){
				alert("Please enter atleast one detail of iTax Prior Assessment");
				return false;
			}
			}
		
		//end
		/*else if(document.getElementById('cmbPaymentType').value==EAT){
			if(document.getElementById('forSpecialPayPointPage').value!='true')
			{
			if (removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value) <= 0) {
				alert(totalAmtGreaterThenZero);
				return false;}
			else{
				if (confirm(saveDetails)) {
					document.getElementById('back').disabled=true;
					document.getElementById('cmdSaveOblig').disabled=true;
					document.getElementById('cmdClearOblig').disabled=true;
					document.getElementById('txtTotalAmountPaidOblig').value=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.paymentRegForm.submit();
					return true;
				}
			}	
		}else{
			if (removeCommaFrmInput(document.getElementById('total_VATWHTAdditionalAssmntTable_5').value) <= 0) {
				alert(totalAmtGreaterThenZero);
				return false;}
			else{
				if (confirm(saveDetails)) {
					document.getElementById('hidPaymentType').value='AAT';
					document.getElementById('hidObligationType').value='TAX';
					document.getElementById('hidObligationId').value='29';
					document.getElementById('back').disabled=true;
					document.getElementById('cmdSaveOblig').disabled=true;
					document.getElementById('cmdClearOblig').disabled=true;
					document.getElementById('total_VATWHTAdditionalAssmntTable_5').value=removeCommaFrmInput(document.getElementById('total_VATWHTAdditionalAssmntTable_5').value);
					document.VATWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.VATWitholdingPaymentRegForm.submit();
					return true;
				}
			}	
		}	
	}*/
}
function clearDetails()
{
	if(null!=isCountyPmt.value && isCountyPmt.value=='Yes'){
		x = confirm ("Do You want to Clear the Data?");
		if(x)
		{
			resetsingleBusinessPmt();
			resetLandRatesFields();
			document.getElementById("LandRateLeaseHoldDtlset").style.display="none";
			document.getElementById("SBPDtlset").style.display="none";
			document.getElementById('countySubHeadRevenueStream').value='-1';
		}
	}
	else{
	if(document.getElementById('cmbTaxHead').value==IT || document.getElementById('cmbTaxHead').value==VAT || (document.getElementById('cmbTaxHead').value==EXCISE && document.getElementById('cmbTaxSubHead').value!=ExciseLicenseFeeDtl)||(document.getElementById('cmbTaxHead').value==AGENCY_REVENUE && document.getElementById('cmbTaxSubHead').value==NSSF) || document.getElementById('cmbTaxSubHead').value==NSSF)
	{
		
		if(selectedFlagTaxOblig>0 ||selectedFlagShipping>0 ||selectedFlagCable>0 ||selectedFlagVis>0 ||selectedFlagWithHoldee>0 ||selectedFlagInstallment>0||selectedFlagAdvanceTax>0 || selectedFlagNSSF>0 || selectedFlagRentIncomeWith>0)
		{
			var x = confirm (clearDataConfirm);
			if(x)
			{
				clearTaxObligForm('n'); 
				document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
				document.getElementById("CmbTaxPeriodTd").style.display="none";
				document.getElementById("tdCmbTaxPeriodYear").style.display="none";
				document.getElementById("noTaxPeriodTd").style.display="";
				document.getElementById("noTaxPeriodTd1").style.display="";
				document.getElementById("paymentSpecOblRadioForm").style.display="none";
				document.getElementById("incomeType").style.display="none";
				document.getElementById("incomeTypeTd").style.display="none";
			}
			else
			{
				return false;
			}
		}
		else if(document.getElementById('cmbTaxSubHead').value==VatWithholding)
		{
			if(confirm(clearDataConfirm))
				{
					currentPaymentVatWithholding();
					document.getElementById("cmbTaxHead").selectedIndex=0;
					document.getElementById("cmbTaxSubHead").selectedIndex=0;
					document.getElementById('cmbPaymentType').selectedIndex=0;
				}
		}
		else if(document.getElementById('cmbTaxSubHead').value==CGT)
		{
			if(confirm(clearDataConfirm))
				{
				clearTaxObligForm('n');
				document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
				document.getElementById("CmbTaxPeriodTd").style.display="none";
				document.getElementById("tdCmbTaxPeriodYear").style.display="none";
				document.getElementById("noTaxPeriodTd").style.display="";
				document.getElementById("noTaxPeriodTd1").style.display="";
				document.getElementById("paymentSpecOblRadioForm").style.display="none";
				document.getElementById("incomeType").style.display="none";
				document.getElementById("incomeTypeTd").style.display="none";
				document.getElementById("cgtTabViewSet").style.display="none";
				document.getElementById("tdCGTType").style.display="none";
				document.getElementById("tdCGTTypeLbl").style.display="none";
				
				//clear_table_data("cgtTransfereeDtls");
				clear_table_data("cgtIncidentalCostOnTransferDtls");
				clear_table_data("CGT1SecBpaymentsTbl2");
				clear_table_data("CGT2SecBpaymentsTbl1");
				clear_table_data("CGTSecBpaymentsTbl1");
				clear_table_data("CGTSecBpaymentsTbl");
				clear_table_data("CGT2SecBpaymentsTbl2");
				clear_table_data("CGT2PSecBpaymentsTbl1");
				clear_table_data("CGT2PSecBpaymentsTbl");
				clear_table_data("CGT2SecApaymentsTbl");
				clear_table_data("CGT2SecCpaymentsTbl1");

				clear_table_data("CGTSecCpaymentsTbl1");
				clear_table_data("CGT2SecCpaymentsTbl1");
				//clear_table_data("cgt3TransfereeDtls");
								
				//document.getElementById("CGTSecBpaymentsTblTHead").style.display="none";
				//document.getElementById("CGTSecCpaymentsTblTHead").style.display="none";
				//document.getElementById("cgt1PPartnershipDtlsAddrowTable").style.display="none";
				
				}
		}
					
		else
		{
			clearTaxObligForm('y');
			document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
			document.getElementById("CmbTaxPeriodTd").style.display="none";
			document.getElementById("tdCmbTaxPeriodYear").style.display="none";
			document.getElementById("noTaxPeriodTd").style.display="";
			document.getElementById("noTaxPeriodTd1").style.display="";
			document.getElementById("paymentSpecOblRadioForm").style.display="none";
			document.getElementById("incomeType").style.display="none";
			document.getElementById("incomeTypeTd").style.display="none";
			document.getElementById("cgtTabViewSet").style.display="none";
		}
	}
	else if(document.getElementById('cmbTaxHead').value==NTR || document.getElementById('cmbTaxSubHead').value==ExciseLicenseFeeDtl)
	{
		clearFormNtr();
	}
	else	if(document.getElementById('cmbTaxHead').value==AGENCY_REVENUE)
	{
		clearSpecData();
	}
	else if(document.getElementById('cmbTaxHead').value==AGENCY_NOTICE)
	{
		x = confirm ("Do You want to Clear the Data?");
		if(x)
		{
			requiredFieldsAfterCleaer();
			document.getElementById('paymentRegAgencyNoticeSet').style.display ='none';
			document.getElementById('paymentRTGSFieldSet').style.display='none';
			document.getElementById('cmbBankName').style.display=''; 
			document.getElementById('bankNameLabel').style.display=''; 
			document.getElementById('paymentTaxObligForm').style.display ='none';	
			//document.getElementById("cmbTaxTypeAgency").length=1;
			document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
			document.getElementById("CmbTaxPeriodTd").style.display="none";
			document.getElementById("tdCmbTaxPeriodYear").style.display="none";
			document.getElementById("noTaxPeriodTd").style.display="";
			document.getElementById("noTaxPeriodTd1").style.display="";
			document.getElementById("tdTaxSubHead").style.display="";
			document.getElementById("tdTaxSubHeadLbl").style.display="";
			document.getElementById("tdPaymentTypeLbl").style.display="";
			document.getElementById("tdPaymentType").style.display="";
			document.getElementById("incomeType").style.display="none";
			document.getElementById("incomeTypeTd").style.display="none";
			
			selectedFlagAGENCY=0;
		}
		else
		{
			return false;
		}
	}
	else if(document.getElementById('cmbTaxHead').value==AUCTION_NOTICE)
	{
		x = confirm ("Do You want to Clear the Data?");
		if(x)
		{
			requiredFieldsAfterCleaer();
			document.getElementById('paymentRegAuctionNoticeSet').style.display ='none';
			document.getElementById('paymentRTGSFieldSet').style.display='none';
			document.getElementById('cmbBankName').style.display=''; 
			document.getElementById('bankNameLabel').style.display=''; 
			document.getElementById('paymentTaxObligForm').style.display ='none';	
			document.getElementById("cmbTaxTypeAuction").length=1;
			document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
			document.getElementById("CmbTaxPeriodTd").style.display="none";
			document.getElementById("tdCmbTaxPeriodYear").style.display="none";
			document.getElementById("noTaxPeriodTd").style.display="";
			document.getElementById("noTaxPeriodTd1").style.display="";
			document.getElementById("tdTaxSubHead").style.display="";
			document.getElementById("tdTaxSubHeadLbl").style.display="";
			document.getElementById("tdPaymentTypeLbl").style.display="";
			document.getElementById("tdPaymentType").style.display="";
			document.getElementById("incomeType").style.display="none";
			document.getElementById("incomeTypeTd").style.display="none";
			
			selectedFlagAUCTION=0;
		}
		else
		{
			return false;
		}
	}
	else if(document.getElementById('cmbTaxHead').value==OTHER)
	{
		x = confirm ("Do You want to Clear the Data?");
		if(x)
		{
			requiredFieldsAfterCleaer();
			document.getElementById('paymentRegExciseCashBond').style.display ='none';
			document.getElementById('paymentRTGSFieldSet').style.display='none';
			document.getElementById('cmbBankName').style.display=''; 
			document.getElementById('bankNameLabel').style.display=''; 
			document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
			document.getElementById("CmbTaxPeriodTd").style.display="none";
			document.getElementById("tdCmbTaxPeriodYear").style.display="none";
			document.getElementById("noTaxPeriodTd").style.display="";
			document.getElementById("noTaxPeriodTd1").style.display="";
			document.getElementById("incomeType").style.display="none";
			document.getElementById("incomeTypeTd").style.display="none";
		}
		else
		{
			return false;
		}
	}
	else if(document.getElementById('cmbTaxHead').value==PPP)
	{
		x = confirm ("Do You want to Clear the Data?");
		if(x)
		{
			requiredFieldsAfterCleaer();
			document.getElementById('paymentRegPPP').style.display ='none';
			document.getElementById('paymentRTGSFieldSet').style.display='none';
			document.getElementById('cmbBankName').style.display=''; 
			document.getElementById('bankNameLabel').style.display=''; 
			document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
			document.getElementById("CmbTaxPeriodTd").style.display="none";
			document.getElementById("tdCmbTaxPeriodYear").style.display="none";
			document.getElementById("noTaxPeriodTd").style.display="";
			document.getElementById("noTaxPeriodTd1").style.display="";
			document.getElementById("incomeType").style.display="none";
			document.getElementById("incomeTypeTd").style.display="none";
			
			clear_table_data('pppaddDetailTable');
			clear_table_data('pppDetails');
		}
		else
		{
			return false;
		}
	}
	//changes done for iTax Prior Assessment
	else if(document.getElementById('cmbTaxHead').value==IPA)
	{
		var x;
		x = confirm ("Do You want to Clear the Data?");
		if(x)
		{
			clearDetailsOfiTaxPriorAssmnt();
			cleariTaxPriorAssmntDetails();
			requiredFieldsAfterCleaer();
		}
	}
	//end
	else
	{
		var x;
		x = confirm ("Do You want to Clear the Data?");
		if(x)
		{
			requiredFieldsAfterCleaer();
		}
	}
	}
}
/**
 * this function used for check pin that data is entered or not. if enterd then ask confirm otherwise user can change pin.
 * @param obj
 * @returns {Boolean}
 */
function pinChecked(obj) 
{	
	document.getElementById('txtPin').value=obj.value.toUpperCase();
	if(removeCommaFrmInput(document.getElementById('txtTotalAmountPayableOTR').value)>0 || removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value)>0 || removeCommaFrmInput(document.getElementById('txtTotalAmountPaidExciseBond').value)>0)
	{
		var x=confirm ("This action will clear your entered data.\nDo you really want to proceed?");
		if(x)
		{
			hideTab('TabView',2);
			resetErrorList();
			incError=0;	
			onChageTabClearTaxOblig();
			document.getElementById('landRentDiv').style.display='none';
			document.getElementById('stampDutyDiv').style.display='none';
			document.getElementById('stampDutyRadioDiv').style.display='none';
			document.getElementById('stampDutyAckNoDiv').style.display='none';
			//document.getElementById('AdvanceTaxpaymentstDiv').style.display='none';
			document.getElementById('SugarDevelopDiv').style.display='none'; 
			document.getElementById('StandLevyDiv').style.display='none';
			document.getElementById('txtTotalAmountPaidOTR').readOnly=true;
			document.getElementById('txtTotalAmountPaidOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
			document.getElementById('txtTotalAmountPaidOTR').value="0"; 
			document.getElementById('txtTotalAmountPayableOTR').readOnly=true;
			document.getElementById('txtTotalAmountPayableOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
			document.getElementById('txtTotalAmountPayableOTR').value="0";
			document.getElementById('widowsFieldSet').style.display='none';
			document.getElementById('cmbPaymentType').selectedIndex=0;
			document.getElementById('cmbTaxHead').selectedIndex=0; 
			document.getElementById('cmbBankName').selectedIndex=0;
			document.getElementById('cmbPaymentMode').selectedIndex=0; 
			document.getElementById('paymentTaxObligForm').style.display='none';
			document.getElementById('paymentRegSpecObligationForm').style.display='none';
			document.getElementById('paymentRegNTRForm').style.display='none';
			document.getElementById('btnTbl').style.display='';
			document.getElementById('totalAmountPaidFieldSet').style.display='none';	
			fetchTaxpayerDetail(obj);
		}
		else
		{
			alert(cntChangePIN);
			document.getElementById('txtPin').value=pinLoginTime;
			return false;
		}	
	}
	else
	{
		onChageTabClearTaxOblig();
		document.getElementById('landRentDiv').style.display='none';
		document.getElementById('stampDutyDiv').style.display='none';
		document.getElementById('stampDutyRadioDiv').style.display='none';
		document.getElementById('stampDutyAckNoDiv').style.display='none';
		//document.getElementById('AdvanceTaxpaymentstDiv').style.display='none';
		document.getElementById('SugarDevelopDiv').style.display='none'; 
		document.getElementById('StandLevyDiv').style.display='none';
		document.getElementById('txtTotalAmountPaidOTR').readOnly=true;
		document.getElementById('txtTotalAmountPaidOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
		document.getElementById('txtTotalAmountPaidOTR').value="0"; 
		document.getElementById('txtTotalAmountPayableOTR').readOnly=true;
		document.getElementById('txtTotalAmountPayableOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
		document.getElementById('txtTotalAmountPayableOTR').value="0";
		document.getElementById('widowsFieldSet').style.display='none';
		document.getElementById('txtAgencyNo').value="";
		//document.getElementById('txtTaxPayerPinAgency').value="";
		//document.getElementById('txtTaxPayerFirstNameAgency').value="";
		//document.getElementById('txtTaxPayerFullAddrAgency').value="";
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentRegSpecObligationForm').style.display='none';
		document.getElementById('paymentRegNTRForm').style.display='none';
		document.getElementById('btnTbl').style.display='';
		document.getElementById('totalAmountPaidFieldSet').style.display='none';	
		if(obj.value==null||trim(obj.value,'')=="")
		{
			document.getElementById('cmbPaymentType').selectedIndex=0;
			document.getElementById('cmbTaxHead').selectedIndex=0; 
			document.getElementById('cmbBankName').selectedIndex=0;
			document.getElementById('txtFirstName').value="";
			document.getElementById('taxPayerFullAddr').value="";
			document.getElementById('email').value="";
		}
		fetchTaxpayerDetail(obj);
	}
}


function isSplObligationRegisteredWeb(pmtSplDetailVO,isPartial){
	var isRegi = N_FLAG;
	IsSplObligationRegisteredWeb.isSplObligationRegisteredWeb(pmtSplDetailVO,{async:false,callback:function(data){
		if(data != NULL &&  data != null){
			if(data.toUpperCase() == Y_FLAG){
				if((isPartial == null || isPartial == Y_FLAG ||isPartial == "y") && (isWithoutLogin!="Y"))
					{
						if(pmtSplDetailVO.obligationId=='29')
							{
								alert("Payment registration has been already made for above data.");
							}
						//changes done for Enhancement 1
						else if(pmtSplDetailVO.obligationId=='22')
						{
							alert("Payment registration has been already made for above data.");
						}
						//end
						else{
							alert(regAlreadyDoneMulti);
						}
					}
					
				else
					alert(regAlreadyDone);
				isRegi = N_FLAG;
			}
			else if(data.toUpperCase() == N_FLAG){
				isRegi = Y_FLAG;

			}
			else if(data.toUpperCase() == NO_DETAILS_FOUND){
				alert(noDetailsFound);
				isRegi = N_FLAG;
			}
			else if(data.toUpperCase() == NO_CALL_MADE){
				alert(errFetchingData);
				isRegi = N_FLAG;
			}
		}
		else{
			alert(errFetchingData);
			isRegi = N_FLAG;
		}
	}});
	if(isRegi == Y_FLAG)
		return true;
	else
		return false;
}

function validateAgencyUserDtls(id)
{
	var rtnFlag;
	rtnFlag=validateFormFieldOnEvent(id,paymentRegEmailDetailsOblJson);
	getErrTabToggle('TabView','2');	
	if(!rtnFlag)
	{
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
	}
	return rtnFlag;	
}

//purpose 		:This method is used to show hide email are
//param 		:boolean(toShow)
//return 		:boolean

function showHideEmailArea(toShow){
	if(toShow){
		document.getElementById('tdLblEmail').style.display="";
		document.getElementById('tdTxtEmail').style.display="";
		document.getElementById("tdLblEmail").setAttribute("displayNone", "");
		document.getElementById("tdTxtEmail").setAttribute("displayNone", "");
		document.getElementById('txtFirstName').readOnly=false;	
		document.getElementById('taxPayerFullAddr').readOnly=false;	
		document.getElementById('taxPayerFullAddr').className='form101_textfcurr form101_textfcurr_width ';
		document.getElementById('txtFirstName').className='form101_textfcurr form101_textfcurr_width ';
		hidShowTextAreaCounter('taxPayerFullAddrDiv',1);
	}
	else{
		document.getElementById('tdLblEmail').style.display="none";
		document.getElementById('tdTxtEmail').style.display="none";
		document.getElementById("tdLblEmail").setAttribute("displayNone", "none");
		document.getElementById("tdTxtEmail").setAttribute("displayNone", "none");
		document.getElementById('txtFirstName').readOnly=true;	
		document.getElementById('taxPayerFullAddr').readOnly=true;	
		document.getElementById('taxPayerFullAddr').className='readonlyInput form101_textfcurr_width ';
		document.getElementById('txtFirstName').className='readonlyInput form101_textfcurr_width ';
		hidShowTextAreaCounter('taxPayerFullAddrDiv',0);
	}
	return true;
}
var pass;
function onChangeCmbTaxHead(obj){
	hidCGTDtls();
	document.getElementById("tdGPBTTypeLbl").style.display="none";
	document.getElementById("tdGPBTType").style.display="none";
	if(commonModifyFlag==0){
		//to do later
		//clearNSSFDetails();
if(selectedFlagAGENCY >0 && modifyFlagAGENCY ==0 ){
	if(confirm (clearDataConfirm)){		
		clear_table_data('agencyFormDetailsTable');
	document.getElementById('txtTotalAmountPaidOTR').value=0;
	document.getElementById('txtTotalAmountPaidOblig').value=0;
	document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
	document.getElementById('showAgencyFormTable').style.display='none';
	document.getElementById('paymentTaxObligForm').style.display='none';
	document.getElementById('agencyFormDetailsTable').style.display='none';
	document.getElementById('AgencyObligationDetailFieldSet').style.display='none';	
	document.getElementById('txtTotalAmountPayableOTR').readOnly=true;
	document.getElementById('txtTotalAmountPayableOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
	document.getElementById('txtTotalAmountPayableOTR').value=0;
	document.getElementById("tdGPBTTypeLbl").style.display="none";
	document.getElementById("tdGPBTType").style.display="none";
	}
}		
	
if(selectedFlagAUCTION>0 && modifyFlagAUCTION==0){
	if(confirm (clearDataConfirm)){		
	clear_table_data('agencyFormDetailsTable');
	document.getElementById('txtTotalAmountPaidOTR').value=0;
	document.getElementById('txtTotalAmountPaidOblig').value=0;
	document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
	document.getElementById('showAgencyFormTable').style.display='none';
	document.getElementById('paymentTaxObligForm').style.display='none';
	document.getElementById('agencyFormDetailsTable').style.display='none';
	document.getElementById('AgencyObligationDetailFieldSet').style.display='none';	
	document.getElementById('txtTotalAmountPayableOTR').readOnly=true;
	document.getElementById('txtTotalAmountPayableOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
	document.getElementById('txtTotalAmountPayableOTR').value=0;
	document.getElementById("tdGPBTTypeLbl").style.display="none";
	document.getElementById("tdGPBTType").style.display="none";
	}
}

		
		isWithoutLogin=document.getElementById('isWithoutLogin').value;
		if(isWithoutLogin=="Y")
		{
			showHideEmailArea(false);
			if(obj.value!=AGENCY_NOTICE)
			{
				if(	validateFormFields(paymentRegPinDetailsOblJson))
				{
					pass=true;
				}
				else 
				{
					getErrTabToggle('TabView','2');	
					tabview_switch('TabView', '2');
					hideAndShowTable("errorDiv");
					document.getElementById('btnTbl').style.display="none";
					document.getElementById('cmbTaxHead').selectedIndex=0;

				}
			}
			else if(obj.value==AGENCY_NOTICE)
			{
				pass=true;
			}
		}
		else if(isWithoutLogin!="Y") {
			pass=true;

		}
		if(pass)
		{
			if(obj.value!=IPA)
				{
				clearDetailsOfiTaxPriorAssmnt();
				}
			if(landRentTableCounter>0 || selectedFlagWidow>0 || selectedFlagSugar>0 || selectedFlagAdvance>0|| selectedFlagStandardLevy2>0 ||selectedFlagStandardLevy3>0 ||selectedFlagStandardLevy4>0 ||selectedFlagStandardLevy5>0 ||selectedFlagStandardLevy6>0 ||selectedFlagStandardLevy1>0 || removeCommaFrmInput(document.getElementById('txtDeclaredValue').value)>0 ||removeCommaFrmInput(document.getElementById('txtPenaltyStampDuty').value)>0
					||removeCommaFrmInput(document.getElementById('txtAmntOfDtyAssessedToPay').value)>0||selectedFlagTransferor>0 ||selectedFlagTransferee>0 || selectedExciseFlag>0 || selectedFlagNSSF>0)
			{
				if(clearDetailsOfLandRent())
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
				else if (clearDetailsOfAdvance())
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
				else if (clearDetailsOfWidows())
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
				else if (clearDetailsOfSugar())
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
				else if (clearDetailsOfStandard())
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
				else if (clearDetailsOfStampDuty())
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
				else if (clearDetailsOfExciseFee())
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
				else if (clearDetailsOfNSSF())
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
				else
				{
					document.getElementById('landRentDiv').style.display='none';
					document.getElementById('stampDutyDiv').style.display='none';
					document.getElementById('stampDutyRadioDiv').style.display='none';
					document.getElementById('stampDutyAckNoDiv').style.display='none';
					//document.getElementById('AdvanceTaxpaymentstDiv').style.display='none';
					document.getElementById('SugarDevelopDiv').style.display='none'; 
					document.getElementById('StandLevyDiv').style.display='none';
					document.getElementById('txtTotalAmountPaidOTR').readOnly=true;
					document.getElementById('txtTotalAmountPaidOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
					document.getElementById('txtTotalAmountPaidOTR').value="0"; 
					document.getElementById('txtTotalAmountPayableOTR').readOnly=true;
					document.getElementById('txtTotalAmountPayableOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
					document.getElementById('txtTotalAmountPayableOTR').value="0";
					document.getElementById('widowsFieldSet').style.display='none';
					tabview_switch('TabView',1);
					resetErrorList();
					hideTab('TabView',2);
					incError=0;	
					document.getElementById('paymentTaxObligForm').style.display='none';
					document.getElementById('agencyFormDetailsTable').style.display='none';
					document.getElementById('AgencyObligationDetailFieldSet').style.display='none';
					document.getElementById('showAgencyFormTable').style.display='none';
					document.getElementById('paymentRegSpecObligationForm').style.display='none';
					document.getElementById('paymentRegNTRForm').style.display='none';
					document.getElementById('paymentRegExciseCashBond').style.display='none'; 
					document.getElementById('btnTbl').style.display='';
					document.getElementById('totalAmountPaidFieldSet').style.display='none';
					document.getElementById("tdGPBTTypeLbl").style.display="none";
					document.getElementById("tdGPBTType").style.display="none";
				}
			}
			if(document.getElementById('in_exciseCashBondTbl_4').value!="")
			{
				if(confirm (clearDataConfirm))
				{
					document.getElementById('in_exciseCashBondTbl_4').value="";
					document.getElementById('txtTotalAmountPaidExciseBond').value=0; 
					document.getElementById('paymentRegExciseCashBond').style.display='none'; 
				}
				else
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
			}
			if(document.getElementById('cmbTaxSubHead').value==iaLicenseFee)
			{
				if(document.getElementById('cmbTaxPeriod').selectedIndex!=0)
				{
					if(confirm (clearDataConfirm))
					{
						document.getElementById('cmbTaxPeriod').selectedIndex=0;
						document.getElementById('txtTotalAmountPaidNTR').value=0; 
						document.getElementById('paymentRegNTRForm').style.display='none';  
					}
					else
					{
						document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
						return false;
					}
				}
			}
			if(selectedExciseFlag>0)
			{

				if(confirm (clearDataConfirm))
				{
					selectedExciseFlag=0;
					document.getElementById('hidRateOfLevy').value=document.getElementById('in_widowsTable_11').value;
					clear_Page_data('NTRExciseDetailAddRowTable','7');
					modifyFlagExciseLicenseFee=0;
					commonModifyFlag=0;
					document.getElementById('in_NTRExciseDetailAddRowTable_4').selectedIndex=0;
					document.getElementById('in_NTRExciseDetailAddRowTable_5').value ="";
					document.getElementById('in_NTRExciseDetailAddRowTable_6').value ="";
					document.getElementById('in_NTRExciseDetailAddRowTable_7').value =0;
					document.getElementById('txtTotalAmountPaidNTR').value=0; 
					document.getElementById('paymentRegNTRForm').style.display='none';  
					clear_table_data('NTRExciseDetailAddRowTable');  
				}
				else
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}

			}
			if(selectedFlagTaxOblig>0)
			{
				if(obj.value==NTR || (obj.value==AGENCY_REVENUE)|| obj.value==OTHER || obj.value==AGENCY_NOTICE)
				{
					if(confirm (clearDataConfirm))
					{
						onChageTabClearTaxOblig();
						document.getElementById('paymentTaxObligForm').style.display='none';
						document.getElementById('paymentRegSpecObligationForm').style.display='none';
						document.getElementById('paymentRegNTRForm').style.display='none';
						document.getElementById('paymentRegExciseCashBond').style.display='none'; 
						document.getElementById('btnTbl').style.display='';
						document.getElementById('totalAmountPaidFieldSet').style.display='none';
					}
					else
					{
						document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
						return false;
					}
				}
			}
			if(selectedFlagShipping>0 ||selectedFlagCable>0 ||selectedFlagVis>0 ||selectedFlagWithHoldee>0 ||selectedFlagRentIncomeWithHoldee>0 || selectedFlagVatWithHoldee>0)
			{
				if(confirm (clearDataConfirm))
				{
					onChageTabClearTaxOblig();
					document.getElementById('paymentTaxObligForm').style.display='none';
					document.getElementById('paymentRegSpecObligationForm').style.display='none';
					document.getElementById('paymentRegNTRForm').style.display='none';
					document.getElementById('paymentRegExciseCashBond').style.display='none'; 
					document.getElementById('btnTbl').style.display='';
					document.getElementById('totalAmountPaidFieldSet').style.display='none';
					//changes done for CR Rent Income Withholding
					document.getElementById("rentIncomeWithRadio1").checked=false;
					document.getElementById("rentIncomeWithRadio2").checked=false;
					document.getElementById("paymentRentIncomeWithRadioForm").style.display="";
					document.getElementById("paymentRentIncomeWithWebForm").style.display="none";
					document.getElementById("paymentRentIncomeWithRegForm").style.display="none";
					document.getElementById("paymentRentIncomeWithExcelUploadForm").style.display="none";
					document.getElementById("paymentVatWithWebForm").style.display="none";
					//end
				}
				else
				{
					document.getElementById('cmbTaxHead').value=taxHeadValueForRecord; 
					return false;
				}
			}
			else if(document.getElementById('paymentRegAgencyNoticeSet').style.display!="none")
			{
				document.getElementById('paymentTaxObligForm').style.display='none';
				document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
				document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
				//Added for DAT - 11/2023
				document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
				document.getElementById('paymentRegVISFieldSet').style.display='none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
				document.getElementById('paymentRegWithholdeeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('TotalTaxFieldSet').style.display='none';
				document.getElementById('disclaimerFieldSet').style.display='none';
				document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';	
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('txtTotalAmountPaidOblig').readOnly=true;
				//document.getElementById('txtTotalAmountPaidOblig').value=0;
				document.getElementById('txtTotalAmountPaidOblig').className='readonlyInput form101_textfcurr_width textonlyRight';
				document.getElementById('totalAmountPaidFieldSet').style.display='none';
			}
			else if(document.getElementById('paymentRegNTRForm').style.display!="none")
			{
				selectedExciseFlag=0;
				document.getElementById('hidRateOfLevy').value=document.getElementById('in_widowsTable_11').value;
				clear_Page_data('NTRExciseDetailAddRowTable','7');
				modifyFlagExciseLicenseFee=0;
				commonModifyFlag=0;
				document.getElementById('in_NTRExciseDetailAddRowTable_4').selectedIndex=0;
				document.getElementById('in_NTRExciseDetailAddRowTable_5').value ="";
				document.getElementById('in_NTRExciseDetailAddRowTable_6').value ="";
				document.getElementById('in_NTRExciseDetailAddRowTable_7').value =0;
				document.getElementById('txtTotalAmountPaidNTR').value=0; 
				document.getElementById('paymentRegNTRForm').style.display='none';  
				clear_table_data('NTRExciseDetailAddRowTable');
			}
			else if(document.getElementById('paymentRegSpecObligationForm').style.display!="none")
			{

				document.getElementById('landRentDiv').style.display='none';
				document.getElementById('stampDutyDiv').style.display='none';
				document.getElementById('stampDutyRadioDiv').style.display='none';
				document.getElementById('stampDutyAckNoDiv').style.display='none';
				//document.getElementById('AdvanceTaxpaymentstDiv').style.display='none';
				document.getElementById('SugarDevelopDiv').style.display='none'; 
				document.getElementById('StandLevyDiv').style.display='none';
				document.getElementById('txtTotalAmountPaidOTR').readOnly=true;
				document.getElementById('txtTotalAmountPaidOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
				document.getElementById('txtTotalAmountPaidOTR').value="0"; 
				document.getElementById('txtTotalAmountPayableOTR').readOnly=true;
				document.getElementById('txtTotalAmountPayableOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
				document.getElementById('txtTotalAmountPayableOTR').value="0";
				document.getElementById('widowsFieldSet').style.display='none';
				tabview_switch('TabView',1);
				resetErrorList();
				hideTab('TabView',2);
				incError=0;	
				document.getElementById('paymentTaxObligForm').style.display='none';
				document.getElementById('paymentRegSpecObligationForm').style.display='none';
				document.getElementById('paymentRegNTRForm').style.display='none';
				document.getElementById('paymentRegExciseCashBond').style.display='none'; 
				document.getElementById('btnTbl').style.display='';
				document.getElementById('totalAmountPaidFieldSet').style.display='none';	
			}
			else if(obj.value!=IT && obj.value!=EXCISE && obj.value!=VAT)
			{
				document.getElementById("paymentSpecVatWithRadio").style.display= 'none';
				document.getElementById('paymentRegShippingTaxFieldSet').style.display = 'none';
				document.getElementById('paymentRegVISFieldSet').style.display = 'none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById("paymentSpecOblRadioForm").style.display='none';
				document.getElementById('paymentTaxObligForm').style.display='none';
				document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
				document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
				//Added for DAT - 11/2023
				document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
				document.getElementById('paymentRegSEPTaxFieldSet').style.display = 'none';
				document.getElementById('paymentRegVISFieldSet').style.display='none';
				document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
				document.getElementById('paymentRegWithholdeeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('TotalTaxFieldSet').style.display='none';
				document.getElementById('disclaimerFieldSet').style.display='none';
				document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';	
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('txtTotalAmountPaidOblig').readOnly=true;
				/*Added*/
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				/*Ended*/
				if(modifyFlagAUCTION==0 ){
					document.getElementById('txtTotalAmountPaidOblig').value=0;	
				}
				///document.getElementById('txtTotalAmountPaidOblig').value=0;
				document.getElementById('txtTotalAmountPaidOblig').className='readonlyInput form101_textfcurr_width textonlyRight';
				document.getElementById('totalAmountPaidFieldSet').style.display='none';
				document.getElementById('navigationFieldset').style.display='none';
			}
			document.getElementById("cmbPaymentType").length=1;

			if(obj.value==selectOblCode){
				document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
			}

			else if(document.getElementById('hidAuthAgentFlow').value == "y" && document.getElementById('hidAuthAgentObligId').value != "0"){

				setCmbTaxSubHeadForTaxTypeSpecificUser(document.getElementById('hidAuthAgentObligId').value);
			}

			else if(obj.value==IT){
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
				document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display="none";
				
				var taxPayerCitizenshipCode = document.getElementById("taxPayerCitizenshipCode").value;
				//Added by Mingu for Pin with no Obligation :: START
				var isPinWithNoOblig = document.getElementById('isPinWithNoOblig').value;
				//Added by Mingu for Pin with no Obligation :: end
				for (var itMapKey in ITObligationsMap)
				{
					if(document.getElementById("txtPin").value.length > 11){
						var oOption=document.createElement("option");
						oOption.value=itMapKey;
						oOption.text=ITObligationsMap[itMapKey];
						oOption.title =ITObligationsMap[itMapKey];
						document.getElementById("cmbTaxSubHead").add(oOption);
					}
					else{
						//Added by Mingu for Pin with no Obligation :: START
						if(isPinWithNoOblig != 'Y'){
						//Added by Mingu for Pin with no Obligation :: end
							if(taxPayerCitizenshipCode == "KE"){
								if(itMapKey != "44"){
									var oOption=document.createElement("option");
									oOption.value=itMapKey;
									oOption.text=ITObligationsMap[itMapKey];
									oOption.title =ITObligationsMap[itMapKey];
									document.getElementById("cmbTaxSubHead").add(oOption);
								}
							}
							else{
								var oOption=document.createElement("option");
								oOption.value=itMapKey;
								oOption.text=ITObligationsMap[itMapKey];
								oOption.title =ITObligationsMap[itMapKey];
								document.getElementById("cmbTaxSubHead").add(oOption);
							}
						}//Added by Mingu for Pin with no Obligation :: end
					}
				}
				//Added by Mingu for Pin with no Obligation :: START
				if(isPinWithNoOblig == 'Y'){
					var oOption=document.createElement("option");
					oOption.value=32;
					oOption.text="(0110) Capital Gain Tax (CGT)";
					oOption.title ="(0110) Capital Gain Tax (CGT)";
					document.getElementById("cmbTaxSubHead").add(oOption);
				}
				//Added by Mingu for Pin with no Obligation :: end
				/*for (var itMapKey in ITObligationsMap)
				{
					if(itMapKey != "44" && isTR == ''){
						var oOption=document.createElement("option");
						oOption.value=itMapKey;
						oOption.text=ITObligationsMap[itMapKey];
						oOption.title =ITObligationsMap[itMapKey];
						document.getElementById("cmbTaxSubHead").add(oOption);
					}
					if(isTR == 'Y'){
						var oOption=document.createElement("option");
						oOption.value=itMapKey;
						oOption.text=ITObligationsMap[itMapKey];
						oOption.title =ITObligationsMap[itMapKey];
						document.getElementById("cmbTaxSubHead").add(oOption);
					}
				}*/
					
			}
			else if(obj.value==VAT){
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
				document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('paymentRegSEPTaxFieldSet').style.display = 'none';
				for (var key in VATObligationsMap) 
				{
					var oOption=document.createElement("option");
					oOption.value=key;
					oOption.text=VATObligationsMap[key];
					oOption.title =VATObligationsMap[key];
					document.getElementById("cmbTaxSubHead").add(oOption);
				}
			}
			
			/*changes done for iTax Prior Assessment*/
			else if(obj.value==IPA){
				isiTaxPriorAssmnt=true;
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById('paymentExcelUploadForm').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById('paymentTaxObligForm').style.display="";
				document.getElementById('totalAmountPaidFieldSet').style.display="";
				document.getElementById('paymentiTaxPriorAdditionalAssmntForm').style.display="";
				document.getElementById('cmbTaxSubHead').style.display="none";
				document.getElementById('tdTaxSubHeadLbl').style.display="none";
				document.getElementById('tdPaymentTypeLbl').style.display="none";
				document.getElementById('cmbPaymentType').style.display="none";
				document.getElementById('cmbTaxPeriod').style.display="none";
				document.getElementById('hidPaymentType').value='LAT';
				fetchiTaxPriorAssessmentDtlsForPartial();
				//document.getElementById("total_iTaxPriorAssmntTable_8").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
			}
			/*end*/
			
			else if(obj.value==EXCISE){
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
				document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display="none";
				for (var key in ExciseObligationsMap) 
				{
					var oOption=document.createElement("option");
					oOption.value=key;
					oOption.text=ExciseObligationsMap[key];
					oOption.title =ExciseObligationsMap[key];
					if(isWithoutLogin == "Y" || isWithoutLogin == "y")
					{
						if(key!=exciseObligationId)
						{
							document.getElementById("cmbTaxSubHead").add(oOption);
						}
					}
					else
					{
						document.getElementById("cmbTaxSubHead").add(oOption);
					}
				}
			}
			else if(obj.value==AGENCY_REVENUE){

				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
				document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display="none";
				for (var key in AgencyObligationsMap) 
				{
					var oOption=document.createElement("option");
					oOption.value=key;
					oOption.text=AgencyObligationsMap[key];
					oOption.title =AgencyObligationsMap[key];
					document.getElementById("cmbTaxSubHead").add(oOption);
				}
			}
			else if(obj.value==NTR){
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
				document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById("cmbTaxSubHead").selectedIndex=0;
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display="none";
				for (var key in NTRObligationsMap) 
				{
					var oOption=document.createElement("option");
					oOption.value=key;
					oOption.text=NTRObligationsMap[key];
					oOption.title =NTRObligationsMap[key];
					if(isWithoutLogin == "Y" || isWithoutLogin == "y")
					{
						alert(invalidSelectionOL);
					}
					else
					{
						document.getElementById("cmbTaxSubHead").add(oOption);
					}
				}
			}
			else if(obj.value==OTHER){
				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
				document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display="none";
				for (var key in OtherObligationsMap) 
				{
					var oOption=document.createElement("option");
					oOption.value=key;
					oOption.text=OtherObligationsMap[key];
					oOption.title =OtherObligationsMap[key];
					document.getElementById("cmbTaxSubHead").add(oOption);
				}
			}
			else if(obj.value==AGENCY_NOTICE){
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				if(isWithoutLogin=="Y")
				{
					showHideEmailArea(true);
				}
				setObligationType();
				document.getElementById("hidPaymentType").value=agencyValue;
				document.getElementById("tdTaxSubHead").style.display="none";
				document.getElementById("tdTaxSubHeadLbl").style.display="none";
				
				if(modifyFlagAGENCY==0)
				{
					document.getElementById('txtAgencyNo').value='';
				//document.getElementById('txtTaxPayerPinAgency').value='';
				//document.getElementById('txtTaxPayerFirstNameAgency').value='';	
				//document.getElementById('txtTaxPayerFullAddrAgency').value='';
				//document.getElementById('cmbTaxTypeAgency').length=1;
				//document.getElementById('cmbTaxTypeAgency').selectedIndex=0;
				document.getElementById('AgencyObligationDetailFieldSet').style.display='none';	
				document.getElementById('agencyFormDetailsTable').style.display='none';
				document.getElementById('showAgencyFormTable').style.display='none';
				clear_table_data("agencyFormDetailsTable");
				
				//document.getElementById('cmbTaxPeriodAgency').length=1;
				//document.getElementById('cmbTaxPeriodAgency').selectedIndex=0;
			    }
				
				for(var i=0;i<paymentType.length;i++)
				{
					var oOption=document.createElement("option");
					optionValue=paymentType[i].value;
					optionText=paymentType[i].label;

					oOption.text=optionText;
					oOption.value=optionValue;
					oOption.title=optionText;

					if(optionValue==SAT )
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}

				}
				document.getElementById('cmbPaymentType').selectedIndex=1;
				document.getElementById('cmbTaxSubHead').selectedIndex=1;

				document.getElementById('paymentTaxObligForm').style.display='';
				document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
				document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
				//Added for DAT - 11/2023
				document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
				document.getElementById('paymentRegVISFieldSet').style.display='none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
				document.getElementById('paymentRegWithholdeeSet').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='';
				document.getElementById('TotalTaxFieldSet').style.display='none';
				document.getElementById('disclaimerFieldSet').style.display='none';
				document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';	
				document.getElementById('paymentRegAgencyNoticeSet').style.display='';
				document.getElementById('txtTotalAmountPaidOblig').readOnly=false;
				document.getElementById('txtTotalAmountPaidOblig').className='form101_textfcurr form101_textfcurr_width textonlyRight';
				document.getElementById('totalAmountPaidFieldSet').style.display='';	 
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display= 'none';
				document.getElementById('paymentRegShippingTaxFieldSet').style.display = 'none';
				document.getElementById('paymentRegVISFieldSet').style.display = 'none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById("paymentSpecOblRadioForm").style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display="none";
			}
			else if(obj.value==PPP){
				document.getElementById('hidObligationType').value=OTHER;
				clear_table_data('pppaddDetailTable');
				clear_table_data('pppDetails');
				document.getElementById('txtAckNumber').value='';
				document.getElementById('txtobligationId').value='';
				document.getElementById('txtTotalAmountPaidPPP').value='0';

				document.getElementById('paymentRegExciseCashBond').style.display='none';
				if(isWithoutLogin=="Y")
				{
					showHideEmailArea(true);
				}
				setObligationType();
				document.getElementById("hidPaymentType").value=PPP;

				document.getElementById("tdTaxSubHead").style.display="none";
				document.getElementById("tdTaxSubHeadLbl").style.display="none";
				for(var i=0;i<paymentType.length;i++)
				{
					var oOption=document.createElement("option");
					optionValue=paymentType[i].value;
					optionText=paymentType[i].label;

					oOption.text=optionText;
					oOption.value=optionValue;
					oOption.title=optionText;

					if(optionValue==OTHER )
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}

				}
				document.getElementById('cmbPaymentType').selectedIndex=1;

				document.getElementById('paymentTaxObligForm').style.display='none';
				document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
				document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
				document.getElementById('paymentRegVISFieldSet').style.display='none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
				document.getElementById('paymentRegWithholdeeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='none';
				document.getElementById('TotalTaxFieldSet').style.display='none';
				document.getElementById('disclaimerFieldSet').style.display='none';
				document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';	
				//document.getElementById('paymentRegAgencyNoticeSet').style.display='';
				document.getElementById('txtTotalAmountPaidOblig').readOnly=false;
				document.getElementById('txtTotalAmountPaidOblig').className='form101_textfcurr form101_textfcurr_width textonlyRight';
				document.getElementById('totalAmountPaidFieldSet').style.display='';	 
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById('paymentRegPPP').style.display='';
				document.getElementById("paymentSpecVatWithRadio").style.display= 'none';
				document.getElementById('paymentRegShippingTaxFieldSet').style.display = 'none';
				document.getElementById('paymentRegVISFieldSet').style.display = 'none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById("paymentSpecOblRadioForm").style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display="none";
			}
			
			else if(obj.value==AUCTION_NOTICE){
				if(isWithoutLogin=="Y")
				{
					showHideEmailArea(true);
				}
				setObligationType();
				document.getElementById("hidPaymentType").value=AUCTION_NOTICE;
				document.getElementById("tdTaxSubHead").style.display="none";
				document.getElementById("tdTaxSubHeadLbl").style.display="none";
				if(modifyFlagAUCTION==0){
				document.getElementById('txtAuctionNo').value='';
				document.getElementById('txtTaxPayerPinAuction').value='';
				document.getElementById('txtTaxPayerFirstNameAuction').value='';	
				document.getElementById('txtTaxPayerFullAddrAuction').value='';
				document.getElementById('cmbTaxTypeAuction').length=1;
				document.getElementById('cmbTaxTypeAuction').selectedIndex=0;
				document.getElementById('AgencyObligationDetailFieldSet').style.display='none';	
				document.getElementById('agencyFormDetailsTable').style.display='none';
				document.getElementById('showAgencyFormTable').style.display='none';
				clear_table_data("agencyFormDetailsTable") ;
				document.getElementById('cmbTaxPeriodAuction').length=1;
				document.getElementById('cmbTaxPeriodAuction').selectedIndex=0;
				}
				for(var i=0;i<paymentType.length;i++)
				{
					var oOption=document.createElement("option");
					optionValue=paymentType[i].value;
					optionText=paymentType[i].label;

					oOption.text=optionText;
					oOption.value=optionValue;
					oOption.title=optionText;

					if(optionValue==SAT )
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}

				}
				document.getElementById('cmbPaymentType').selectedIndex=1;
				document.getElementById('cmbTaxSubHead').selectedIndex=1;

				document.getElementById('paymentTaxObligForm').style.display='';
				document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
				document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
				//Added for DAT - 11/2023
				document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
				document.getElementById('paymentRegVISFieldSet').style.display='none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
				document.getElementById('paymentRegWithholdeeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('paymentRegAuctionNoticeSet').style.display='';
				document.getElementById('TotalTaxFieldSet').style.display='none';
				document.getElementById('disclaimerFieldSet').style.display='none';
				document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';	
				document.getElementById('txtTotalAmountPaidOblig').readOnly=false;
				document.getElementById('txtTotalAmountPaidOblig').className='form101_textfcurr form101_textfcurr_width textonlyRight';
				document.getElementById('totalAmountPaidFieldSet').style.display='';	 
				document.getElementById('paymentRegExciseCashBond').style.display='none';
				document.getElementById('paymentRegPPP').style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display= 'none';
				document.getElementById('paymentRegShippingTaxFieldSet').style.display = 'none';
				document.getElementById('paymentRegVISFieldSet').style.display = 'none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById("paymentSpecOblRadioForm").style.display='none';
				document.getElementById("paymentSpecVatWithRadio").style.display='none';
				document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
				document.getElementById("paymentVATWitholdingWebForm").style.display='none';
				document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display="none";
			}
			document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
			document.getElementById("CmbTaxPeriodTd").style.display="none";
			document.getElementById("tdCmbTaxPeriodYear").style.display="none";
			document.getElementById("noTaxPeriodTd").style.display="";
			document.getElementById("noTaxPeriodTd1").style.display="";
			document.getElementById("incomeType").style.display="none";
			document.getElementById("incomeTypeTd").style.display="none";
			
			taxHeadValueForRecord=obj.value;
			specialTaxObligation=0;
		}
	}
	else{
		alert("Please complete modify operation first");
		//document.getElementById("cmbTaxSubHead").value=taxSubHeadValueForRecord;
		document.getElementById("cmbTaxHead").value=taxHeadValueForRecord;
		return false;
	}
}



function clearWithholdeeExclDtls()
{
	
	document.getElementById('paymentExcelUploadForm').style.display='none';
	document.getElementById('paymentSpecOblRadioForm').style.display='none'; 
	document.getElementById('specOblPmtTypeRadio1').checked=false;
	document.getElementById('specOblPmtTypeRadio2').checked=false;
}

function onChangeCmbSubTaxHead(obj)
{
	checkStatusOfObl(obj);
	document.getElementById('cmbTaxPeriodLbl').innerHTML = 'Tax Periods';
	clearAdvTaxDetails();
	clearPresumptiveTaxDetails();
	clearWithholdeeExclDtls();
	clearCgtPenaltyForm();
	//chnages done for CR Rent Income Withholding
	//clearRentIncomeWithholdeeExclDtls();
	if(obj.value!=rentIncomeWith && selectedFlagRentIncomeWithHoldee<=0)
	{
		clearRentIncomeWithholdeeExclDtls();
		hideRentIncomeWithDtls();
	}
	//end
	//changes done for CR CGT
	if(obj.value!=CGT)
	{
		hidCGTDtls();
	}
	//end
	document.getElementById('paymentAdvTaxWebForm').style.display='none';
	document.getElementById('paymentAdvExcelUploadForm').style.display='none';
	document.getElementById('AdvanceTaxpaymentRadioDiv').style.display='none';
	onChangeCmoboClearAlert(document.getElementById("cmbTaxHead").value,obj.value);
	if(landRentTableCounter>0 || selectedFlagWidow>0 || selectedFlagSugar>0 || selectedFlagAdvance>0|| selectedFlagStandardLevy2>0 ||selectedFlagStandardLevy3>0 ||selectedFlagStandardLevy4>0 ||selectedFlagStandardLevy5>0 ||selectedFlagStandardLevy6>0 ||selectedFlagStandardLevy1>0 || removeCommaFrmInput(document.getElementById('txtDeclaredValue').value)>0 ||removeCommaFrmInput(document.getElementById('txtPenaltyStampDuty').value)>0
			||removeCommaFrmInput(document.getElementById('txtAmntOfDtyAssessedToPay').value)>0||selectedFlagTransferor>0 ||selectedFlagTransferee>0 || selectedExciseFlag>0)
	{
		if(clearDetailsOfLandRent())
		{
			alert(cntChangeTaxHead);
			obj.value=taxSubHeadValueForRecord; 
			return false;
		}
		else if (clearDetailsOfAdvance())
		{
			alert(cntChangeTaxHead);
			obj.value=taxSubHeadValueForRecord; 
			return false;
		}
		else if (clearDetailsOfWidows())
		{
			alert(cntChangeTaxHead);
			obj.value=taxSubHeadValueForRecord; 
			return false;
		}
		else if (clearDetailsOfSugar())
		{
			alert(cntChangeTaxHead);
			obj.value=taxSubHeadValueForRecord; 
			return false;
		}
		else if (clearDetailsOfStandard())
		{
			alert(cntChangeTaxHead);
			obj.value=taxSubHeadValueForRecord; 
			return false;
		}
		else if (clearDetailsOfStampDuty())
		{
			alert(cntChangeTaxHead);
			obj.value=taxSubHeadValueForRecord; 
			return false;
		}
		else if (clearDetailsOfExciseFee())
		{
			alert(cntChangeTaxHead);
			obj.value=taxSubHeadValueForRecord; 
			return false;
		}

		else
		{
			document.getElementById('landRentDiv').style.display='none';
			document.getElementById('stampDutyDiv').style.display='none';
			document.getElementById('stampDutyRadioDiv').style.display='none';
			document.getElementById('stampDutyAckNoDiv').style.display='none';
			document.getElementById('paymentAdvTaxWebForm').style.display='none';
			document.getElementById('paymentAdvExcelUploadForm').style.display='none';
			document.getElementById('AdvanceTaxpaymentRadioDiv').style.display='none';
			document.getElementById('SugarDevelopDiv').style.display='none'; 
			document.getElementById('StandLevyDiv').style.display='none';
			document.getElementById('txtTotalAmountPaidOTR').readOnly=true;
			document.getElementById('txtTotalAmountPaidOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
			document.getElementById('txtTotalAmountPaidOTR').value="0"; 
			document.getElementById('txtTotalAmountPayableOTR').readOnly=true;
			document.getElementById('txtTotalAmountPayableOTR').className='readonlyInput form101_textfcurr_width textonlyRight';
			document.getElementById('txtTotalAmountPayableOTR').value="0";
			document.getElementById('widowsFieldSet').style.display='none';
			tabview_switch('TabView',1);
			resetErrorList();
			hideTab('TabView',2);
			incError=0;	
			document.getElementById('paymentTaxObligForm').style.display='none';
			document.getElementById('paymentRegSpecObligationForm').style.display='none';
			document.getElementById('paymentRegNTRForm').style.display='none';
			document.getElementById('paymentRegExciseCashBond').style.display='none'; 
			document.getElementById('btnTbl').style.display='';
			document.getElementById('totalAmountPaidFieldSet').style.display='none';	
			document.getElementById('paymentExcelUploadForm').style.display='none';
			document.getElementById('paymentSpecOblRadioForm').style.display='none'; 
			document.getElementById('agencyFormDetailsTable').style.display='none';
			document.getElementById('AgencyObligationDetailFieldSet').style.display='none';
			document.getElementById('showAgencyFormTable').style.display='none';
			
		}
	}
	
	if(obj.value==selectOblCode)
	{
		document.getElementById("cmbPaymentType").length=1;
	}
	if(obj.value==itResident || obj.value==itNonResident|| obj.value==compnay)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue!=DEPOSIT && optionValue!=OTHER && optionValue!=EAT && optionValue!=AAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
	}
	//changes done for PR
	if(obj.value==partnership)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;
			//Modified by Kirui, Mingu and Vincent to allow payment of VTDP for Income Tax Partnership
			//if(optionValue==SAT || optionValue==VTDP) 
			if(optionValue==SAT || optionValue==VTDP || optionValue == LEGDBT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
	}
	//end
	//added for housing levy CR
	if(obj.value==housingLevy)
	{	
		/*var  tableObj =document.getElementById('taxObligationTable');
		var len=tableObj.rows.length;
		if(len>1)
		{
			for(var i = 1, n = tableObj.rows.length; i <n; i++) 
			{
				if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted')
				{
					if((tableObj.rows[i].cells[3].textContent.indexOf('0111')==-1) || ((tableObj.rows[i].cells[3].innerText!=null && tableObj.rows[i].cells[3].innerText.indexOf('0111')==-1)))
					{
						if (document.all) {// for IE
							flagForMergeMRI=0;
							document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordMRI;
							//return false;
						}
						else{
							flagForMergeMRI=0;
							document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordMRI;
							//return false;
						}
					}
				}
				else
				{
					flagForMergeMRI=1;
				}
			}
		}
		else
		{
			flagForMergeMRI=1;
		}
		
		if(flagForMergeMRI==0)
		{
			document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordForMRI;
			alert(cntMergeObligationPay);
			return false;
		}*/
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			/*Added for payment of penalties 70023 17102023*/
			if(optionValue==PEN)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			/*END*/
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = housingLevy;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//end
	//added for NITA levy CR(ENH6) by hzora
	else if(obj.value==42)
	{	

		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			/*if(optionValue==TAP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}*/
			/*Added for 65215 NITA arrears:: START*/
			if(optionValue==NITAR)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			/*Added for 65215 NITA Arrears:: END*/
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = 42;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//end NITA Levy
	
	//Added for TOTFP Obligation:Start
	else if(obj.value==TOTFP)
	{	

		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT || optionValue==VTDP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			
		}
	//	document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = TOTFP;
		//onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//Added for TOTFP obligation:End
	
	else if(obj.value==turnOver)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;
			//Modified by Kirui, Mingu and Vincent to allow payment of VTDP for Income Tax Partnership
			if(optionValue==SAT || optionValue==TAP || optionValue==VTDP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
	}
	else if(obj.value==44)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT || optionValue==PEN )
			{
				if(optionValue==PEN)
				{   
					oOption.text=optionText + "/Intrest";
					document.getElementById("cmbPaymentType").add(oOption);
				}else{
					document.getElementById("cmbPaymentType").add(oOption);
				}
			}
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = 44;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	
	
	//Start Added for Digital Asset tax
	
	else if(obj.value==45)
	{
		
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT || optionValue==PEN)
			{
				if(optionValue==PEN)
				{
					oOption.text=optionText + "/Intrest";
					document.getElementById("cmbPaymentType").add(oOption);
				}else{
					document.getElementById("cmbPaymentType").add(oOption);
				}
				
			}
			//Added for DAT Additional Assessment and Default Assessment :: START
			if(optionValue==AAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			if(optionValue==EAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			//Added for DAT Additional Assessment and Default Assessment :: END
		}
		document.getElementById('paymentRegDATTaxFieldSet').style.display = '';
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = 45;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//End Added for Digital Asset tax
	
	//Start Added for SEP tax #81171
	else if(obj.value==47)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT || optionValue==PEN )
			{
				if(optionValue==PEN)
				{   
					oOption.text=optionText + "/Interest";
					document.getElementById("cmbPaymentType").add(oOption);
				}else{
					document.getElementById("cmbPaymentType").add(oOption);
				}
			}
			//Added for SEP Additional Assessment and Default Assessment :: START
			if(optionValue==AAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			if(optionValue==EAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			//Added for SEP Additional Assessment and Default Assessment :: END
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = 44;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//Stop Added for SEP tax #81171
	else if(obj.value==CGT && document.getElementById('cmbPaymentType').value != VTDP )
	{
		//chnages done for not allowing merge
		/*var  tableObj =document.getElementById('taxObligationTable');
		var len=tableObj.rows.length;
		if(len>1)
		{
			for(var i = 1, n = tableObj.rows.length; i <n; i++) 
			{
				if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted')
				{
					if((tableObj.rows[i].cells[3].textContent.indexOf('0110')==-1) || ((tableObj.rows[i].cells[3].innerText!=null && tableObj.rows[i].cells[3].innerText.indexOf('0110')==-1)))
					{
						if (document.all) {// for IE
							flagForMergeCGT=0;
							document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordCGT;
							//return false;
						}
						else{
							flagForMergeCGT=0;
							document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordCGT;
							//return false;
						}
					}
				}
				else
				{
					flagForMergeCGT=1;
				}
			}
		}
		else
		{
			flagForMergeCGT=1;
		}
		
		if(flagForMergeCGT==0)
		{
			document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordForCGT;
			alert(cntMergeObligationPay);
			return false;
		}*/
		//end
	//	CmbTaxPeriodLabelTd
		//document.getElementById("cmbTaxPeriodLbl").style.display="none";
		document.getElementById("cmbTaxPeriodYear").style.display="none";
		document.getElementById("cmbTaxPeriodMonth").style.display="none";
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("tdCGTTypeLbl").style.display="";
		document.getElementById("tdCGTType").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		//changes done for PR
		taxSubHeadValueForPrevRecordCGT=obj.value;
		//end
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			if(optionValue==AAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			if(optionValue==EAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			//Modified by Kirui, Mingu and Vincent to allow payment of VTDP for Income Tax Partnership
			if(optionValue==VTDP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = CGT;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//Added By Bhavana
	else if(obj.value==PT)
	{	if(isItrReg || !isITRegCancelled){
		if(!isVATReg){
		document.getElementById("cmbTaxPeriodYear").style.display="none";
		document.getElementById("cmbTaxPeriodMonth").style.display="none";
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		//document.getElementById("tdCGTTypeLbl").style.display="";
		//document.getElementById("tdCGTType").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";

		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = PT;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
		}
		else{
			alert("You are not entitled for the Presumptive Tax. Please contact your station for further details.");
			return false;
		}
	}else
			{
			alert("You are not entitled for the Presumptive Tax. Please contact your station for further details.");
			return false;
			}
	}
	
	//changes done for CR Monthly Rental Income
	else if(obj.value==rentIncomeCode)
	{
		var  tableObj =document.getElementById('taxObligationTable');
		var len=tableObj.rows.length;
		if(len>1)
		{
			for(var i = 1, n = tableObj.rows.length; i <n; i++) 
			{
				if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted')
				{
					if((tableObj.rows[i].cells[3].textContent.indexOf('0111')==-1) || ((tableObj.rows[i].cells[3].innerText!=null && tableObj.rows[i].cells[3].innerText.indexOf('0111')==-1)))
					{
						if (document.all) {// for IE
							flagForMergeMRI=0;
							document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordMRI;
							//return false;
						}
						else{
							flagForMergeMRI=0;
							document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordMRI;
							//return false;
						}
					}
				}
				else
				{
					flagForMergeMRI=1;
				}
			}
		}
		else
		{
			flagForMergeMRI=1;
		}
		
		if(flagForMergeMRI==0)
		{
			document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordForMRI;
			alert(cntMergeObligationPay);
			return false;
		}
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		
		taxSubHeadValueForPrevRecordMRI=obj.value;
		
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			//Modified by Kirui, Mingu and Vincent to allow payment of VTDP for Income Tax Partnership
			if(optionValue==SAT || optionValue==VTDP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
		document.getElementById('cmbPaymentType').selectedIndex=0;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = rentIncomeCode;
		//onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//end
	//changes done for CR Amnesty
	else if(obj.value==amnestyCode)
	{
		var  tableObj =document.getElementById('taxObligationTable');
		var len=tableObj.rows.length;
		if(len>1)
		{
			for(var i = 1, n = tableObj.rows.length; i <n; i++) 
			{
				if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted')
				{
					if((tableObj.rows[i].cells[3].textContent.indexOf('0112')==-1) || (tableObj.rows[i].cells[3].innerText.indexOf('0112')==-1))
					{
						if (document.all) {// for IE
							flagForMergeAmnesty=0;
							document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordAmnesty;
							//return false;
						}
						else{
							flagForMergeAmnesty=0;
							document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordAmnesty;
							//return false;
						}
					}
				}
				else
				{
					flagForMergeAmnesty=1;
				}
			}
		}
		else
		{
			flagForMergeAmnesty=1;
		}
		
		if(flagForMergeAmnesty==0)
		{
			document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordForAmnesty;
			alert(cntMergeObligationPay);
			return false;
		}
		
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = amnestyCode;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	
	}
	//end
	else if(obj.value==payeeCode || obj.value==VATCode|| obj.value==exciseTaxOblCode || obj.value==18)
	{
		//changes for exclicensefee
		if (obj.value==18){
			document.getElementById('hidObligationId').value = 18;
		}
		
		
		
		
		//changes done for CR Montlhy Rental Income
		checkForCGTAndMRI();
		//end
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;
			//ADDED BY Kirui, Mingu and Kiprono To disable minimum tax in VAT, PAYE and Excise start
    		//if(optionValue!=TMT && optionValue!=DEPOSIT && optionValue!=TIP && optionValue!=OTHER && optionValue!=PPP && optionValue!=EAT && optionValue!=AAT)
			if(obj.value==VATCode){
				if(optionValue!=TMT && optionValue!=DEPOSIT && optionValue!=TIP && optionValue!=OTHER && optionValue!=PPP && optionValue!=EAT && optionValue!=AAT)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
			}
			else{
				if(optionValue!=LEGDBT && optionValue!=TMT && optionValue!=DEPOSIT && optionValue!=TIP && optionValue!=OTHER && optionValue!=PPP && optionValue!=EAT && optionValue!=AAT)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
			}
			
			//ADDED BY Kirui, Mingu and Kiprono To disable minimum tax in VAT, PAYE and Excise end
    		//Modified by Kirui, Mingu and Vincent to allow payment of VTDP START
    		if(optionValue==VTDP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
	}
	else if(obj.value==WithHoldee || obj.value==VisOblCode|| obj.value==shippingOblCode||obj.value==TransmissionOblCode || obj.value==iaLicenseFee|| obj.value==exciseObligationId||obj.value==advanceObligationId)
	{
		if(obj.value==WithHoldee){
			
			if(selectedFlagTaxOblig==0)
			{
				document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
				document.getElementById("CmbTaxPeriodTd").style.display="none";
				document.getElementById("tdCmbTaxPeriodYear").style.display="none";
				document.getElementById("noTaxPeriodTd").style.display="";
				document.getElementById("noTaxPeriodTd1").style.display="";
				document.getElementById("cmbPaymentType").length=1;
				document.getElementById("tdGPBTTypeLbl").style.display="none";
				document.getElementById("tdGPBTType").style.display="none";
				for(var i=0;i<paymentType.length;i++)
				{
					var oOption=document.createElement("option");
					optionValue=paymentType[i].value;
					optionText=paymentType[i].label;

					oOption.text=optionText;
					oOption.value=optionValue;
					oOption.title=optionText;

					if(optionValue==SAT)
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}
					if(optionValue==AAT)
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}
					if(optionValue==EAT)
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}	
					if(optionValue==VTDP)
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}
				}
				document.getElementById('cmbPaymentType').selectedIndex=1;
				document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
				document.getElementById('hidObligationId').value = 6;
				onChngCmbPmtType(document.getElementById('cmbPaymentType'));
				document.getElementById("paymentSpecOblRadioForm").style.display="";
			}
			else{
				onChangeCmbTaxType(obj);
				showPagesOnChangeTaxSubHead(obj);				
			}
			
		}
		else {
		if(selectedFlagTaxOblig==0)
		{
			document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
			document.getElementById("CmbTaxPeriodTd").style.display="none";
			document.getElementById("tdCmbTaxPeriodYear").style.display="none";
			document.getElementById("noTaxPeriodTd").style.display="";
			document.getElementById("noTaxPeriodTd1").style.display="";
			document.getElementById("cmbPaymentType").length=1;
			document.getElementById("tdGPBTTypeLbl").style.display="none";
			document.getElementById("tdGPBTType").style.display="none";
			for(var i=0;i<paymentType.length;i++)
			{
				var oOption=document.createElement("option");
				optionValue=paymentType[i].value;
				optionText=paymentType[i].label;

				oOption.text=optionText;
				oOption.value=optionValue;
				oOption.title=optionText;
				
				if(optionValue==SAT)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
				if(optionValue==VTDP)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
				//Added to enable VAT on Imported Services Default and Additional Assesment Payment
				//Added to enable Transmission and shipping Default and Additional Assesment Payment //Partial Payment
				if(obj.value==VisOblCode || obj.value==shippingOblCode||obj.value==TransmissionOblCode){
					if(optionValue==AAT)
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}
					if(optionValue==EAT)
					{
						document.getElementById("cmbPaymentType").add(oOption);
					}
				}
				//Added to enable VAT on Imported Services Default and Additional Assesment Payment :: end
			}
			document.getElementById('cmbPaymentType').selectedIndex=1;
			onChngCmbPmtType(document.getElementById('cmbPaymentType'));
		}
		else{
			onChangeCmbTaxType(obj);
			showPagesOnChangeTaxSubHead(obj);
		}
	}


	}
	if(obj.value==advanceObligationId){
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;
			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;
			if(optionValue==SAT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			//Added By Jaimin to add AAT and EAT in income tax addition tax
			if(optionValue==AAT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			if(optionValue==EAT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			//Ended By Jaimin to add AAT and EAT in income tax addition tax
			//Modified by Kirui, Mingu and Vincent to allow payment of VTDP START
    		if(optionValue==VTDP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	
	if(obj.value==VisOblCode|| obj.value==shippingOblCode||obj.value==TransmissionOblCode){
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;
			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;
			if(optionValue==SAT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}			
			//Modified by Kirui, Mingu and Vincent to allow payment of VTDP START
    		if(optionValue==VTDP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
    		//Added to enable VAT on Imported Services Default and Additional Assesment Payment
    		//Added to enable Transmission and shipping Default and Additional Assesment Payment //Partial Payment
			if(obj.value==VisOblCode || obj.value==shippingOblCode||obj.value==TransmissionOblCode){
				if(optionValue==AAT)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
				if(optionValue==EAT)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
			}
			//Added to enable VAT on Imported Services Default and Additional Assesment Payment :: end
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	
	//chnages done for Rent Income Withholding
	if(obj.value==rentIncomeWith){
		
		if(selectedFlagTaxOblig==0)
		{
			document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
			document.getElementById("CmbTaxPeriodTd").style.display="none";
			document.getElementById("tdCmbTaxPeriodYear").style.display="none";
			document.getElementById("noTaxPeriodTd").style.display="";
			document.getElementById("noTaxPeriodTd1").style.display="";
			document.getElementById("cmbPaymentType").length=1;
			for(var i=0;i<paymentType.length;i++)
			{
				var oOption=document.createElement("option");
				optionValue=paymentType[i].value;
				optionText=paymentType[i].label;

				oOption.text=optionText;
				oOption.value=optionValue;
				oOption.title=optionText;

				if(optionValue==SAT )
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
				if(optionValue==AAT)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
				if(optionValue==EAT)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
				    
				
				
				
			}
			document.getElementById('cmbPaymentType').selectedIndex=1;
			document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
			document.getElementById('hidObligationId').value = rentIncomeWith;
			document.getElementById('disclaimerFieldSet').style.display='none';
			document.getElementById('withWebFormLiablibilityTbl').style.display='none';
			document.getElementById("tdGPBTTypeLbl").style.display="none";
			document.getElementById("tdGPBTType").style.display="none";
			onChngCmbPmtType(document.getElementById('cmbPaymentType'));
			
			/*document.getElementById("rentIncomeWithRadio1").checked=false;
			document.getElementById("rentIncomeWithRadio2").checked=false;
			document.getElementById("paymentRentIncomeWithRadioForm").style.display="";
			document.getElementById("paymentRentIncomeWithWebForm").style.display="none";
			document.getElementById("paymentRentIncomeWithRegForm").style.display="none";
			document.getElementById("paymentRentIncomeWithExcelUploadForm").style.display="none";*/
		}
		else{
			onChangeCmbTaxType(obj);
			showPagesOnChangeTaxSubHead(obj);
		}
		
	}
	//end
	//Commended and Added by Lawrence on 02/03/2022
	//else if (obj.value==ExciseCashBond)
	else if(obj.value==exciseObligationId)
	{
		document.getElementById('paymentRegExciseCashBond').style.display='none';
	}
	else if (obj.value==ExciseCashBond || obj.value==28 || obj.value==importCertificateObligId || obj.value==foreignAmnestyObligId)
	//End 02/03/2022
	{
		//Added by Lawrence on 02/03/2022
		if(obj.value==50){
			document.getElementById("lblAckNoCashBond").innerHTML='License No.';
			document.getElementById('hidObligationId').value =ExciseCashBond;
			document.getElementById("txtTotalAmountPaidExciseBond").value=0;
			document.getElementById("txtTotalAmountPaidExciseBond").readOnly=true;
		}
		if(obj.value==28){
			document.getElementById("lblAckNoCashBond").innerHTML='Acknowledgment Number.';
			document.getElementById('hidObligationId').value =ExciseCashBond;
			document.getElementById("txtTotalAmountPaidExciseBond").value=0;
			document.getElementById("txtTotalAmountPaidExciseBond").readOnly=true;
		}
		//End 02/03/2022
		
		//changes for import certificate fee

		if (obj.value==importCertificateObligId){
			document.getElementById("lblAckNoCashBond").innerHTML='Acknowledgment Number.';
			document.getElementById('hidObligationId').value = 106;
			document.getElementById("txtTotalAmountPaidExciseBond").value=0;
			document.getElementById("txtTotalAmountPaidExciseBond").readOnly=true;
		}
		
		if (obj.value==foreignAmnestyObligId){
			document.getElementById('hidObligationId').value =foreignAmnestyObligId;
			document.getElementById('cashBondRow').style.display='none';
			document.getElementById("txtTotalAmountPaidExciseBond").value="";
			document.getElementById("txtTotalAmountPaidExciseBond").readOnly=false;
			document.getElementById("txtTotalAmountPaidExciseBond").classList.remove("readonlyInput");
		}
		
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;
			
			if (obj.value==foreignAmnestyObligId){
				if(optionValue==PEN)
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
			}else{
				if(optionValue==DEPOSIT )
				{
					document.getElementById("cmbPaymentType").add(oOption);
				}
			}
		}		
		document.getElementById('cmbPaymentType').selectedIndex=1;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
		document.getElementById("in_exciseCashBondTbl_4").value=""; 
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentRegSpecObligationForm').style.display='none';
		document.getElementById('paymentRegNTRForm').style.display='none';
		document.getElementById('paymentRegExciseCashBond').style.display=''; 
		document.getElementById('totalAmountPaidFieldSet').style.display='none';
		document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
		if (obj.value==foreignAmnestyObligId){
			document.getElementById("hidPaymentType").value=PEN;
		}else{
			document.getElementById("hidPaymentType").value=DEPOSIT;
		}
		document.getElementById("incomeType").style.display='none';
		document.getElementById("incomeTypeTd").style.display='none';
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	else if(obj.value==NSSF)
	{  
		setBeneBankData("Y");
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT)
			{
				oOption.text='NSSF Contribution';
				document.getElementById("cmbPaymentType").add(oOption);
				//document.getElementById("cmbPaymentType").diabled=true;
			}
		}
		document.getElementById('cmbTaxPeriodLbl').innerHTML = 'Contribution Period';
		
		document.getElementById('cmbPaymentType').selectedIndex=1;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));

		document.getElementById("in_exciseCashBondTbl_4").value=""; 
		document.getElementById("txtTotalAmountPaidExciseBond").value=0; 
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentRegSpecObligationForm').style.display='none';
		document.getElementById('paymentRegNTRForm').style.display='none';
		document.getElementById('paymentRegExciseCashBond').style.display='none'; 
		document.getElementById('totalAmountPaidFieldSet').style.display='';
		document.getElementById('hidObligationId').value =NSSF;
		document.getElementById("hidPaymentType").value=SAT;
		// NSSF
		document.getElementById("incomeType").style.display="";
		document.getElementById("incomeTypeTd").style.display="";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		
	}//remove obj.value = stampDutyObligationId from below else if to show AAT only in stampDutyObligationId
	
	else if (obj.value==agencyNotice )
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==DEPOSIT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
		//document.getElementById("in_exciseCashBondTbl_4").value=""; 
		//document.getElementById("txtTotalAmountPaidExciseBond").value=0; 
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentRegSpecObligationForm').style.display='none';
		document.getElementById('paymentRegNTRForm').style.display='none';
		document.getElementById('paymentRegExciseCashBond').style.display='none';
		document.getElementById('paymentRegAgencyNoticeSet').style.display=''; 
		document.getElementById('totalAmountPaidFieldSet').style.display='';
		document.getElementById('hidObligationId').value =agencyNotice;
		document.getElementById("hidPaymentType").value=DEPOSIT;
		document.getElementById("incomeType").style.display='none';
		document.getElementById("incomeTypeTd").style.display='none';
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	else if(obj.value==landRentObligationId || obj.value==standardObligationId||obj.value==sugarObligationId ||  obj.value==widowAndChildrenObligationId || obj.value==GPBTobligationId || obj.value==awwdaId)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;cmbGPBTType
		
		if (obj.value==GPBTobligationId)
			{
			$('#hide1').hide();
			document.getElementById("cmbGPBTType").value="-1";
			}
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			if(obj.value==awwdaId){
				oOption.text="Billing";
			}else{
				oOption.text=optionText;
			}
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}

		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//Added by Jaimin to add AAT in stampDuty on 6 Feb 2020
	else if(obj.value==stampDutyObligationId)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById('totalAmountPaidFieldSet').style.display='';
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;
			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;
			if(optionValue==SAT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			if(optionValue==AAPT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
		//document.getElementById('cmbPaymentType').selectedIndex=1;
		//onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//Ended by Jaimin to add AAT in stampDuty on 6 Feb 2020
	
	//START:::::ADDED FOR PPRA - 07/2024
	else if(obj.value==46)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		
		if (obj.value==GPBTobligationId)
			{
			$('#hide1').hide();
			document.getElementById("cmbGPBTType").value="-1";
			}
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}

		}
		document.getElementById('cmbPaymentType').selectedIndex=1;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
	}
	//END:::::ADDED FOR PPRA - 07/2024
		
	else if(obj.value == VatWithholding)
		{
	document.getElementById("total_VATWithholdeeFormTable_10").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("cmbPaymentType").length=1;
		for(var i=0;i<paymentType.length;i++)
		{
			var oOption=document.createElement("option");
			optionValue=paymentType[i].value;
			optionText=paymentType[i].label;

			oOption.text=optionText;
			oOption.value=optionValue;
			oOption.title=optionText;

			if(optionValue==SAT )
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			if(optionValue==AAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			if(optionValue==EAT)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
			//Modified by Kirui, Mingu and Vincent to allow payment of VTDP START
    		if(optionValue==VTDP)
			{
				document.getElementById("cmbPaymentType").add(oOption);
			}
		}
		
		document.getElementById('cmbPaymentType').selectedIndex=1;
		document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
		document.getElementById('hidObligationId').value = 29;
		onChngCmbPmtType(document.getElementById('cmbPaymentType'));
		document.getElementById("paymentSpecVatWithRadio").style.display="";
		}
	
	if(obj.value!=VatWithholding)
	{
	document.getElementById("total_VATWithholdeeFormTable_10").setAttribute("name", "VatWitholdingTotalAmt");
		document.getElementById("paymentSpecVatWithRadio").style.display='none';
		document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
		document.getElementById("paymentVATWitholdingWebForm").style.display='none';
	}
	if(obj.value!=CGT)
	{
		taxSubHeadValueForPrevRecordCGT=null;
		taxSubHeadValueForPrevRecordForCGT=obj.value;
		//clear_table_data("taxObligationTable");
		//document.getElementById('txtTotalAmountPaidOblig').value=0.0;
	}
	//changes done for CR Monthly Rental Income
	if(obj.value!=rentIncomeCode)
	{
		taxSubHeadValueForPrevRecordMRI=null;
		taxSubHeadValueForPrevRecordForMRI=obj.value;
	}
	//end
	//changes done for CR Amnesty
	if(obj.value!=amnestyCode)
	{
		taxSubHeadValueForPrevRecordAmnesty=null;
		taxSubHeadValueForPrevRecordForAmnesty=obj.value;
	}
	//end
	if(obj.value!=NSSF)
	{  
		setBeneBankData("N");
	}
	if(obj.value==advanceObligationId)
		{
			document.getElementById("navigationTableSplHdr").style.display='none';
			document.getElementById("totalAmountPaidTbl").style.display='none';
		}
	taxSubHeadValueForRecord=obj.value;

	setObligationType();
	//onChangeCmoboClearAlert(document.getElementById("cmbTaxHead"),obj);
	// onChangeComboHidePages();
	
}

function onSelectionOfRadioForSpecOblPmt (specOblPmtTypeRadio){
	  if(specOblPmtTypeRadio=='e')
	  {
		  document.getElementById('paymentExcelUploadForm').style.display ='';
		  document.getElementById('paymentRegWithholdeeSet').style.display='none';
		  document.getElementById('paymentTaxObligForm').style.display='none'; 
		  document.getElementById('splPmtType').value ='e';
		  clear_table_data('withholdeeFormTable');
		  selectedFlagPartial=0;
		  setOtrParamForCSV();
		  clearNevigationData();
		  selectedFlagWithHoldee=0;
		  document.getElementById('excelITWithPmtTypeRadio2').checked=true;
		  amendmentOrNormalITWHT(document.getElementById('excelITWithPmtTypeRadio2'));

	  }
	  else
	  {
		  //Added on 13/09/2024 Withhodling issues
		  if(document.getElementById('cmbTaxSubHead').value=='6'){
			  clear_table_data("vatWithWebFormLiablibilityTbl");
			  clear_table_data("withholdeeWebFormTable");
			  document.getElementById('withholdeeWebFormTable').style.display ='none'; 
			  document.getElementById('vatWithWebFormLiablibilityTbl').style.display ='none'; 			 		 
		  }
		  //End 13/09/2024
		  
		  document.getElementById('splPmtType').value ='n';
		 // onChngCmbPmtType(document.getElementById('cmbPaymentType'));
		  document.getElementById('paymentTaxObligForm').style.display=''; 
		  document.getElementById('paymentExcelUploadForm').style.display ='none';
		  document.getElementById('paymentRegShippingTaxFieldSet').style.display = 'none';
			document.getElementById('paymentRegVISFieldSet').style.display = 'none';
			//Added for VIS payment cancelletion :: 66743
			document.getElementById('pmtCanclVIS').style.display="none";
			document.getElementById('chooseExcelPaymentMethod1').style.display="none";
			//END
			document.getElementById('paymentRegWithholdeeSet').style.display = '';
			document.getElementById('paymentRegTransmissionTaxFieldSet').style.display = 'none';
			document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
			//Added for DAT - 11/2023
			document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
			document.getElementById('paymentRegAgencyNoticeSet').style.display = 'none';
			document.getElementById('TotalTaxFieldSet').style.display = 'none';
			document.getElementById('navigationFieldset').style.display = 'none';
			document.getElementById("txtTotalAmountPaidOblig").value=0;  
			document.getElementById('disclaimerFieldSet').style.display='';
			document.getElementById("txtTotalAmountPaidOblig").readOnly=true;
			document.getElementById("txtTotalAmountPaidOblig").className='readonlyInput form101_textfcurr_width textonlyRight';
			document.getElementById('ObligationDetailFieldSet').style.display = 'none';
			taxObligation=document.getElementById('cmbTaxSubHead').selectedIndex;
			document.getElementById('LiablibilityTbl').style.display = 'none';
			document.getElementById('navigationTable').style.display = 'none';
			document.getElementById("tblFineList").style.display="none";
			document.getElementById("tblIntrestList").style.display="none";
			document.getElementById("tblPaymentList").style.display="none";
			document.getElementById("tblPenaltyList").style.display="none";
			document.getElementById('btnTbl').style.display="";
			rowNumbmerPartial=0;
			selectedFlagPartial=0;
			setOtrParamForCSV();
			clearNevigationData();
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligation("N");
			
		  document.getElementById('paymentExcelUploadForm').style.display ='none';
		  clear_table_data("ITWithPreviousDetailsTable");
			document.getElementById('ITWithPreviousDetailsTable').style.display='none';
			document.getElementById("navigationFieldsetForITWht").style.display = 'none';
			document.getElementById("scrollableDiv1").style.display = 'none';
			document.getElementById("ITWhtPeriodMonth").selectedIndex=-1;
			document.getElementById("ITWhtTaxPeriodYear").selectedIndex=-1;
	  }
}



function onChngCmbPmtType(obj)
{  
	var taxSubHeadValue=document.getElementById("cmbTaxSubHead").value;
	onChangeCmoboClearAlert(document.getElementById("cmbTaxHead").value,document.getElementById("cmbTaxSubHead").value,obj.value);
	var taxHeadValue=document.getElementById("cmbTaxHead").value;
	if(taxHeadValue=="PPP")
	{
		document.getElementById('hidPaymentType').value="PPP";
	}

	//if(obj.value == VTDP)
	if(obj.value == VTDP || obj.value == LEGDBT)
	{
		document.getElementById('paymentTaxObligForm').style.display='';
		clear_Page_data('installmentTable','12');
		clear_table_data('installmentTable');
		document.getElementById('ObligationDetailFieldSet').style.display='none';
		clear_table_data('taxObligationTable');
		clear_Page_data('advanceTaxTable','3');
		clear_table_data('advanceTaxTable');
		convertModifyToAdd('installmentTable');
		selectedFlagInstallment=0;
		document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
		document.getElementById('txtTotalAmountPaidOblig').value=0;
		fetchTotalLiabilityDetailsWeb(true);
		document.getElementById('totalAmountPaidFieldSet').style.display='';
		document.getElementById('hidObligationId').value=document.getElementById('cmbTaxSubHead').value;
		document.getElementById("CmbTaxPeriodLabelTd").style.display='';
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("cmbTaxPeriodYear").style.display='';
		document.getElementById("cmbTaxPeriodMonth").style.display='';
		document.getElementById("paymentRegVISFieldSet").style.display='none';
		//Added for VIS payment cancellation :: 66743
		document.getElementById('pmtCanclVIS').style.display="none";
		document.getElementById('chooseExcelPaymentMethod1').style.display="none";
		//END
		document.getElementById("paymentSpecVatWithRadio").style.display='none';
		document.getElementById("paymentRegShippingTaxFieldSet").style.display='none';
		document.getElementById("TotalTaxFieldSet").style.display='none';
		document.getElementById("disclaimerFieldSet").style.display='none';
		document.getElementById("transmissionTaxTbl").style.display='none';
		document.getElementById("paymentRegTransmissionTaxFieldSet").style.display='none';
	}
	if(obj.value == VTDP && document.getElementById("cmbTaxSubHead").value == advanceObligationId)
	{
		var select = document.getElementById("cmbTaxPeriod");
		var length = select.options.length;
		for(var i = length-1; i>=0;i--){
			select.options[i] = null;
		}
		var oOption = document.createElement("OPTION"); 
		oOption.text="--Select--"; 
		oOption.value="-1"; 
		document.getElementById("cmbTaxPeriod").add(oOption);
	}
	if(taxHeadValue==AUCTION_NOTICE)
	{
		document.getElementById('hidPaymentType').value=AUCTION_NOTICE;
	}

	if(selectedFlagTaxOblig>0)
	{
		// added by chang'masa and raphael for Minimum Tax
		if(obj.value==TIP || obj.value==TAP)
		{
			if(confirm (clearDataConfirm))
			{
				onChageTabClearTaxOblig();
				selectedFlagTaxOblig=0;
				document.getElementById('paymentTaxObligForm').style.display='none';
				document.getElementById('paymentRegSpecObligationForm').style.display='none';
				document.getElementById('paymentRegNTRForm').style.display='none';
				document.getElementById('paymentRegExciseCashBond').style.display='none'; 
				document.getElementById('btnTbl').style.display='';
				document.getElementById('totalAmountPaidFieldSet').style.display='none';
			}
			else if(obj.value==TMT){
				showPagesOnChangeTaxSubHead(document.getElementById("cmbTaxSubHead"));
			}
			else
			{
				alert(cntChangePayType);
				obj.value=SAT; 
				//return false;
			}
		}
	}
	if(selectedFlagAdvanceTax>0)
	{
		if(obj.value==TIP || obj.value==SAT || obj.value== VTDP)
		{
			
			
			if(confirm (clearDataConfirm))
			{
				clear_table_data('advanceTaxTable');
				clear_Page_data('advanceTaxTable','3');
				convertModifyToAdd('advanceTaxTable');
				selectedFlagAdvanceTax=0;
				document.getElementById('paymentTaxObligForm').style.display='none';
				document.getElementById('paymentRegSpecObligationForm').style.display='none';
				document.getElementById('paymentRegNTRForm').style.display='none';
				document.getElementById('paymentRegExciseCashBond').style.display='none'; 
				document.getElementById('btnTbl').style.display='';
				document.getElementById('totalAmountPaidFieldSet').style.display='none';
			}
			else
			{
				alert(cntChangePayType);
				obj.value=TAP; 
				//	return false;
			}
		}
	}
	if(selectedFlagInstallment>0)
	{
		if(obj.value==SAT || obj.value==TAP || obj.value== VTDP)
		{
			if(confirm (clearDataConfirm))
			{
				selectedFlagInstallment=0;
				clear_table_data('installmentTable');
				clear_Page_data('installmentTable','12');
				convertModifyToAdd('installmentTable');
				document.getElementById('paymentTaxObligForm').style.display='none';
				document.getElementById('paymentRegSpecObligationForm').style.display='none';
				document.getElementById('paymentRegNTRForm').style.display='none';
				document.getElementById('paymentRegExciseCashBond').style.display='none'; 
				document.getElementById('btnTbl').style.display='';
				document.getElementById('totalAmountPaidFieldSet').style.display='none';
			}
			else
			{
				alert(cntChangePayType);
				obj.value=TIP; 
				//	return false;
			}
		}
	}
	//changes done for PR
	/*if(flagForCGT>0)
	{
		alert(cntMergeObligationPay)
	}*/
	//end
	/*if((taxSubHeadValue==itResident || taxSubHeadValue==itNonResident|| taxSubHeadValue==compnay|| taxSubHeadValue==partnership|| taxSubHeadValue==turnOver)&& (obj.value==SAT || obj.value==TIP || obj.value== TMT || obj.value== VTDP))*/
	if((taxSubHeadValue==itResident || taxSubHeadValue==itNonResident|| taxSubHeadValue==compnay|| taxSubHeadValue==partnership|| taxSubHeadValue==turnOver)&& (obj.value==SAT || obj.value==TIP || obj.value== TMT || obj.value== VTDP || obj.value == LEGDBT))
	{
		
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display="none";
	}
	else if((taxSubHeadValue==iaLicenseFee||taxSubHeadValue==advanceObligationId)&& (obj.value==SAT || obj.value== VTDP))
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	else if((taxSubHeadValue==payeeCode || taxSubHeadValue==VATCode|| taxSubHeadValue==exciseTaxOblCode||taxSubHeadValue==standardObligationId||taxSubHeadValue==sugarObligationId || taxSubHeadValue==widowAndChildrenObligationId|| taxSubHeadValue==NSSF || taxSubHeadValue==awwdaId) && (obj.value==SAT || obj.value== VTDP))
	{  
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
		else if(obj.value==EAT && taxSubHeadValue==CGT)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='none';
		//document.getElementById('totalAmountPaidFieldSet').style.display="";
		document.getElementById("paymentRegCGTRadioForm").style.display="none";
		document.getElementById("cgtTabViewSet").style.display="none";
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display='none';
		document.getElementById('paymentVATWithAdditionalAssmntForm').style.display='none';
		document.getElementById('paymentCGTAdditionalAssmntForm').style.display="";
		document.getElementById("total_CGTAdditionalAssmntTable_4").setAttribute("name", "CGTTotalAmt");
		
		clearAllVATWthData();
		clearAllCGTWthData();
		clearAllAdditionalAssmntData();
		clearITWHTAssmntData();
	}
	else if(obj.value==AAT && taxSubHeadValue==CGT)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentVATWithAdditionalAssmntForm').style.display='none';
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display='none';
		document.getElementById('paymentCGTAdditionalAssmntForm').style.display="";
		document.getElementById("paymentRegCGTRadioForm").style.display="none";
		document.getElementById("cgtTabViewSet").style.display="none";
	}
	else if(obj.value==SAT && taxSubHeadValue==CGT)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentCGTAdditionalAssmntForm').style.display='none';
	}
	//Added to allow VTDP Payement REGISTRATION
	else if(obj.value==VTDP && taxSubHeadValue==CGT){
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("cmbTaxPeriodYear").style.display="";
		document.getElementById("cmbTaxPeriodMonth").style.display="";
		document.getElementById("tdCmbTaxPeriodYear").style.display="";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('tdCGTTypeLbl').style.display='none';
		document.getElementById('tdCGTType').style.display='none';
		document.getElementById('paymentRegCGTRadioForm').style.display='none';
	}
	else if(obj.value==VTDP && taxSubHeadValue==VatWithholding)
	{
		document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
		document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
		document.getElementById("paymentVATWitholdingWebForm").style.display='none';
		clearAllVATWthData();
		clearAllCGTWthData();
		clearAllAdditionalAssmntData();
		clearITWHTAssmntData();
	}
	else if((taxSubHeadValue==CGT || taxSubHeadValue==PT) && obj.value!=VTDP )
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	else if(taxSubHeadValue==44)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	
	//Start Added for Digital Asset Tax
/*	else if(taxSubHeadValue==45)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}*/
	//End Added for Digital Asset Tax
	
	//changes done for CR Monthly Rental Income
	else if(taxSubHeadValue==rentIncomeCode || taxSubHeadValue==housingLevy || taxSubHeadValue==42 || taxSubHeadValue==TOTFP)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	//end
	//changes done for CR Amnesty
	else if(taxSubHeadValue==amnestyCode)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	//end
	else if(obj.value==AAT && taxSubHeadValue==VatWithholding)
	{
		document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="";
		document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
		document.getElementById("paymentVATWitholdingWebForm").style.display='none';
		clearAllVATWthData();
		clearAllCGTWthData();
		clearAllAdditionalAssmntData();
		clearITWHTAssmntData();
	}
	else if(obj.value==EAT && taxSubHeadValue==VatWithholding)
	{
		document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="";
		document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
		document.getElementById("paymentVATWitholdingWebForm").style.display='none';
		/*ADDED BY Mingu and Bernard :: START*/
		document.getElementById('isAmendment').value='N';
		/*ADDED BY Mingu and Bernard :: END*/
		clearAllVATWthData();
		clearAllCGTWthData();
		clearAllAdditionalAssmntData();
		clearITWHTAssmntData();
	}
	else if((obj.value==SAT) && taxSubHeadValue==VatWithholding)
	{
		document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
		document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
		document.getElementById("paymentVATWitholdingWebForm").style.display='none';
		clearAllVATWthData();
		clearAllCGTWthData();
		clearAllAdditionalAssmntData();
		clearITWHTAssmntData();
	}
	else if(obj.value==AAT && taxSubHeadValue==WithHoldee)
	{
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
	}
	else if(obj.value==EAT && taxSubHeadValue==WithHoldee)
	{	
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
	}
	else if(obj.value==SAT && taxSubHeadValue==WithHoldee)
	{	
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display='none';
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentSpecOblRadioForm").style.display="";
	}
	else if(obj.value== VTDP && taxSubHeadValue==WithHoldee)
	{	
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display='none';
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="";
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentSpecOblRadioForm").style.display="none";
	}
	//chnages doen for CR Rent Income Withholding
	else if(obj.value==SAT && taxSubHeadValue==rentIncomeWith)
	{	document.getElementById('paymentRentIncomeWithAdditionalAssmntForm').style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display='none';
		
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
		//clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentSpecOblRadioForm").style.display="none";
	}
	else if(obj.value==EAT && taxSubHeadValue==rentIncomeWith){
		document.getElementById('paymentTaxObligForm').style.display="none";
		document.getElementById('paymentRentIncomeWithAdditionalAssmntForm').style.display="";
		document.getElementById("paymentRentIncomeWithRadioForm").style.display="none";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
		clearVatWhtAssmntData();
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
	} 
	else if(obj.value==AAT && taxSubHeadValue==rentIncomeWith){
		document.getElementById('paymentTaxObligForm').style.display="none";
		document.getElementById('paymentRentIncomeWithAdditionalAssmntForm').style.display="";
		document.getElementById("paymentRentIncomeWithRadioForm").style.display="none";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
	} 
	else if (taxSubHeadValue == GPBTobligationId) 
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="";
		document.getElementById("tdGPBTType").style.display="";
		$('#hide1').hide();
		document.getElementById("tdGPBTTypeLbl").value="-1";
		document.getElementById("cmbTaxPeriodYearGPBT").value="-1";
		document.getElementById("cmbTaxPeriodMonthGPBT").value="-1";
		document.getElementById("gpbtTurnOverAmount").value="0";
		document.getElementById("gbptPayOutWinning").value="0";
		document.getElementById("gbptRevenueAmount").value="0";
		document.getElementById("gbptTaxAmount").value="0";
		
	}
	//end
	//Added By Jaimin to add AAT and EAT in income tax addition tax
	else if(obj.value==AAT && taxSubHeadValue==advanceObligationId)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentAdvanceTaxAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentRegSpecObligationForm").style.display="none";
		document.getElementById('totalAmountPaidFieldSet').style.display='';
	}
	else if(obj.value==EAT && taxSubHeadValue==advanceObligationId)
	{	
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentAdvanceTaxAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
		clearVatWhtAssmntData();
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentRegSpecObligationForm").style.display="none";
		document.getElementById('totalAmountPaidFieldSet').style.display='';
	}
	//Ended By Jaimin to add AAT and EAT in income tax addition tax
	//Added for EAT and AAT for VAT IMPS ::START
	else if(obj.value==EAT && taxSubHeadValue==VisOblCode)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentRegVISFieldSet').style.display='none';
		document.getElementById('TotalTaxFieldSet').style.display='none';
		document.getElementById('paymentVisAdditionalAssmntForm').style.display="";
		document.getElementById('pmtCanclVIS').style.display="none";
		document.getElementById('disclaimerFieldSet').style.display='none';
		document.getElementById('navigationFieldset').style.display='none';
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
		clearVatWhtAssmntData();
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentRegSpecObligationForm").style.display="none";
		document.getElementById('txtTotalAmountPaidOblig').value=0;
		document.getElementById('totalAmountPaidFieldSet').style.display='';
	}
	else if(obj.value==AAT && taxSubHeadValue==VisOblCode)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentRegVISFieldSet').style.display='none';
		document.getElementById('TotalTaxFieldSet').style.display='none';
		document.getElementById('paymentVisAdditionalAssmntForm').style.display="";
		document.getElementById('pmtCanclVIS').style.display="none";
		document.getElementById('disclaimerFieldSet').style.display='none';
		document.getElementById('navigationFieldset').style.display='none';
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentRegSpecObligationForm").style.display="none";
		document.getElementById('txtTotalAmountPaidOblig').value=0;
		document.getElementById('totalAmountPaidFieldSet').style.display='';
	}
	//Added for EAT and AAT for VAT IMPS ::END
	//Added for EAT and AAT for DAT ::START
	else if(obj.value==EAT && taxSubHeadValue==45)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
		document.getElementById('TotalTaxFieldSet').style.display='none';
		document.getElementById('paymentDatAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping()
		clearAllAdditionalAssmntDataTrnsMs()
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentRegSpecObligationForm").style.display="none";
		document.getElementById('txtTotalAmountPaidOblig').value=0;
		document.getElementById('totalAmountPaidFieldSet').style.display='';
	}
	else if(obj.value==AAT && taxSubHeadValue==45)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
		document.getElementById('TotalTaxFieldSet').style.display='none';
		document.getElementById('paymentDatAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping();
		clearAllAdditionalAssmntDataTrnsMs();
//		clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentRegSpecObligationForm").style.display="none";
		document.getElementById('txtTotalAmountPaidOblig').value=0;
		document.getElementById('totalAmountPaidFieldSet').style.display='';
	}
	//Start : Added for EAT and AAT SEP - 22/07/2025
	else if(obj.value==EAT && taxSubHeadValue==47)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentRegSEPTaxFieldSet').style.display='none';
		document.getElementById('TotalTaxFieldSet').style.display='none';
		document.getElementById('paymentSEPAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping();
		clearAllAdditionalAssmntDataTrnsMs();
		//clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentRegSpecObligationForm").style.display="none";
		document.getElementById('txtTotalAmountPaidOblig').value=0;
		document.getElementById('totalAmountPaidFieldSet').style.display='';
	}
	else if(obj.value==AAT && taxSubHeadValue==47)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('paymentRegSEPTaxFieldSet').style.display='none';
		document.getElementById('TotalTaxFieldSet').style.display='none';
		document.getElementById('paymentSEPAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping();
		clearAllAdditionalAssmntDataTrnsMs();
		//clearFormWithHoldee();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
		document.getElementById("paymentRegSpecObligationForm").style.display="none";
		document.getElementById('txtTotalAmountPaidOblig').value=0;
		document.getElementById('totalAmountPaidFieldSet').style.display='';
	}
	//End : Added for for EAT and AAT SEP - 22/07/2025
	//Start: added for partial payment of Transmission -- 26/03/2025
	else if(obj.value==AAT && taxSubHeadValue==14)
	{	
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentTransmissionAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping();
		clearAllAdditionalAssmntDataTrnsMs();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
	}
	else if(obj.value==EAT && taxSubHeadValue==14)
	{	
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentTransmissionAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearVatWhtAssmntData();
		clearAllAdditionalAssmntDataShipping();
		clearAllAdditionalAssmntDataTrnsMs();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
	}
	else if(obj.value==EAT && taxSubHeadValue==13)
	{	
		document.getElementById('paymentTaxObligForm').style.display='none';
		document.getElementById('paymentShippingAdditionalAssmntForm').style.display="";
		clearWithholdeeExclDtls();
		clearAllAdditionalAssmntDataITWithholding();
		clearAllAdditionalAssmntDataShipping();
		clearAllAdditionalAssmntDataTrnsMs();
		clearVatWhtAssmntData();
		document.getElementById('paymentRegWithholdeeSet').style.display="none";
	}
	//Start: added for partial payment of Transmission -- 26/03/2025
	//Added for EAT and AAT for DAT ::END
	else
	{
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display="none";
		clearAllAdditionalAssmntDataITWithholding();
		document.getElementById('paymentVisAdditionalAssmntForm').style.display="none";
		document.getElementById('paymentDatAdditionalAssmntForm').style.display="none";
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	if(obj.value!=selectOblCode)
	{
		showPagesOnChangeTaxSubHead(document.getElementById("cmbTaxSubHead"));
	}
	if(obj.value==selectOblCode)
	{
		if(obligationRollOutCheck==0){
			alert(selectPaymentType);
			document.getElementById('cmbPaymentType').value=paymentTypeValueForRecord;
		}else{
			document.getElementById('cmbPaymentType').selectedIndex=0;
		}

		return false;
	}
	paymentTypeValueForRecord=obj.value;
	document.getElementById('hidPaymentType').value = document.getElementById('cmbPaymentType').value;
	
	
	if(obj.value == TMT)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="";
		document.getElementById('paymentRegMinimumTaxFieldSet').style.display="";
		//showPagesOnChangeTaxSubHead(document.getElementById("cmbTaxSubHead"));
	}
	//START:::::07/2024 FOR PPRA
	else if((taxSubHeadValue==46))
	{  
		alert("------");
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementByd("tdCmbTaxPeriodYear").style.display="";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	//END:::::07/2024 FOR PPRA
	
	//START SEP 81171 ::Start
	else if(taxSubHeadValue==47)
	{
		document.getElementById("CmbTaxPeriodLabelTd").style.display="";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="";
		document.getElementById("noTaxPeriodTd").style.display="none";
		document.getElementById("noTaxPeriodTd1").style.display="none";
		document.getElementById("tdGPBTTypeLbl").style.display="none";
		document.getElementById("tdGPBTType").style.display="none";
	}
	//START SEP 81171 ::End



}

function showPagesOnChangeTaxSubHead(obj)
{	
	var taxHeadValue=document.getElementById("cmbTaxHead").value;
	var paymentTypeValue=document.getElementById("cmbPaymentType").value;
	var taxSubHead = document.getElementById("cmbTaxSubHead").value;
	//Added by jaimin to disable this form 
	document.getElementById("paymentRegpreviouslyPaidPRNForm").style.display='none';
	//Endded by jaimin to disable this form
	if(taxHeadValue==IT || taxHeadValue==VAT ||  taxHeadValue==EXCISE || (taxHeadValue==AGENCY_REVENUE && obj.value==NSSF)||  obj.value==NSSF)
	{
		//added by Mingu for Legacy Debt Payment :: START
		if(paymentTypeValue==LEGDBT){
			document.getElementById("paymentTaxObligForm").style.display='';
			document.getElementById('totalAmountPaidFieldSet').style.display='';
			document.getElementById("paymentRegSpecObligationForm").style.display="none";
			document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
			document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
			document.getElementById('paymentRegNTRForm').style.display='none';
			document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
			taxSubHeadValueForPrevRecord=obj.value;
			onChangeCmbTaxType(obj);
		}
		//added by Mingu for Legacy Debt Payment :: END
		if(paymentTypeValue==SAT)
		{
			if(obj.value!=advanceObligationId && obj.value!=exciseObligationId)
			{
				document.getElementById("paymentTaxObligForm").style.display="";
				document.getElementById('totalAmountPaidFieldSet').style.display='';
				document.getElementById("paymentRegSpecObligationForm").style.display="none";
				document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
				document.getElementById('paymentRegNTRForm').style.display='none';
				document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
				taxSubHeadValueForPrevRecord=obj.value;
				onChangeCmbTaxType(obj);
				
				
			}
			else
			{
				if( obj.value==advanceObligationId && (selectedFlagShipping==0 && selectedFlagCable==0 && selectedFlagVis==0 && selectedFlagWithHoldee==0))
				{
					document.getElementById("paymentTaxObligForm").style.display="none";
					document.getElementById("paymentRegSpecObligationForm").style.display="";
					document.getElementById('totalAmountPaidFieldSet').style.display='none';
					document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
					document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
					document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
					taxSubHeadValueForPrevRecord=obj.value;
					onChangeSpecObligDetails(obj);
					//changes done for Enhancement 1
					if(obj.value==advanceObligationId)
					{
						document.getElementById("totalAmountPaidTbl").style.display='none';
					}
					/*else
					{*/
						document.getElementById("AdvanceTaxpaymentRadioDiv").style.display='none';
						//document.getElementById("AdvanceTaxpaymentstDiv").style.display='none';

					/*}*/
					//end
				}
				if( obj.value==exciseObligationId && selectedFlagTaxOblig==0)
				{
					document.getElementById("paymentTaxObligForm").style.display="none";
					document.getElementById("paymentRegSpecObligationForm").style.display="none";
					document.getElementById('totalAmountPaidFieldSet').style.display='none';
					document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
					document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
					document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
					document.getElementById('paymentRegNTRForm').style.display='';
					specialTaxObligation=document.getElementById('cmbTaxSubHead').selectedIndex;
					document.getElementById('paymentRegExciseLicenseDiv').style.display='';
					//	getFistAndNextYearWebForNtr();
				}
				else if(selectedFlagTaxOblig>0 || selectedFlagShipping>0 || selectedFlagCable>0 || selectedFlagVis>0 || selectedFlagWithHoldee>0 || selectedFlagRentIncomeWithHoldee>0)
				{
					alert(cntMergeObligation);
					document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
					document.getElementById("CmbTaxPeriodTd").style.display="none";
					document.getElementById("tdCmbTaxPeriodYear").style.display="none";
					document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
					document.getElementById("noTaxPeriodTd").style.display="";
					document.getElementById("noTaxPeriodTd1").style.display="";
					document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecord;
					return false;
				}
			}
		}
		if(paymentTypeValue==TIP)
		{
			
			clearSpecObligationData();
			document.getElementById('navigationFieldset').style.display='none';
			document.getElementById('ObligationDetailFieldSet').style.display='none';
			document.getElementById('showTaxObligationTable').style.display='none';
			document.getElementById('taxObligationTable').style.display='none';

			document.getElementById("paymentRegSpecObligationForm").style.display="none";

			document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
			document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
			document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
			document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
			//Added for DAT - 11/2023
			document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
			document.getElementById('paymentRegVISFieldSet').style.display='none';
			//Added for VIS payment cancelletion :: 66743
			document.getElementById('pmtCanclVIS').style.display="none";
			document.getElementById('chooseExcelPaymentMethod1').style.display="none";
			//END
			document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
			document.getElementById('paymentRegWithholdeeSet').style.display='none';
			document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
			document.getElementById('TotalTaxFieldSet').style.display='none';
			document.getElementById('disclaimerFieldSet').style.display='none';
			document.getElementById('paymentRegNTRForm').style.display='none';
			fetchTaxPeriod();
			document.getElementById("cmbTaxPeriod").selectedIndex=1;
			var taxPeriodValue=document.getElementById("cmbTaxPeriod").value;
			document.getElementById("cmbTaxPeriod").selectedIndex=0;
			if(taxPeriodValue!=''){
				var taxPeriodValueArr =taxPeriodValue.split('-');
				var fromDate=taxPeriodValueArr[0];
				var toDate=taxPeriodValueArr[1];
				if(checkInstallmentRollOut(fromDate,toDate)){
					document.getElementById("paymentTaxObligForm").style.display="";
					document.getElementById('totalAmountPaidFieldSet').style.display='';
					document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='';
				}
			}

		}
		//start add minimum tax by chang'masa and raphael and mingu
		if(paymentTypeValue==TMT)
		{
			clearSpecObligationData();
			document.getElementById('navigationFieldset').style.display='none';
			document.getElementById('ObligationDetailFieldSet').style.display='none';
			document.getElementById('showTaxObligationTable').style.display='none';
			document.getElementById('taxObligationTable').style.display='none';

			document.getElementById("paymentRegSpecObligationForm").style.display="none";
			document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
			document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
			document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
			document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
			//Added for DAT - 11/2023
			document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
			document.getElementById('paymentRegVISFieldSet').style.display='none';
			//Added for VIS payment cancelletion :: 66743
			document.getElementById('pmtCanclVIS').style.display="none";
			document.getElementById('chooseExcelPaymentMethod1').style.display="none";
			//END
			document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
			document.getElementById('paymentRegWithholdeeSet').style.display='none';
			document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
			document.getElementById('TotalTaxFieldSet').style.display='none';
			document.getElementById('disclaimerFieldSet').style.display='none';
			document.getElementById('paymentRegNTRForm').style.display='none';
			fetchTaxPeriod();
			document.getElementById("cmbTaxPeriod").selectedIndex=1;
			var taxPeriodValue=document.getElementById("cmbTaxPeriod").value;
			//document.getElementById("cmbTaxPeriod").selectedIndex=0;
			if(taxPeriodValue!=''){
				var taxPeriodValueArr =taxPeriodValue.split('-');
				var fromDate=taxPeriodValueArr[0];
				var toDate=taxPeriodValueArr[1];
				if(checkInstallmentRollOut(fromDate,toDate)){
					document.getElementById("paymentTaxObligForm").style.display="";
					document.getElementById('totalAmountPaidFieldSet').style.display='';
					document.getElementById('paymentRegMinimumTaxFieldSet').style.display='';
				}
			}
			document.getElementById("paymentTaxObligForm").style.display="";
			document.getElementById('totalAmountPaidFieldSet').style.display='';
			document.getElementById('paymentRegMinimumTaxFieldSet').style.display='';


		}
		//end for minumum tax
		if(paymentTypeValue==TAP)
		{
			clearSpecObligationData();
			document.getElementById('navigationFieldset').style.display='none';
			document.getElementById('ObligationDetailFieldSet').style.display='none';
			document.getElementById('showTaxObligationTable').style.display='none';
			document.getElementById('taxObligationTable').style.display='none';
			document.getElementById("paymentRegSpecObligationForm").style.display="none";
			document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
			document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
			document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
			document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
			//Added for DAT - 11/2023
			document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
			document.getElementById('paymentRegVISFieldSet').style.display='none';
			//Added for VIS payment cancelletion :: 66743
			document.getElementById('pmtCanclVIS').style.display="none";
			document.getElementById('chooseExcelPaymentMethod1').style.display="none";
			//END
			document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
			document.getElementById('paymentRegWithholdeeSet').style.display='none';
			document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
			document.getElementById('TotalTaxFieldSet').style.display='none';
			document.getElementById('paymentRegNTRForm').style.display='none';
			document.getElementById('disclaimerFieldSet').style.display='none';
			var toDate=document.getElementById('serverDate').value;
			var fromDate=document.getElementById('serverDate').value;
			if(checkInstallmentRollOut(fromDate,toDate)){
				document.getElementById("paymentTaxObligForm").style.display="";
				document.getElementById('totalAmountPaidFieldSet').style.display='';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='';
			}
		}
		//added by BEN Ticket 79025 for DST 
		if(paymentTypeValue==PEN && obj.value==44){
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligation("N");
			document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
			document.getElementById("txtTotalAmountPaidOblig").value = "0";
			
		}
		//added by BEN Ticket 77089 for DAT
		if(paymentTypeValue==PEN && obj.value==45){
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligation("N");
			document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
			document.getElementById("txtTotalAmountPaidOblig").value = "0";
			
		}
		//added for SEP #81171 START
		if(paymentTypeValue==PEN && obj.value==47){
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligation("N");
			document.getElementById('paymentRegSEPTaxFieldSet').style.display='none';
			document.getElementById("txtTotalAmountPaidOblig").value = "0";
			
		}
		//added for SEP #81171 END

		
	}
	if(taxHeadValue==NTR)
	{
		if( obj.value==iaLicenseFee)
		{
			document.getElementById("paymentTaxObligForm").style.display="none";
			document.getElementById("paymentRegSpecObligationForm").style.display="none";
			document.getElementById('totalAmountPaidFieldSet').style.display='none';
			document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
			document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
			document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
			document.getElementById('paymentRegNTRForm').style.display='';
			getFistAndNextYearWebForNtr();
		}
	}
	if(taxHeadValue==AGENCY_REVENUE)
	{
		document.getElementById("paymentTaxObligForm").style.display="none";
		//Added by Jaimin for Additional Assessment / Penalty in stamp duty 
		if(paymentTypeValue==AAPT){
			document.getElementById('totalAmountPaidFieldSet').style.display='none';
			document.getElementById("paymentRegSpecObligationForm").style.display='none';
			document.getElementById("paymentRegpreviouslyPaidPRNForm").style.display="";
		}else{
		document.getElementById("paymentRegSpecObligationForm").style.display="";
		document.getElementById('totalAmountPaidFieldSet').style.display='none';
			onChangeSpecObligDetails(obj);
		}
		//Ended by Jaimin for Additional Assessment / Penalty in stamp duty
		//document.getElementById("paymentRegSpecObligationForm").style.display="";
		//document.getElementById('totalAmountPaidFieldSet').style.display='none';
		document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
		document.getElementById('paymentRegMinimumTaxFieldSet').style.display='none';
		document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
		//onChangeSpecObligDetails(obj);
	}
	if(taxSubHead==VatWithholding)
		{
			document.getElementById('txtTotalAmountPaidOblig').value=0;
			document.getElementById('totalAmountPaidFieldSet').style.display='none';
			if(paymentTypeValue==AAT)
				{
					document.getElementById('totalAmountPaidFieldSet').style.display='';
				document.getElementById("total_VATWithholdeeFormTable_10").setAttribute("name", "VatWitholdingTotalAmt");
					document.getElementById('paymentTaxObligForm').style.display='';
					document.getElementById("paymentSpecVatWithRadio").style.display="none";
					document.getElementById("specOblVATWithPmtTypeRadio1").checked=false;
					document.getElementById("specOblVATWithPmtTypeRadio2").checked=false;
				}
			if(paymentTypeValue==EAT)
			{
				document.getElementById('totalAmountPaidFieldSet').style.display='';
			document.getElementById("total_VATWithholdeeFormTable_10").setAttribute("name", "VatWitholdingTotalAmt");
				document.getElementById('paymentTaxObligForm').style.display='';
				document.getElementById("paymentSpecVatWithRadio").style.display="none";
				document.getElementById("specOblVATWithPmtTypeRadio1").checked=false;
				document.getElementById("specOblVATWithPmtTypeRadio2").checked=false;
			}
		}

}
function onChangeCmbYear()
{
	if(onChangeYearValidation())
	{
		var taxHeadValue=document.getElementById("cmbTaxHead").value;
		var paymentTypeValue=document.getElementById("cmbPaymentType").value;
		var taxSubHeadValue=document.getElementById("cmbTaxSubHead").value;
		if((taxHeadValue==IT ||taxHeadValue==VAT ||taxHeadValue==EXCISE || taxHeadValue==OTHER) && taxSubHeadValue!=advanceObligationId && paymentTypeValue==SAT)
		{
			getSelectedMonthOfSelectedYearWeb('cmbTaxPeriodYear','cmbTaxPeriodMonth','false');
		}else if (taxHeadValue==AGENCY_REVENUE)
			{
					if (taxSubHeadValue==GPBTobligationId)
					{
					getSelectedMonthOfSelectedYearWeb('cmbTaxPeriodYearGPBT','cmbTaxPeriodMonthGPBT','false');
					}
					else if (taxSubHeadValue==housingLevy){
						
						getSelectedMonthOfSelectedYearWeb('cmbTaxPeriodYear','cmbTaxPeriodMonth','true');
					}
					else if (taxSubHeadValue==42){
						
						/*65216 NITA SAT with no PAYE :: START*/
						if(document.getElementById("hidIsPayeRegistered").value == "N"
							|| paymentTypeValue == NITAR){
							getSelectedMonthOfSelectedYearWeb('cmbTaxPeriodYear','cmbTaxPeriodMonth','false');

						}else{
							
						getSelectedMonthOfSelectedYearWeb('cmbTaxPeriodYear','cmbTaxPeriodMonth','true');
						
						}
						/*65216 NITA SAT with no PAYE :: END*/
						//commented for 65216
						//getSelectedMonthOfSelectedYearWeb('cmbTaxPeriodYear','cmbTaxPeriodMonth','true');

						
					}
					else 
					{
						getSelectedMonthOfSelectedYearWeb('cmbTaxPeriodYear','cmbTaxPeriodMonth','false');
					}
			}
	}
}

function onChangeCmbTaxPriod(obj)
{   
	var taxHeadValue=document.getElementById("cmbTaxHead").value;
	var paymentTypeValue=document.getElementById("cmbPaymentType").value;
	var taxSubHeadValue=document.getElementById("cmbTaxSubHead").value;
	var period ='';
	/*65216 NITA SAT with no PAYE :: START*/
	var isPayerRegistered = document.getElementById("hidIsPayeRegistered").value ;

	/*65216 NITA SAT with no PAYE :: END*/
	if(taxHeadValue==IT ||taxHeadValue==VAT ||taxHeadValue==EXCISE || (taxHeadValue==AGENCY_REVENUE && (taxSubHeadValue==NSSF||taxSubHeadValue==housingLevy||taxSubHeadValue==42)))
	{	
		
		if(paymentTypeValue==SAT ||(paymentTypeValue==PEN && taxSubHeadValue== housingLevy))
		{ 
			//START:::Modified for DAT - 45 AND SEP- 47
			if(taxSubHeadValue!=advanceObligationId && taxSubHeadValue!=exciseObligationId  && taxSubHeadValue!=44 && taxSubHeadValue!=45 && taxSubHeadValue!=47/*&& taxSubHeadValue!=rentIncomeCode*/)
			{ 
				/*65216 NITA SAT with no PAYE :: START*/
				if(isPayerRegistered == " " || isPayerRegistered == "Y"){
				/*65216 NITA SAT with no PAYE :: END*/
				fetchObligationDTL(obj.value);
				/*65216 NITA SAT with no PAYE :: START*/
				}else if(42 == taxSubHeadValue){
					liabilityDetailsNitar(obj.value,isPayerRegistered);	
				}
				/*65216 NITA SAT with no PAYE :: END*/
			}
			if(taxSubHeadValue==advanceObligationId)
			{
				/*document.getElementById("paymentTaxObligForm").style.display="none";
				document.getElementById("paymentRegSpecObligationForm").style.display="";
				document.getElementById('totalAmountPaidFieldSet').style.display='none';
				onChangeSpecObligDetails(obj);*/
				var table=document.getElementById("advanceTable");
				var length=table.rows.length;
					
					if(length<=1)
						{
						displayAdvObligRadio();
						}
					else
						{
						var  tableObj =document.getElementById('advanceTable');
						for(var i = 1, n = tableObj.rows.length; i <n; i++) 
						{
							if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted'){
								if (document.all) {// for IE
									period = tableObj.rows[i].cells[3].innerText;
								}
								else{
									var innrhtmltext = tableObj.rows[i].cells[3].textContent;
									period = innrhtmltext; 
								}
								if(period !=obj.value){
									alert("You can add only 1 Tax Period during payment Registration");
									document.getElementById('cmbTaxPeriod').value=period;
									var desiredValue = period;
										var el = document.getElementById("cmbTaxPeriod");
										for(var i=0; i<el.options.length; i++) {
										  if ( el.options[i].text == desiredValue ) {
										    el.selectedIndex = i;
										    break;
										  }
										}
									break;
								}
								
								
							}

						}
						
						}
			}
			if(taxSubHeadValue==exciseObligationId)
			{
				//	fetchNtrAmount(obj.value);
			}
			
			if(taxSubHeadValue==44)
			{
				if(document.getElementById("cmbTaxPeriodYear").value==-1 || document.getElementById("cmbTaxPeriodYear").value==0)
				{
					document.getElementById(month).disabled=true;
					alert("Please Select valid year for tax period");
					return false;
				}
				document.getElementById('paymentRegDTSTaxFieldSet').style.display = '';
				var period = document.getElementById('cmbTaxPeriodMonth').value;
				var taxPeriodValueArr =period.split('-');
				document.getElementById('DSTFromDate').value=taxPeriodValueArr[0];
				document.getElementById('DTSToDate').value=taxPeriodValueArr[1];

				document.getElementById('DTS_Rate').value=document.getElementById('DTSRate').value;
				document.getElementById('DST_FromDate').value=taxPeriodValueArr[0];
				document.getElementById('DTS_ToDate').value=taxPeriodValueArr[1];
				
			} 
			
			//START::::Added for DAT 11/2023
			if(taxSubHeadValue==45)
			{
				 
				if(document.getElementById("cmbTaxPeriodYear").value==-1 || document.getElementById("cmbTaxPeriodYear").value==0)
				{
					document.getElementById(month).disabled=true;
					alert("Please Select valid year for tax period");
					return false;
				}
				document.getElementById('paymentRegDATTaxFieldSet').style.display = '';
				var period = document.getElementById('cmbTaxPeriodMonth').value;
				var taxPeriodValueArr =period.split('-');
				document.getElementById('DATFromDate').value=taxPeriodValueArr[0];
				document.getElementById('DATToDate').value=taxPeriodValueArr[1];

				document.getElementById('DAT_Rate').value=document.getElementById('DATRate').value;
				document.getElementById('DAT_FromDate').value=taxPeriodValueArr[0];
				document.getElementById('DAT_ToDate').value=taxPeriodValueArr[1];
				
			}
			//END::::Added for DAT 11/2023
			
			//START::::Added for SEP #81171
			if(taxSubHeadValue==47)
			{
				if(document.getElementById("cmbTaxPeriodYear").value==-1 || document.getElementById("cmbTaxPeriodYear").value==0)
				{
					document.getElementById(month).disabled=true;
					alert("Please Select valid year for tax period");
					return false;
				}
				document.getElementById('paymentRegSEPTaxFieldSet').style.display = '';
				var period = document.getElementById('cmbTaxPeriodMonth').value;
				var taxPeriodValueArr =period.split('-');
				document.getElementById('SEPFromDate').value=taxPeriodValueArr[0];
				document.getElementById('SEPToDate').value=taxPeriodValueArr[1];

				document.getElementById('SEP_Rate').value=document.getElementById('SEPRate').value;
				document.getElementById('SEP_FromDate').value=taxPeriodValueArr[0];
				document.getElementById('SEP_ToDate').value=taxPeriodValueArr[1];
				
			}
			
			//START::::Added for SEP #81171
		}
		
		else if(paymentTypeValue==TAP || paymentTypeValue==TIP || paymentTypeValue == TMT){ // added by mingu. ralph chang 02/02/2021
			var taxPeriodArr = obj.value.split("-");
			var frmDate = taxPeriodArr[0];
			var toDate = taxPeriodArr[1];

			document.getElementById('in_installmentTable_10').value = frmDate;
			document.getElementById('in_installmentTable_11').value = toDate;

			//values set for Advance Tax
			document.getElementById('in_advanceTaxTable_7').value = frmDate;
			document.getElementById('in_advanceTaxTable_8').value = toDate;
			
			// values for minimumTax added by mingu. ralph chang 02/02/2021
			document.getElementById('in_MinimumTable_10').value = frmDate;
			document.getElementById('in_MinimumTable_11').value = toDate;
			// end added by mingu. ralph chang 02/02/2021
		} 
		/*65215*/
		else if(paymentTypeValue==NITAR){
			/*document.getElementById('txtTotalAmountPaidOTR').readOnly=false;
			document.getElementById('txtTotalAmountPaidOTR').value=''; 
			document.getElementById('lblasterisk').hidden=true;
			document.getElementById('lblTotalAmountPayable').hidden=true; 
			document.getElementById('txtTotalAmountPayableOTR').hidden=true;*/
			liabilityDetailsNitar(obj.value, '');
		}
		/*65215*/
	}
	if(taxHeadValue==NTR)
	{
		if( taxSubHeadValue==iaLicenseFee)
		{
			fetchNtrAmount(obj.value);
		}
	}
	//ADDED BY Mingu for iTax - KEBS integration :: START
	if(taxSubHeadValue == standardObligationId){
		var pinNo = document.getElementById('txtPin').value;
		var year = document.getElementById('cmbTaxPeriodYear').value;
		var month = document.getElementById('cmbTaxPeriodMonth').value;
		FetchTaxpayerDetailWithoutValidationSplObl.fetchKebsPenaltyDetails(pinNo,month,year,
				{async:false, callback:function(data){
					if(data != null){
						document.getElementById('in_standardLevyDtl1_9').value=data.penaltyAmount;
						document.getElementById('in_standardLevyDtl1_16').value=data.penaltyOrderNo;
						onChangeCalcAdjutStd();
					}
				}});
		
	}
	//ADDED BY Mingu for iTax - KEBS integration :: END
	if(taxHeadValue==AGENCY_REVENUE)
	{
		onChangeCmbOtrPeriod();
	}
	if(taxSubHeadValue==NSSF)
	{

		var len=0;
		var table=document.getElementById("taxObligationTable");
		var len=table.rows.length;
		if(len>1)
		{
			/*document.getElementById("taxObligationTable").style.display='';
			document.getElementById("ObligationDetailHeading").style.display='';*/
			document.getElementById("ObligationDetailFieldSet").style.display='';
		}
		else
		{
			
			/*document.getElementById("taxObligationTable").style.display='none';
			document.getElementById("ObligationDetailHeading").style.display='none';*/
			document.getElementById("ObligationDetailFieldSet").style.display='none';
		}
		
		document.getElementById('navigationFieldset').style.display='none';
		document.getElementById('incomeTypeTd').style.display='';
		document.getElementById('incomeType').style.display='';
		document.getElementById('cmbIncomeType').selectedIndex=0;
		//document.getElementById('incomeType').selectedIndex=-1;
	}
}
function onChangeComboHidePages()
{
	var taxHeadValue=document.getElementById("cmbTaxHead").value;
	var paymentTypeValue=document.getElementById("cmbPaymentType").value;
	var taxSubHeadValue=document.getElementById("cmbTaxSubHead").value;
	if(taxHeadValue==IT)
	{
		if(selectedFlagAdvanceTax>0)
		{
			if(taxSubHeadValue==itResident || taxSubHeadValue==itNonResident|| taxSubHeadValue==compnay|| taxSubHeadValue==partnership|| taxSubHeadValue==turnOver||taxSubHeadValue==payeeCode || taxSubHeadValue==VATCode|| taxSubHeadValue==exciseTaxOblCode || taxSubHeadValue==rentIncomeCode || taxSubHeadValue==amnestyCode)
			{
				document.getElementById("paymentTaxObligForm").style.display="";
				document.getElementById('totalAmountPaidFieldSet').style.display='';
				document.getElementById("paymentRegSpecObligationForm").style.display="none";
				document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='';
				document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
				document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
				//Added for DAT - 11/2023
				document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
				document.getElementById('paymentRegVISFieldSet').style.display='none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
				document.getElementById('paymentRegWithholdeeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('TotalTaxFieldSet').style.display='none';
				document.getElementById('disclaimerFieldSet').style.display='none';
			}
			else
			{
				document.getElementById("paymentTaxObligForm").style.display="none";
				document.getElementById('totalAmountPaidFieldSet').style.display='none';
				document.getElementById("paymentRegSpecObligationForm").style.display="none";
				document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
				document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
				document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
				document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
				//Added for DAT - 11/2023
				document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
				document.getElementById('paymentRegVISFieldSet').style.display='none';
				//Added for VIS payment cancelletion :: 66743
				document.getElementById('pmtCanclVIS').style.display="none";
				document.getElementById('chooseExcelPaymentMethod1').style.display="none";
				//END
				document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
				document.getElementById('paymentRegWithholdeeSet').style.display='none';
				document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
				document.getElementById('TotalTaxFieldSet').style.display='none';
				document.getElementById('disclaimerFieldSet').style.display='none';
				showPagesOnChangeTaxSubHead(document.getElementById("cmbTaxSubHead"));
			}
		}
		else
		{
			document.getElementById("paymentTaxObligForm").style.display="none";
			document.getElementById('totalAmountPaidFieldSet').style.display='none';
			document.getElementById("paymentRegSpecObligationForm").style.display="none";
			document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
			document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
			document.getElementById('paymentRegTransmissionTaxFieldSet').style.display='none';
			document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
			//Added for DAT - 11/2023
			document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
			document.getElementById('paymentRegVISFieldSet').style.display='none';
			//Added for VIS payment cancelletion :: 66743
			document.getElementById('pmtCanclVIS').style.display="none";
			document.getElementById('chooseExcelPaymentMethod1').style.display="none";
			//END
			document.getElementById('paymentRegShippingTaxFieldSet').style.display='none';
			document.getElementById('paymentRegWithholdeeSet').style.display='none';
			document.getElementById('paymentRegAgencyNoticeSet').style.display='none';
			document.getElementById('TotalTaxFieldSet').style.display='none';
			document.getElementById('disclaimerFieldSet').style.display='none';
			//	showPagesOnChangeTaxSubHead(document.getElementById("cmbTaxSubHead"));
		}
	}
	if(selectedFlagTaxOblig>0)
	{
		if(taxSubHeadValue==itResident || taxSubHeadValue==itNonResident|| taxSubHeadValue==compnay|| taxSubHeadValue==partnership|| taxSubHeadValue==turnOver||taxSubHeadValue==payeeCode || taxSubHeadValue==VATCode|| taxSubHeadValue==exciseTaxOblCode || taxSubHeadValue==rentIncomeCode || taxSubHeadValue==amnestyCode)
		{
			onChangeCmbTaxType(document.getElementById("cmbTaxSubHead"));
		}
	}
}
//var x=confirm ("This action will clear your entered data.\nDo you really want to proceed?");
function onChangeCmoboClearAlert(taxHead,taxSubHead,paymentType)
{
	if(taxHead != "" && taxSubHead==undefined && paymentType==undefined)
	{
		if(selectedFlagTaxOblig>0)
		{
			if(taxHead==AGENCY_REVENUE || taxHead==OTHER )
			{
				var x=confirm ("This action will clear your entered data.\nDo you really want to proceed?");
				if(x)
				{

				}
			}
		}
	}
	if(taxHead != "" && taxSubHead!="" && paymentType==undefined)
	{
		if(selectedFlagAdvance>0|| selectedFlagShipping>0 || selectedFlagCable>0 || selectedFlagVis>0 || selectedFlagWithHoldee>0 || selectedFlagRentIncomeWithHoldee>0)
		{
			document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecord;
			return false;
		}
		
		//changes done for CR Monthly Rental Income
		var  tableObj =document.getElementById('taxObligationTable');
		var len=tableObj.rows.length;
		if(len>1)
		{
			for(var i = 1, n = tableObj.rows.length; i <n; i++) 
			{
				if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted')
				{
					if((tableObj.rows[i].cells[3].textContent.indexOf('0111')!=-1) || ((tableObj.rows[i].cells[3].innerText!=null && tableObj.rows[i].cells[3].innerText.indexOf('0111')!=-1)))
					{
						if (document.all) {// for IE
							isMergeMRI=0;
						}
						else{
							isMergeMRI=0;
						}
					}
				}
				else
				{
					isMergeMRI=1;
				}
			}
		}
		else
		{
			isMergeMRI=1;
		}
		if(isMergeMRI==0)
		{
			if(document.getElementById('cmbTaxSubHead').value!=rentIncomeCode){
				flagForMRI=1;
				if(document.getElementById('cmbTaxHead').value==IT)
					document.getElementById('cmbTaxSubHead').value=rentIncomeCode;
				else{
					/*document.getElementById('cmbTaxSubHead').selectedIndex=0;
					document.getElementById('cmbPaymentType').selectedIndex=0;*/
					document.getElementById('cmbTaxHead').value=IT;
					onChangeCmbTaxHead(document.getElementById('cmbTaxHead'));
					document.getElementById('cmbTaxSubHead').value=rentIncomeCode;
					return false;
				}
			}
		}
		else if(isMergeMRI==1)
		{
			flagForMRI=0;
		}
		//end
		
		//chnages done for CR Amnesty
		var  tableObj =document.getElementById('taxObligationTable');
		var len=tableObj.rows.length;
		if(len>1)
		{
			for(var i = 1, n = tableObj.rows.length; i <n; i++) 
			{
				if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted')
				{
					if((tableObj.rows[i].cells[3].textContent.indexOf('0112')!=-1) || (tableObj.rows[i].cells[3].innerText.indexOf('0112')!=-1))
					{
						if (document.all) {// for IE
							isMergeAmnesty=0;
						}
						else{
							isMergeAmnesty=0;
						}
					}
				}
				else
				{
					isMergeAmnesty=1;
				}
			}
		}
		else
		{
			isMergeAmnesty=1;
		}
		if(isMergeAmnesty==0)
		{
			if(document.getElementById('cmbTaxSubHead').value!=amnestyCode){
				flagForAmnesty=1;
				if(document.getElementById('cmbTaxHead').value==IT)
					document.getElementById('cmbTaxSubHead').value=amnestyCode;
				else{
					/*document.getElementById('cmbTaxSubHead').selectedIndex=0;
					document.getElementById('cmbPaymentType').selectedIndex=0;*/
					document.getElementById('cmbTaxHead').value=IT;
					onChangeCmbTaxHead(document.getElementById('cmbTaxHead'));
					document.getElementById('cmbTaxSubHead').value=amnestyCode;
					return false;
				}
			}
		}
		else if(isMergeAmnesty==1)
		{
			flagForAmnesty=0;
		}
		//end
		//changes done for PR
		var  tableObj =document.getElementById('taxObligationTable');
		var len=tableObj.rows.length;
		if(len>1)
		{
			for(var i = 1, n = tableObj.rows.length; i <n; i++) 
			{
				if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted')
				{
					if((tableObj.rows[i].cells[3].textContent.indexOf('0110')!=-1) || ((tableObj.rows[i].cells[3].innerText!=null && tableObj.rows[i].cells[3].innerText.indexOf('0110')!=-1)))
					{
						if (document.all) {// for IE
							isMergeCGT=0;
							//document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordCGT;
							//return false;
						}
						else{
							isMergeCGT=0;
							//document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForPrevRecordCGT;
							//return false;
						}
					}
				}
				else
				{
					isMergeCGT=1;
				}
			}
		}
		else
		{
			isMergeCGT=1;
		}
		if(isMergeCGT==0)
		{
			if(document.getElementById('cmbTaxSubHead').value!=CGT){
				flagForCGT=1;
				if(document.getElementById('cmbTaxHead').value==IT)
					document.getElementById('cmbTaxSubHead').value=CGT;
				else{
					/*document.getElementById('cmbTaxSubHead').selectedIndex=0;
					document.getElementById('cmbPaymentType').selectedIndex=0;*/
					document.getElementById('cmbTaxHead').value=IT;
					onChangeCmbTaxHead(document.getElementById('cmbTaxHead'));
					document.getElementById('cmbTaxSubHead').value=CGT;
					return false;
				}
			}
		}
		else if(isMergeCGT==1)
		{
			flagForCGT=0;
		}
		//end

	}
	if(taxHead != "" && taxSubHead!="" && paymentType!="")
	{
		if(taxHead==IT || taxHead==VAT || taxHead==EXCISE)
		{
			if(selectedFlagTaxOblig>0)
			{
				if(taxSubHead==WithHoldee || taxSubHead==VisOblCode|| taxSubHead==shippingOblCode||taxSubHead==TransmissionOblCode ||taxSubHead==advanceObligationId)
				{

				}
			}

			if(selectedFlagAdvanceTax>0)
			{
				if(taxSubHead==WithHoldee || taxSubHead==VisOblCode|| taxSubHead==shippingOblCode||taxSubHead==TransmissionOblCode ||taxSubHead==advanceObligationId||taxSubHead==exciseObligationId || paymentType==TIP || paymentType==SAT || paymentType==VTDP)
				{
					var x=confirm ("This action will clear your entered data.\nDo you really want to proceed?");
					if(x)
					{
						clear_Page_data('advanceTaxTable','3');
						clear_table_data('advanceTaxTable');
						clear_Page_data('installmentTable','12');
						clear_table_data('installmentTable');
						selectedFlagAdvanceTax=0;
						document.getElementById('paymentRegAdvanceTaxFieldSet').style.display='none';
						document.getElementById('txtTotalAmountPaidOblig').value=0;
						convertModifyToAdd('advanceTaxTable');
					}
					else
					{
						document.getElementById('cmbTaxSubHead').selectedIndex=0;
						document.getElementById('cmbPaymentType').selectedIndex=0;
						return false;
					}
				}

			}
			if(selectedFlagInstallment>0)
			{
				if(taxSubHead==WithHoldee || taxSubHead==VisOblCode|| taxSubHead==shippingOblCode||taxSubHead==TransmissionOblCode ||taxSubHead==advanceObligationId ||taxSubHead==payeeCode ||taxSubHead== VATCode||taxSubHead== exciseTaxOblCode)
				{
					var x=confirm ("This action will clear your entered data.\nDo you really want to proceed?");
					if(x)
					{
						clear_Page_data('installmentTable','12');
						clear_table_data('installmentTable');
						clear_Page_data('advanceTaxTable','3');
						clear_table_data('advanceTaxTable');
						convertModifyToAdd('installmentTable');
						selectedFlagInstallment=0;
						document.getElementById('paymentRegInstallmentTaxFieldSet').style.display='none';
						document.getElementById('txtTotalAmountPaidOblig').value=0;
					}
					else
					{
						document.getElementById('cmbTaxSubHead').value=taxSubHeadValueForRecord;
						document.getElementById('cmbPaymentType').value=paymentTypeValueForRecord;
						return false;
					}
				}
			}
		}
	}
}

function setObligationType(){
	var taxHead = document.getElementById("cmbTaxHead").value;
	var taxSubHead = document.getElementById('cmbTaxSubHead').value;
	var hidObligationType = null;

	if(taxHead == AGENCY_NOTICE){
		hidObligationType = TAX;
	}
	else if(taxHead == AGENCY_REVENUE && taxSubHead==NSSF){
		hidObligationType = TAX;
	}
	else if(taxHead == AGENCY_REVENUE){
		hidObligationType = OTR;
	}
	else if(taxHead == OTHER ){
		hidObligationType = OTHER;
	}
	else if(taxHead == VAT){
		hidObligationType = Obligation_Type_Tax;
	}
	else if(taxHead == IT){
		if(taxSubHead != advanceObligationId)
			hidObligationType = Obligation_Type_Tax;
		else if(taxSubHead == advanceObligationId)
			hidObligationType = OTR;
	}
	else if(taxHead == EXCISE){
		if(taxSubHead != exciseObligationId)
			hidObligationType = Obligation_Type_Tax;
		else if(taxSubHead == exciseObligationId)
			hidObligationType = NTR;

	}
	else if(taxHead == NTR){
		hidObligationType = NTR;
	}
	else if(taxHead==PPP)
	{
		hidObligationType = OTHER;
	}
	else if(taxHead==AUCTION_NOTICE)
	{
		hidObligationType = TAX;
	}
	document.getElementById("hidObligationType").value = hidObligationType;

}



function setCmbTaxSubHeadForTaxTypeSpecificUser(obligationId){

	document.getElementById('paymentRegExciseCashBond').style.display='none';
	document.getElementById("tdTaxSubHead").style.display="";
	document.getElementById("tdTaxSubHeadLbl").style.display="";
	document.getElementById("tdPaymentTypeLbl").style.display="";
	document.getElementById("tdPaymentType").style.display="";
	document.getElementById("cmbTaxSubHead").length=1;
	for (var allMapKey in AllObligationsMap){


		var oOption=document.createElement("option");

		if(allMapKey == obligationId){

			oOption.value=allMapKey;
			oOption.text=AllObligationsMap[allMapKey];
			oOption.title =AllObligationsMap[allMapKey];
			document.getElementById("cmbTaxSubHead").add(oOption);

			return true;
		}
	}
}

function setCmbTaxHeadForTaxTypeSpecificUser(){

	var obligationId = document.getElementById('hidAuthAgentObligId').value;

	document.getElementById("cmbTaxHead").length=1;

	for (var mapKey in ITObligationsMap){

		var oOption=document.createElement("option");

		if(mapKey == obligationId){

			oOption.value="IT";
			oOption.text="Income Tax";
			oOption.title ="IT";
			document.getElementById("cmbTaxHead").add(oOption);

			return true;
		}
	}
	/*var isPinWithNoOblig = document.getElementById('isPinWithNoOblig').value;
	if(isPinWithNoOblig != 'Y'){*/
		for (var mapKey in VATObligationsMap){

			var oOption=document.createElement("option");
			if(mapKey == obligationId){
				oOption.value="VAT";
				oOption.text="VAT";
				oOption.title ="VAT";
				document.getElementById("cmbTaxHead").add(oOption);

				return true;
			}
		}

		for (var mapKey in ExciseObligationsMap){

			var oOption=document.createElement("option");
			if(mapKey == obligationId){
				oOption.value="EXCISE";
				oOption.text="Excise";
				oOption.title ="EXCISE";
				document.getElementById("cmbTaxHead").add(oOption);

				return true;
			}
		}

		for (var mapKey in NTRObligationsMap){

			var oOption=document.createElement("option");
			if(mapKey == obligationId){
				oOption.value="NTR";
				oOption.text="Non Tax Revenue(NTR)";
				oOption.title ="NTR";
				document.getElementById("cmbTaxHead").add(oOption);

				return true;
			}
		}

		for (var mapKey in OtherObligationsMap){

			var oOption=document.createElement("option");
			if(mapKey == obligationId){
				oOption.value="AGENCY_R";
				oOption.text="Agency Revenue";
				oOption.title ="AGENCY_R";
				document.getElementById("cmbTaxHead").add(oOption);

				return true;
			}
		}
	//}
}

function setTaxHeadAndSubHeadForTaxTypeSpecificUser(){

	setCmbTaxHeadForTaxTypeSpecificUser();
	document.getElementById('cmbTaxHead').selectedIndex=1;
	setCmbTaxSubHeadForTaxTypeSpecificUser(document.getElementById('hidAuthAgentObligId').value);

	document.getElementById('cmbTaxSubHead').selectedIndex=1;
	if(getObligationRollOutDateDtls())
	{
		onChangeCmbSubTaxHead(document.getElementById('cmbTaxSubHead'));
	}
}
function requiredFieldsAfterCleaer()
{
	
		var pinNo =document.getElementById('txtPin').value;
		var firstName=document.getElementById('txtFirstName').value;
		var address=document.getElementById('taxPayerFullAddr').value;
		var email=document.getElementById('email').value;
		var accMonth=document.getElementById('hidAccMonth').value;
		var taxPayerId=document.getElementById('hidTaxPayerId').value;
		var effectiveDate=	document.getElementById('hidEffectiveDt').value;
		var logedInPin=trim(document.getElementById('hidLogedInPinNo').value,'');
		var hidAuthAgentFlow=trim(document.getElementById('hidAuthAgentFlow').value,'');
		var hidAuthAgentObligId=trim(document.getElementById('hidAuthAgentObligId').value,'');
		document.paymentRegForm.reset();
		document.getElementById('beneBankNameRTGS').disabled=false;
		document.getElementById('txtPin').value=pinNo;
		document.getElementById('txtFirstName').value=firstName;
		document.getElementById('taxPayerFullAddr').value=address;
		document.getElementById('hidAccMonth').value=accMonth;
		document.getElementById('hidTaxPayerId').value=taxPayerId;
		document.getElementById('hidEffectiveDt').value= effectiveDate;
		document.getElementById('hidLogedInPinNo').value= logedInPin;
		document.getElementById('email').value=email;
		document.getElementById('hidAuthAgentFlow').value=hidAuthAgentFlow;
		document.getElementById('hidAuthAgentObligId').value=hidAuthAgentObligId;
	
}

function getObligationRollOutDateDtls(){
	if(commonModifyFlag==0){
		var taxPayerID=document.getElementById('hidTaxPayerId').value;
		var obligationID=document.getElementById('cmbTaxSubHead').value;
		var paymentType=document.getElementById('cmbPaymentType').value;
		var isValid=false;
		GetObligationRollOutDateDtls.getObligationRollOutDateDtls(obligationID,taxPayerID,{async:false,callback: function(data){
			if(data != 'null' &&  data != null){
				obligationRollOutStatus=data.refType;
				obligationRollOutDate=data.effectiveDate;
			}
		}});
		if(obligationRollOutStatus==OBLIGATION_ROLL_OUT_DATE_BYPASS || obligationRollOutStatus==OBLIGATION_ROLL_OUT_DATE
				|| (obligationRollOutStatus==NO_OBLIGATION_ROLL_OUT_DATE && (obligationID==2 || obligationID==3 || obligationID==4
						|| obligationID==5 || obligationID==6 || obligationID==7 || obligationID==8 || obligationID==9 ||obligationID==10||
						obligationID==11 || obligationID==13 || obligationID==14 || obligationID==22 || obligationID==29
						|| obligationID==32 || obligationID==33 ))){
			return true;
		}
		else if(obligationRollOutStatus==NO_OBLIGATION_ROLL_OUT_DATE && paymentType == VTDP ){
			obligationRollOutDate = '01/07/2015'
		    return true;
		}
		//Added by Lawrence on 02/03/2022
		else if(obligationID == 50 ){
			obligationRollOutDate = '01/07/2015'
			    return true;
		}
		//End 02/03/2022
		
		//Start Added for Digital Asset Tax - DAT
		else if(obligationID == 45){
			
			obligationRollOutDate = '01/09/2023'
			    return true;
		}
		//End Added for Digital Asset Tax - DAT
		
		//START::::: PPRA - 07/2024
		else if(obligationID == 46){
			
			obligationRollOutDate = '01/07/2024'
				return true;
		}
		//END::::: PPRA - 07/2024
		
		else if(obligationID == importCertificateObligId ){
			obligationRollOutDate = '01/07/2015'
			    return true;
		}
		
		else if(obligationID == foreignAmnestyObligId ){
			obligationRollOutDate = '01/07/2015'
			    return true;
		}
		//START::::: AWWDA - 05/2025
		else if(obligationID == awwdaId ){
			obligationRollOutDate = '01/01/2025'
			    return true;
		}
		//START::::: AWWDA - 05/2025
		
		else if(obligationRollOutStatus==NO_OBLIGATION_ROLL_OUT_DATE && paymentType != VTDP){
			/*if (obligationID==9)
				return true;
			else{*/
				document.getElementById("cmbPaymentType").length=1;
				//document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
				document.getElementById("cmbTaxSubHead").selectedIndex=0;
				document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
				document.getElementById("CmbTaxPeriodTd").style.display="none";
				document.getElementById("tdCmbTaxPeriodYear").style.display="none";
				document.getElementById("noTaxPeriodTd").style.display="";
				document.getElementById("noTaxPeriodTd1").style.display="";
				clearDetailsForRollOut();
				alert(regUnavailableForSelectedTaxSubHead);
				return false;
			//}
				
		}
	}else{	
		alert("Please complete modify operation first");
		document.getElementById("cmbTaxSubHead").value=taxSubHeadValueForRecord;
		return false;
	}

}

function obligationRollOutOnPaymentType()
{
	var serverDate=document.getElementById('serverDate').value;
	if(document.getElementById('cmbPaymentType').value==SAT)
	{
		if(obligationRollOutStatus==OBLIGATION_ROLL_OUT_DATE_BYPASS){
			return true;
		}
		if( obligationRollOutStatus==OBLIGATION_ROLL_OUT_DATE){
			if(!fnCompareDates(obligationRollOutDate,serverDate)){
				document.getElementById("cmbPaymentType").length=1;
				//document.getElementById("cmbTaxSubHead").length=1;
				document.getElementById("tdTaxSubHead").style.display="";
				document.getElementById("tdTaxSubHeadLbl").style.display="";
				document.getElementById("tdPaymentTypeLbl").style.display="";
				document.getElementById("tdPaymentType").style.display="";
				document.getElementById("cmbTaxSubHead").selectedIndex=0;
				document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
				document.getElementById("CmbTaxPeriodTd").style.display="none";
				document.getElementById("tdCmbTaxPeriodYear").style.display="none";
				document.getElementById("noTaxPeriodTd").style.display="";
				document.getElementById("noTaxPeriodTd1").style.display="";
				alert(regUnavailableForSelectedTaxSubHead);
				return false;
			}else{
				return true;
			}
		}
	}else{
		return true;
	}

}

function checkInstallmentRollOut(fromDate,toDate){
	var taxPayerID=document.getElementById('hidTaxPayerId').value;
	var obligationID=document.getElementById('cmbTaxSubHead').value;
	var isValid=false;
	GetObligationDueDate.getObligationDueDate(obligationID,taxPayerID,fromDate,toDate,{async:false,callback: function(data){
		if(data != 'null' &&  data != null){
			isValid=data;
		}
	}});
	if(isValid){
		obligationRollOutCheck=0;
		return true;
	}
	else {
		document.getElementById("cmbPaymentType").length=1;
		//document.getElementById("cmbTaxSubHead").length=1;
		document.getElementById("tdTaxSubHead").style.display="";
		document.getElementById("tdTaxSubHeadLbl").style.display="";
		document.getElementById("tdPaymentTypeLbl").style.display="";
		document.getElementById("tdPaymentType").style.display="";
		document.getElementById("cmbTaxSubHead").selectedIndex=0;
		document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
		document.getElementById("CmbTaxPeriodTd").style.display="none";
		document.getElementById("tdCmbTaxPeriodYear").style.display="none";
		document.getElementById("noTaxPeriodTd").style.display="";
		document.getElementById("noTaxPeriodTd1").style.display="";
		obligationRollOutCheck=1;
		alert(regUnavailableForSelectedTaxSubHead);
		return false;
	}
}


function clearDetailsForRollOut()
{
	clear_table_data("taxObligationTable");
	document.getElementById("cmbTaxHead").selectedIndex=0;
	document.getElementById('ObligationDetailFieldSet').style.display = 'none'; 
	document.getElementById('paymentRTGSFieldSet').style.display = 'none'; 
	document.getElementById('navigationTable').style.display = 'none';
	document.getElementById('LiablibilityTbl').style.display = 'none';
	document.getElementById('cmbTaxPeriod').options.length = 1;
	tabview_switch('TabView',1);
	document.getElementById('paymentRegTransmissionTaxFieldSet').style.display ='none';
	document.getElementById('paymentRegDTSTaxFieldSet').style.display='none';
	//Added for DAT - 11/2023
	document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
	document.getElementById('paymentRegVISFieldSet').style.display = 'none';
	//Added for VIS payment cancelletion :: 66743
	document.getElementById('pmtCanclVIS').style.display="none";
	document.getElementById('chooseExcelPaymentMethod1').style.display="none";
	//END
	document.getElementById('paymentRegShippingTaxFieldSet').style.display = 'none';
	document.getElementById('paymentRegWithholdeeSet').style.display = 'none';
	document.getElementById('paymentRegAgencyNoticeSet').style.display ='none';
	document.getElementById('TotalTaxFieldSet').style.display = 'none';
	document.getElementById('disclaimerFieldSet').style.display = 'none';
	clear_table_data("transmissionTaxTable");
	clear_table_data("withholdeeFormTable");
	clear_table_data("shippingTaxTable");
	clear_table_data("vatOnImpTable");
	document.getElementById("checkDisclaimer").checked=false;
	rowNumbmerPartial=0;
	selectedFlagPartial=0;
	resetErrorList();
	hideTab('TabView',5);
	hideTab('TabView',2);
	selectedFlagTaxOblig=0;
	selectedFlagShipping =0;
	selectedFlagCable=0;
	selectedFlagVis =0;
	selectedFlagWithHoldee=0;
	modifyFlagWithHoldee=0;
	modifyFlagTaxOblig=0;
	commonModifyFlag=0;
	modifyFlagVis=0;
	modifyFlagCable=0;
	modifyFlagShipping=0;
	selectedFlagInstallment=0;
	modifyFlagInstallment=0;
	selectedFlagAdvanceTax=0;
	modifyFlagAdvanceTax=0;
	selectedFlagNSSF=0;
	modifyFlagNSSF=0;
	deleteFlagNSSF=0;
	incError=0;
	document.getElementById('paymentTaxObligForm').style.display='none';
	document.getElementById('paymentRegSpecObligationForm').style.display='none';
	document.getElementById('paymentRegNTRForm').style.display='none';
	document.getElementById('totalAmountPaidFieldSet').style.display='none';
	document.getElementById('paymentRegAgencyNoticeSet').style.display ='none';
	document.getElementById('paymentRTGSFieldSet').style.display='none';
	document.getElementById('cmbBankName').style.display=''; 
	document.getElementById('bankNameLabel').style.display=''; 
	document.getElementById('paymentTaxObligForm').style.display ='none';	
	//document.getElementById("cmbTaxTypeAgency").length=1;
	document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
	document.getElementById("CmbTaxPeriodTd").style.display="none";
	document.getElementById("tdCmbTaxPeriodYear").style.display="none";
	document.getElementById("noTaxPeriodTd").style.display="";
	document.getElementById("noTaxPeriodTd1").style.display="";
	document.getElementById("tdTaxSubHead").style.display="";
	document.getElementById("tdTaxSubHeadLbl").style.display="";
	document.getElementById("tdPaymentTypeLbl").style.display="";
	document.getElementById("tdPaymentType").style.display="";
	document.getElementById('paymentRegExciseCashBond').style.display ='none';
	document.getElementById('paymentRTGSFieldSet').style.display='none';
	document.getElementById('cmbBankName').style.display=''; 
	document.getElementById('bankNameLabel').style.display=''; 
	document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
	document.getElementById("CmbTaxPeriodTd").style.display="none";
	document.getElementById("tdCmbTaxPeriodYear").style.display="none";
	document.getElementById("noTaxPeriodTd").style.display="";
	document.getElementById("noTaxPeriodTd1").style.display="";
	document.getElementById('paymentRegPPP').style.display ='none';
	document.getElementById('paymentRTGSFieldSet').style.display='none';
	document.getElementById('cmbBankName').style.display=''; 
	document.getElementById('bankNameLabel').style.display=''; 
	document.getElementById("CmbTaxPeriodLabelTd").style.display="none";
	document.getElementById("CmbTaxPeriodTd").style.display="none";
	document.getElementById("tdCmbTaxPeriodYear").style.display="none";
	document.getElementById("noTaxPeriodTd").style.display="";
	document.getElementById("noTaxPeriodTd1").style.display="";
	clear_table_data('pppaddDetailTable');
	clear_table_data('pppDetails');
	clear_table_data('landRentTable');
	clear_Page_data('landRentTable', '9');
	document.getElementById('in_landRentTable_10').selectedIndex=0;
	landRentTableCounter=0;
	modifyFlagLandRent=0;
	commonModifyFlag=0;
	selectedFlagAdvance=0;
	clear_Page_data('advanceTable','8');
	document.getElementById('in_advanceTable_4').selectedIndex=0;
	modifyFlagAdvance=0;
	commonModifyFlag=0;
	document.getElementById('cmbTaxPeriod').selectedIndex=0;
	clear_table_data('advanceTable');
	document.getElementById('in_advanceTable_7').value=0;
	document.getElementById('in_advanceTable_8').value=0;
	selectedFlagWidow=0;
	document.getElementById('hidRateOfLevy').value=document.getElementById('in_widowsTable_11').value;
	clear_Page_data('widowsTable','6');
	document.getElementById('in_widowsTable_11').value=document.getElementById('hidRateOfLevy').value;
	modifyFlagWidow=0;
	commonModifyFlag=0;
	document.getElementById('cmbTaxPeriodMonth').selectedIndex=0;
	clear_table_data('widowsTable');
	selectedFlagSugar=0;
	document.getElementById('hidRateOfLevy').value=document.getElementById('in_sugarTable_11').value;
	clear_Page_data('sugarTable','12');
	document.getElementById('in_sugarTable_11').value=document.getElementById('hidRateOfLevy').value;
	document.getElementById('in_sugarTable_5').value=0;
	document.getElementById('in_sugarTable_6').value=0;
	document.getElementById('in_sugarTable_7').value=0;
	document.getElementById('in_sugarTable_8').value=0;
	document.getElementById('in_sugarTable_9').value=0;
	document.getElementById('in_sugarTable_10').value=0;
	modifyFlagSugar=0;
	commonModifyFlag=0;
	document.getElementById('cmbTaxPeriodMonth').selectedIndex=0;
	document.getElementById('hidBalanceAdjustment').value=0;
	document.getElementById('hidAmtPaybleLevy').value=0;
	document.getElementById('in_sugarTable_7').readOnly=false;
	document.getElementById('in_sugarTable_8').readOnly=false;
	clear_table_data('sugarTable');
	document.getElementById('hidRateOfLevy').value=document.getElementById('in_standardLevyDtl2_6').value;
	clear_Page_data('standardLevyDtl2','5');
	modifyFlagStandardLevy2=0;
	commonModifyFlag=0;
	document.getElementById('in_standardLevyDtl2_6').value=document.getElementById('hidRateOfLevy').value;
	document.getElementById('hidRateOfLevy').value=document.getElementById('in_standardLevyDtl3_6').value;
	clear_Page_data('standardLevyDtl3','5');
	modifyFlagStandardLevy3=0;
	document.getElementById('in_standardLevyDtl3_6').value=document.getElementById('hidRateOfLevy').value;
	document.getElementById('hidRateOfLevy').value=document.getElementById('in_standardLevyDtl4_6').value;
	clear_Page_data('standardLevyDtl4','5');
	modifyFlagStandardLevy4=0;
	document.getElementById('in_standardLevyDtl4_6').value=document.getElementById('hidRateOfLevy').value;
	document.getElementById('hidRateOfLevy').value=document.getElementById('in_standardLevyDtl5_6').value;
	clear_Page_data('standardLevyDtl5','5');
	modifyFlagStandardLevy5=0;
	document.getElementById('in_standardLevyDtl5_6').value=document.getElementById('hidRateOfLevy').value;
	document.getElementById('hidRateOfLevy').value=document.getElementById('in_standardLevyDtl6_6').value;
	clear_Page_data('standardLevyDtl6','5');
	modifyFlagStandardLevy6=0;
	document.getElementById('in_standardLevyDtl6_6').value=document.getElementById('hidRateOfLevy').value;
	clear_Page_data('standardLevyDtl1','12');
	modifyFlagStandardLevy1=0;
	document.getElementById('cmbTaxPeriodYear').selectedIndex=0;
	document.getElementById('cmbTaxPeriodMonth').selectedIndex=0;
	document.getElementById('in_standardLevyDtl1_5').value=0;
	document.getElementById('in_standardLevyDtl1_6').value=0;
	document.getElementById('in_standardLevyDtl1_7').value=0;
	document.getElementById('in_standardLevyDtl1_8').value=0;
	document.getElementById('in_standardLevyDtl1_9').value=0;
	document.getElementById('in_standardLevyDtl1_10').value=0;
	document.getElementById('in_standardLevyDtlPartial1_5').value=0;
	document.getElementById('in_standardLevyDtlPartial1_6').value=0;
	document.getElementById('in_standardLevyDtlPartial1_7').value=0;
	document.getElementById('in_standardLevyDtlPartial1_8').value=0;
	document.getElementById('in_standardLevyDtlPartial1_9').value=0;
	document.getElementById('in_standardLevyDtlPartial1_10').value=0;
	selectedFlagStandardLevy2=0;
	selectedFlagStandardLevy3=0;
	selectedFlagStandardLevy4=0;
	selectedFlagStandardLevy5=0;
	selectedFlagStandardLevy6=0;
	selectedFlagStandardLevy1=0;
	clear_table_data('standardLevyDtl1');
	clear_table_data('standardLevyDtl2');
	clear_table_data('standardLevyDtl3');
	clear_table_data('standardLevyDtl4');
	clear_table_data('standardLevyDtl5');
	clear_table_data('standardLevyDtl6');
	clear_table_data('standardLevyDtlPartial1');
	document.getElementById('in_standardLevyDtl1_7').readOnly=false;
	document.getElementById('in_standardLevyDtl1_8').readOnly=false;
}



function addrowVW()
{
	
	if(checkDuplicateVatWithRows()){
		if(confirm("Do you want to add details?"))
	   	   {
			/*var amountToBePaid=document.getElementById('in_VATWithholdeeFormTable_9').value;
			amountToBePaid=removeCommaFrmInput(amountToBePaid);
			document.getElementById('in_VATWithholdeeFormTable_9').value=amountToBePaid;*/
		/*addrow('VATWithholdeeFormTable','8','12','9','','','N','N','','5');*/
		addrow('VATWithholdeeFormTable','8','12','10','','','N','N','','6');
		   }
   
   }
}

function clearNatureOfTransaction()
{
	
	document.getElementById('in_VATWithholdeeFormTable_3').selectedIndex=0;
	return true;

}

function validateVATWithdetails()
{
	document.getElementById("in_VATWithholdeeFormTable_8").value=removeCommaFrmInput(document.getElementById('in_VATWithholdeeFormTable_8').value);
	if(!validateFormFields(vatWhtJson))
		{
			getErrTabToggle('TabView','2');	
			tabview_switch('TabView', '2');
			hideAndShowTable("errorDiv");
			document.getElementById('btnTbl').style.display="none";
			return false;
		}
	if(document.getElementById("in_VATWithholdeeFormTable_3").value=='' || 
			document.getElementById("in_VATWithholdeeFormTable_3").value==null)
   		{
   			alert("Please enter Witholdee PIN.");
   			return false;
   		}
if(document.getElementById("in_VATWithholdeeFormTable_5").value == null || 
	   document.getElementById("in_VATWithholdeeFormTable_5").value == ""){
	   
	   alert("Please select Invoice date."); return false;
   }
	
if(document.getElementById("in_VATWithholdeeFormTable_7").value == null || 
		   document.getElementById("in_VATWithholdeeFormTable_7").value == ""){
		alert("Please select Payment date.");
		return false;
	}
if(document.getElementById("in_VATWithholdeeFormTable_8").value == null || 
		   document.getElementById("in_VATWithholdeeFormTable_8").value == ""){
		alert("Please enter the Invoice amount");
		return false;
	}
if(document.getElementById("in_VATWithholdeeFormTable_10").value == null || 
		   document.getElementById("in_VATWithholdeeFormTable_10").value == ""){
		alert("VAT Witholding amount should be greater than 0.");
		return false;
	}
if(document.getElementById("in_VATWithholdeeFormTable_10").value =='0.0')
	{
		alert("VAT Witholding amount should be greater than 0.");
		return false;
	}
var vatWitholdeePin = document.getElementById('in_VATWithholdeeFormTable_3').value;
	var taxpayerId = document.getElementById('hidTaxPayerId').value;
	var obligationId= VatWithholding;
	var vatWitholdeeName=document.getElementById('in_VATWithholdeeFormTable_11').value;
	var vatWitholdeeAddress=document.getElementById('in_VATWithholdeeFormTable_12').value;
	var vatWitholdeeEmailId=document.getElementById('in_VATWithholdeeFormTable_13').value;
	var vatWithTaxPayerIdWithholdee=document.getElementById('in_VATWithholdeeFormTable_14').value;
var vatWitholdeeInvoiceNo=document.getElementById('in_VATWithholdeeFormTable_4').value;
var vatWitholdeeInvoiceDt=document.getElementById('in_VATWithholdeeFormTable_5').value;
var vatWitholdingInvoiceAmount=document.getElementById('in_VATWithholdeeFormTable_8').value;
	vatWitholdingInvoiceAmount=removeCommaFrmInput(vatWitholdingInvoiceAmount);
var vatWitholdeePaymentDt=document.getElementById('in_VATWithholdeeFormTable_7').value;
var vatWitholdeePaymentAmt=document.getElementById('in_VATWithholdeeFormTable_8').value;
	vatWitholdeePaymentAmt=removeCommaFrmInput(vatWitholdeePaymentAmt);
var vatWitholdeeTaxRate=document.getElementById('in_VATWithholdeeFormTable_9').value;
var vatWitholdingAmount=document.getElementById('in_VATWithholdeeFormTable_10').value;
	vatWitholdingAmount=removeCommaFrmInput(vatWitholdingAmount);
	var table = document.getElementById('VATWithholdeeFormTable');
var invoiceNo = document.getElementById('in_VATWithholdeeFormTable_4').value;
var invoiceDt= document.getElementById('in_VATWithholdeeFormTable_5').value;
var pmtDt = document.getElementById('in_VATWithholdeeFormTable_7').value;
	if(table.rows.length==1)
	{
	}
	else
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'VATWithholdeeFormTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
				(table.rows[i].cells[4].innerHTML==invoiceNo) && (table.rows[i].cells[5].innerHTML==invoiceDt) &&
					(table.rows[i].cells[7].innerHTML==pmtDt))
				{
					alert("You already added this details.");
					return false;
				}
			if((trim(document.getElementById('id_temp_'+'VATWithholdeeFormTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify")) 
			{		
				var date=table.rows[i].cells[7].innerHTML;
				var month = date.substr(2, 8);
				var monthToBeAdded= vatWitholdeePaymentDt.substr(2, 8);
				
				//Added on 18/07/2022 Ticket #69232 Finance act 2023 changes
				var dateToBeAdded= vatWitholdeePaymentDt;
				var year=date.substr(6);
				var month1=date.substr(3, 2);
				if((parseInt(year)==yearFa2023 && parseInt(month1)>=mnthRFa2023) || parseInt(year) > yearFa2023 ){
					if(date!=dateToBeAdded)
					{
						//alert(declareAllTransInAMonth);
						//alert("You cannot generate the payment slip with multiple Transactions of different Day/Month/Year.");
						alert("Please declare transactions with similar payment dates (Day/Month/Year). For different payment dates, capture the transactions in separate payment slip.");
						return false;
					}
				}else{
					//End on 18/07/2022 Ticket # Finance act 2023 changes
					if(month!=monthToBeAdded)
						{
							alert(declareAllTransInAMonth);
							return false;
						}
				}
			}
		}
	}
	
	var PmtSplDetailVO = {
			taxpayerId  : taxpayerId,
			obligationId : obligationId,
			vatWitholdeePin : vatWitholdeePin,
			vatWitholdeeName : vatWitholdeeName,
			vatWitholdeeEmailId : vatWitholdeeEmailId,
	vatWitholdeeAddress :vatWitholdeeAddress,
	vatWitholdeeInvoiceNo : vatWitholdeeInvoiceNo,
	vatWitholdeeInvoiceDt : vatWitholdeeInvoiceDt,
	vatWitholdingInvoiceAmount : vatWitholdingInvoiceAmount,
	vatWitholdeePaymentDt : vatWitholdeePaymentDt,
	vatWitholdeePaymentAmt : vatWitholdeePaymentAmt,
	vatWitholdeeTaxRate : vatWitholdeeTaxRate,
	vatWitholdingAmount : vatWitholdingAmount,
	vatWithTaxPayerIdWithholdee : vatWithTaxPayerIdWithholdee
	};
	if(isSplObligationRegisteredWeb(PmtSplDetailVO))
		return true;
	else
		return false;
	
}
function fetchVATWitholdeeDetails(obj)
{
document.getElementById('in_VATWithholdeeFormTable_9').value='0.0';
document.getElementById('in_VATWithholdeeFormTable_8').value='';
	var pin = trim(obj.value);
	if(validPIN(obj)){
		FetchTaxpayerDetailWithoutValidationSplObl.fetchTaxpayerDetailWithoutValidationSplObl(pin,{async:false,callback: function(data){
			if(data != NULL &&  data != null){
				if(data.isDataAvailable == N_FLAG){
					if(data.isAgent == ERROR ||data.isAgent == NO_CALL_MADE){ // Handled Scenario : 1) if no call made from Controller to impl 2) impl to facade
						alert(errorFetchingData);
					}
					else if(data.isAgent == NO_DETAILS_FOUND){// Handled Scenario : 1) call made to facade with invalid PIN
						alert(validPin);
					}
					resetVATWithholdeeInfo();
					return false;
				}
				//Added by Mingu for handling PIN Without obligation :: START
				if(data.isPinWithNoOblig != null && data.isPinWithNoOblig == 'Y'){
					alert("This PIN is non-transactional and will require additional of the relevant obligations to progress")
					resetVATWithholdeeInfo();
					return false;
				}
				//Added by Mingu for handling PIN Without obligation :: END
				if(data.isDataAvailable=="IpageNotProcessed"){/*
					alert("The PIN has not updated their Ipage.Please update their Ipage and try again.");
					document.getElementById('in_VATWithholdeeFormTable_11').value='';
					document.getElementById('in_VATWithholdeeFormTable_12').value='';
					document.getElementById('in_VATWithholdeeFormTable_13').value='';
					document.getElementById('in_VATWithholdeeFormTable_14').value='';
				 */

					if(data.taxPayerFirstName != null || data.taxPayerId != null){

						document.getElementById('in_VATWithholdeeFormTable_11').value=data.taxPayerFirstName;
						document.getElementById('in_VATWithholdeeFormTable_12').value=data.taxPayerFullAddr;
						document.getElementById('in_VATWithholdeeFormTable_13').value=data.emailId;
						document.getElementById('in_VATWithholdeeFormTable_14').value=data.taxPayerId;
						//dwr.util.setValue('WitholdeeTaxPayerFullAddr',data.taxPayerFullAddr);
						taxPayerType=data.taxPayerType;

					}
					if(data.taxPayerFirstName == NULL || data.taxPayerFirstName == null){
						resetWithholdeeInfoInWith();
						alert(validPin);
						return false;
					}

				}
				else if(data.isDataAvailable=="VATRegistered"){
					if(data.taxPayerFirstName != null || data.taxPayerId != null){
						
						document.getElementById('in_VATWithholdeeFormTable_11').value=data.taxPayerFirstName;
						document.getElementById('in_VATWithholdeeFormTable_12').value=data.taxPayerFullAddr;
						document.getElementById('in_VATWithholdeeFormTable_13').value=data.emailId;
						document.getElementById('in_VATWithholdeeFormTable_14').value=data.taxPayerId;
						//dwr.util.setValue('WitholdeeTaxPayerFullAddr',data.taxPayerFullAddr);
						taxPayerType=data.taxPayerType;
						
					}
					if(data.taxPayerFirstName == NULL || data.taxPayerFirstName == null){
						resetWithholdeeInfoInWith();
						alert(validPin);
						return false;
				}
				}else if(data.isDataAvailable=="VATNotRegistered")
					{
						alert("Witholdee is not registered in VAT. Please enter valid PIN");
						document.getElementById('in_VATWithholdeeFormTable_10').value='';
						document.getElementById('in_VATWithholdeeFormTable_11').value='';
						document.getElementById('in_VATWithholdeeFormTable_12').value='';
						document.getElementById('in_VATWithholdeeFormTable_13').value='';
						document.getElementById('in_VATWithholdeeFormTable_14').value='';
					}
			}
			else{
				alert(errorFetchingData);
				resetVATWithholdeeInfo();
				return false;
			}

		}});
		return true;
	}
	else{
		resetVATWithholdeeInfo();
		return false;
	}

	
	

}
function vatWithHoldeePinChecker(obj)
{
	if(obj.value==document.getElementById("txtPin").value)
		{
			alert("Witholder and Witholdee PIN can not be same.");
			resetVATWithholdeeInfo();
			return false;
		}
	else return true;
	
}

function resetVATWithholdeeInfo()
{		
	
		document.getElementById('in_VATWithholdeeFormTable_10').value='';
		document.getElementById('in_VATWithholdeeFormTable_11').value='';
		document.getElementById('in_VATWithholdeeFormTable_12').value='';
		document.getElementById('in_VATWithholdeeFormTable_13').value='';
	document.getElementById('total_VATWithholdeeFormTable_10').value=0.0;
		document.getElementById('in_VATWithholdeeFormTable_3').value='';
		document.getElementById('in_VATWithholdeeFormTable_4').value='';
		document.getElementById('in_VATWithholdeeFormTable_5').value='';
		document.getElementById('in_VATWithholdeeFormTable_6').value='';
		document.getElementById('in_VATWithholdeeFormTable_7').value='';
		document.getElementById('in_VATWithholdeeFormTable_8').value='';
		document.getElementById('in_VATWithholdeeFormTable_9').value='';
	
}


function onSelectionOfRadioForVATWith(radioValue)
{
	if(radioValue=='e')
	  {
		  document.getElementById('paymentVATWithExcelUploadForm').style.display ='';
		  document.getElementById('paymentVATWitholdingWebForm').style.display='none';
		  resetVATWithholdeeInfo();		 
		 // getVatWhtRolloutDate();
		  document.getElementById('fileVATWith').disabled=false;
		  document.getElementById('excelVATWithPmtTypeRadio2').checked=true;
		  amendmentOrNormal(document.getElementById('excelVATWithPmtTypeRadio2'));
		
		//Added on 12/09/2024 to sort withholding Issue.
		//Allow generation of interest or penalty only or principal only not both		  
		 // clear_table_data("withWebFormLiablibilityTbl");
		 // clear_table_data("vatWithWebFormLiablibilityTbl");
		 
		  //document.getElementById("vatWithWebFormLiablibilityTbl").innerHTML="TABLE DELETED";
		  document.getElementById("withWebFormLiablibilityTbl").style.display ='none'
		  //document.getElementById("vatWithWebFormLiablibilityTbl").style.display ='none'
		  document.getElementById('paymentTaxObligForm').style.display ='none';
		  document.getElementById('txtTotalAmountPaidOblig').value="0";
		//End 12/09/2024
		  clear_table_data("VATWithholdeeFormTable");
		  clear_table_data("vatWithholdeeWebFormTable");
	  }
	else{
		document.getElementById('paymentVATWithExcelUploadForm').style.display ='none';
		document.getElementById('paymentVATWitholdingWebForm').style.display='';
		document.getElementById('fileVATWith').value='';
		clear_table_data("VatWithPreviousDetailsTable");
		document.getElementById('VatWithPreviousDetailsTable').style.display='none';
		document.getElementById("navigationFieldsetForVatWht").style.display = 'none';
		document.getElementById("scrollableDiv").style.display = 'none';
		document.getElementById("VatWhtPeriodMonth").selectedIndex=-1;
		document.getElementById("VatWhtTaxPeriodYear").selectedIndex=-1;
		document.getElementById('fileVATWith').disabled=true;
		document.getElementById('amendButton').style.display='none';
		document.getElementById('excelVATWithPmtTypeRadio1').checked=false;
		document.getElementById('excelVATWithPmtTypeRadio2').checked=false;
		 clear_table_data("vatWithholdeeWebFormTable");
		//Added on 12/09/2024 to sort withholding Issue.
			//Allow generation of interest or penalty only or principal only not both
		 if(document.getElementById('cmbTaxSubHead').value=='29'){
			clear_table_data("withWebFormLiablibilityTbl");
			clear_table_data("withholdeeWebFormTable");
			clear_table_data("rentIncomeWithWebFormLiablibilityTbl");
			document.getElementById('withholdeeWebFormTable').style.display ='none'; 
			document.getElementById('withWebFormLiablibilityTbl').style.display ='none'; 
			document.getElementById('rentIncomeWithWebFormLiablibilityTbl').style.display ='none';
		  }
			  //clear_table_data("withWebFormLiablibilityTbl");
			  //clear_table_data("vatWithWebFormLiablibilityTbl");
			  document.getElementById('paymentTaxObligForm').style.display ='';
			  document.getElementById('txtTotalAmountPaidOblig').value="0";
			//End 12/09/2024
		if(document.getElementById('lblPin').innerHTML!="Withholder’s PIN (HQ)"){ 
		fetchSplOblHdrWebByObligation("N");
		}
		
		
	}
}

function saveVatWitholdingDetailOblig()
{  
	if(document.getElementById('cmbTaxSubHead').value=='VAT-Withholding' || document.getElementById('cmbTaxSubHead').value==VatWithholding)
		{
			if(document.getElementById('specOblVATWithPmtTypeRadio1').checked == false && 
					document.getElementById('specOblVATWithPmtTypeRadio2').checked == false)
			{
				alert('Please select atleast one operation for VAT-Withholding payment.');
				return false;
			}
	if(checkVatPreviousLiab()){
		document.getElementById('isPrevLiabilityChosenForITWht').value='Y';
		if(confirm("Do you wish to submit the data?"))
		{
			
		document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
		document.paymentRegForm.submit();
		}
	}
	else {
		document.getElementById('isPrevLiabilityChosenForITWht').value='N';
		if(document.getElementById('total_VATWithholdeeFormTable_10').value<0)
				{
					alert("Total Amount to be Paid can not be less than 0.");
					return false;
				}
		
		
		
			if(document.getElementById('specOblVATWithPmtTypeRadio2').checked == true)
				{
				if(document.getElementById('total_VATWithholdeeFormTable_10').value==0.0)
						{
						alert("Please add atleast one payment detail.");
						return false;
						}
				}
			
			if(!validateFormFields(paymentModeJson,bankNameJson))
			{
				getErrTabToggle('TabView','2');	
				tabview_switch('TabView', '2');
				hideAndShowTable("errorDiv");
				document.getElementById('btnTbl').style.display="none";
				return false;
			}
			if(document.getElementById('cmbPaymentMode').value==RTGS)
			{
				resetErrorList();
				if(!validateFormFields(RTGSJson))
				{
					getErrTabToggle('TabView','2');	
					tabview_switch('TabView', '2');
					hideAndShowTable("errorDiv");
					document.getElementById('btnTbl').style.display="none";
					return false;				
				}
				if(trim(document.getElementById('swiftCodeRTGS').value)!="" ){
					if(trim(document.getElementById('interBankRTGS').value)=="" ){
						alert(interBankForTrans);
						return false;
					}
				}
				if(trim(document.getElementById('interBankRTGS').value)!="" ){
					if(trim(document.getElementById('swiftCodeRTGS').value)=="" ){
						alert(swiftCodeForTrans);
						return false;
					}
				}
			}
			if(document.getElementById('specOblVATWithPmtTypeRadio1').checked == true)
			{
				if(!document.getElementById('fileVATWith').value=='')
				{
					if(validateFileForVATWithholding())
					{
						if(confirm("Do you wish to submit the data?"))
						{
							if(document.getElementById('excelVATWithPmtTypeRadio1').checked == true)
							{
								var rows = document.getElementById('VatWithPreviousDetailsTable').rows.length;
								var flag=false;
								for(var i=0; i<rows-1;i++)
								{
									if(document.getElementById('vatWithHoldeeHdrCheckbox_'+i).checked==true)
									{
										flag=true;
									}
								}
								if(flag==true)
								{
									document.getElementById('isAmendment').value='Y';
								}
								else
								{
									document.getElementById('isAmendment').value='N';
								}
							}else
							{
								document.getElementById('isAmendment').value='N';
							}
							
							if(document.getElementById('isAmendment').value=='Y')
								{
								var  tableObj =document.getElementById('VatWithPreviousDetailsTable');
								document.getElementById('prnString').value='';
								var prnstring ='';
								var prn = null; 
								if(tableObj.rows.length > 1){
									for(var i = 1, n = tableObj.rows.length; i <n; i++) 
									{
										if(document.getElementById('vatWithHoldeeHdrCheckbox_'+(i-1)).checked){
											if (document.all) {// for IE
												prn = tableObj.rows[i].cells[1].innerText;
											}
											else{
												var innrhtmltext = tableObj.rows[i].cells[1].textContent;
												prn = innrhtmltext; 
											}
											
											prnstring =prnstring.concat(prn+',');
										}

									}
									if(prnstring.length==0){
										alert("Please select Prn for amendedment");
										return false;
									}else{
										document.getElementById('prnString').value=prnstring;
									}
								}
							}
							document.getElementById('hidPaymentType').value='SAT';
							document.getElementById('hidObligationType').value='TAX';
							document.getElementById('hidObligationId').value='29';
							document.getElementById('cmdSaveOblig').disabled=true;
							document.getElementById('cmdClearOblig').disabled=true;
							document.getElementById('back').disabled=true;
							if(document.getElementById('cmbTaxSubHead').value==VatWithholding)
							{
								if(null!=document.getElementById("excelForPaymentOrVatWht").value && document.getElementById("excelForPaymentOrVatWht").value!='forVatOnly')
									{
										document.paymentRegForm.action="paymentRegistration.htm?actionCode=savePaymentExcelDetail";
										document.paymentRegForm.submit();
									}
								else if(null==document.getElementById("excelForPaymentOrVatWht").value )
									{
										document.paymentRegForm.action="paymentRegistration.htm?actionCode=savePaymentExcelDetail";
										document.paymentRegForm.submit();
									}
								else{
									document.VATWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode=savePaymentExcelDetail";
									document.VATWitholdingPaymentRegForm.submit();
								}
							}
						}
					}
				}
				else 
				{
					alert("Please select a file to upload in the system.");
					return false;
				}
			}
			if(document.getElementById('specOblVATWithPmtTypeRadio2').checked == true)
			{
				if(confirm("Do you wish to submit the data?"))
					{
						document.getElementById('hidPaymentType').value='SAT';
						document.getElementById('hidObligationType').value='TAX';
						document.getElementById('hidObligationId').value='29';
					var total = removeCommaFrmInput(document.getElementById('total_VATWithholdeeFormTable_10').value);
					document.getElementById('total_VATWithholdeeFormTable_10').value=total;
						document.getElementById('cmdSaveOblig').disabled=true;
						document.getElementById('cmdClearOblig').disabled=true;
						document.getElementById('back').disabled=true;
						if(document.getElementById('cmbTaxSubHead').value==VatWithholding)
						{
							if(null!=document.getElementById("excelForPaymentOrVatWht").value && 
									document.getElementById("excelForPaymentOrVatWht").value!='forVatOnly')
							{
								createSkipFieldForAddRow('VATWithholdeeFormTable','paymentRegForm');
								document.getElementById('txtTotalAmountPaidOblig').value=document.getElementById('total_VATWithholdeeFormTable_10').value;
								document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
								document.paymentRegForm.submit();
							}
							else if(null==document.getElementById("excelForPaymentOrVatWht").value)
							{
								createSkipFieldForAddRow('VATWithholdeeFormTable','paymentRegForm');
								document.getElementById('txtTotalAmountPaidOblig').value=document.getElementById('total_VATWithholdeeFormTable_10').value;
								document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
								document.paymentRegForm.submit();
							}
							else
							{
								createSkipFieldForAddRow('VATWithholdeeFormTable','VATWitholdingPaymentRegForm');
								document.VATWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
								document.VATWitholdingPaymentRegForm.submit();
							}
						}
					}
			}
			
		}
		}
	

}

function onchangeVatWithInvoiceAmt(obj)
{
	obj.value=removeCommaFrmInput(obj.value);
	if(!onlyNumeric(obj))
		{
			alert("Please enter valid Invoice amount.");
		document.getElementById('in_VATWithholdeeFormTable_10').value='';
			return false;
		}
		var amt= obj.value;
		amt = parseInt(amt);
		if(amt<=0 || amt==null)
			{
				alert("Please enter valid Invoice amount");
				obj.value='';
			document.getElementById('in_VATWithholdeeFormTable_10').value='';
				return false;
			}
	var taxRate= document.getElementById('in_VATWithholdeeFormTable_9').value;
		if(taxRate!=null && !taxRate=="")
		{
			var amountToBePaid= Math.ceil(parseInt(amt,10)*parseFloat(taxRate)/parseInt(100,10));
			amountToBePaid=convertToKenyanShillingFormatVal(amountToBePaid,false);
		document.getElementById('in_VATWithholdeeFormTable_10').value=amountToBePaid;
		}	
		else 
			{
		document.getElementById('in_VATWithholdeeFormTable_10').value='0.0';
			}
		var invAmt=obj.value;
		invAmt=convertToKenyanShillingFormatVal(invAmt,false);
		obj.value=invAmt;
		return true;
}




function checkDuplicateVatWithRows()
{
	var table = document.getElementById('VATWithholdeeFormTable');  
var invoiceNo = document.getElementById('in_VATWithholdeeFormTable_4').value;
var invoiceDt= document.getElementById('in_VATWithholdeeFormTable_5').value;
var pmtDt = document.getElementById('in_VATWithholdeeFormTable_7').value;
	
	
	if(table.rows.length==1)
	{
	}
	else
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'VATWithholdeeFormTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
			(table.rows[i].cells[4].innerHTML==invoiceNo) && (table.rows[i].cells[5].innerHTML==invoiceDt) &&
				(table.rows[i].cells[7].innerHTML==pmtDt))
			{
				alert("You already added this details.");
				return false;
			}
			if((trim(document.getElementById('id_temp_'+'VATWithholdeeFormTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify")) 
				{		
				var date=table.rows[i].cells[7].innerHTML;
					var month = date.substr(2, 8);
					var monthToBeAdded= pmtDt.substr(2, 8);
					if(month!=monthToBeAdded)
						{
							alert(declareAllTransInAMonth);
							return false;
						}
				}
			}
		
	}

	return true;
}

function onchangeInvoiceNo(obj)
{
	if(!onlyInvoiceNo(obj))
		{
		alert("Please enter only Alphanumeric values of length less than or equal to 20 characters.Special characters like Space,-,:,/ are allowed.");
	document.getElementById('in_VATWithholdeeFormTable_4').value='';
		}
}

function validatePmtDt(obj)
{
document.getElementById('in_VATWithholdeeFormTable_8').value='';
document.getElementById('in_VATWithholdeeFormTable_10').value='';
var invDt= document.getElementById('in_VATWithholdeeFormTable_5').value;
var intrDate="07/11/2019";	
var pmtDt = obj.value;
if(!fnCompareDates(intrDate,pmtDt)){
	document.getElementById('in_VATWithholdeeFormTable_9').value='6.0';
}else{
	document.getElementById('in_VATWithholdeeFormTable_9').value='2.0';
	}
	if(!fnCompareDates(invDt,pmtDt))
	{
		alert("Payment date should be after Invoice Date.");
		obj.value='';
		return false;
	}
	var finalDate="01/09/2014";
	if(!fnCompareDates(finalDate,pmtDt))
		{
			alert("Payment date should be after"+finalDate);
			obj.value='';
			return false;
		}

}

function onchangeInvDt()
{
	document.getElementById('in_VATWithholdeeFormTable_7').value='';
}

function downloadFile12()
{
	var excelFor=document.getElementById("excelForPaymentOrVatWht").value;
	if(excelFor=="forVatOnly")
		{
			commonDownloadFile(document.VATWitholdingPaymentRegForm,'Bcl_VAT_Witholding_Tax.xls','templates');
		}
	else
		{
			commonDownloadFile(document.paymentRegForm,'Bcl_VAT_Witholding_Tax.xls','templates');
		}
}
function showVatWithPreviousDetailsTable(partialDetailArray)
{
	var flag=0;
	if(partialDetailArray.length>=1){
		document.getElementById('navigationLegendForVatWht').innerHTML = PreviousLiabilityDetails ;
		var cntr = 0;
		var tabObj = document.getElementById("VatWithPreviousDetailsTable");
		for(var l = tabObj.rows.length; l >1 ;l--){
			tabObj.deleteRow(l -1);
		}	
		var period=document.getElementById("VatWhtPeriodMonth").value;
		var dateArray=period.split('-');
		var firstDate=dateArray[0];
		var lastDate= dateArray[1];
		for(var i=0;i<partialDetailArray.length;i++){
			if(partialDetailArray[i].taxperiodFromDtWid!=null && partialDetailArray[i].taxperiodFromDtWid!=""){
				var value=CompareDates(firstDate,partialDetailArray[i].taxperiodFromDtWid);
				if(value==0 || value==2)
					{
					  var val=CompareDates(partialDetailArray[i].taxperiodFromDtWid,lastDate);
					  if(val==0 || val==2)
						{  
						  	flag=1;
							cntr = parseInt(cntr);
							var tabRow = tabObj.insertRow(tabObj.rows.length);
							tabRow.id="vatWithHoldeeHdrRow_"+cntr;
							var tabCell = new Array();
							for (var j=0;j<8;j++){
								tabCell[j] = tabRow.insertCell(j);
							}
							var pmtSplDetailVO = partialDetailArray[i];
							var element = document.createElement('input');       
							element.type ='checkbox';
							element.onclick = function () {onSelectVatWithHoldeePrevDetailRadio(this);};
							element.value = cntr;
							element.id = 'vatWithHoldeeHdrCheckbox_'+cntr;
							element.name = "vatWithHoldeeHdrCheckbox";
							element.className='bordercl';
							tabCell[0].appendChild(element); 
				
				
							tabCell[1].innerHTML = pmtSplDetailVO.prn;
							tabCell[1].style.textAlign="center";
							tabCell[1].style.fontSize="11";
				
							tabCell[2].innerHTML = pmtSplDetailVO.vatWitholdeePaymentDt;
							tabCell[2].style.textAlign="center";
							tabCell[2].style.fontSize="11";
				
							tabCell[3].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.totalAmount).toFixed(2),true);
							tabCell[3].style.textAlign="right";
							tabCell[3].style.fontSize="11";
				
							tabCell[4].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualFineAmount).toFixed(2),true);
							tabCell[4].style.textAlign="right";
							tabCell[4].style.fontSize="11";
				
							tabCell[5].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualPenaltyAmount).toFixed(2),true);
							tabCell[5].style.textAlign="right";
							tabCell[5].style.fontSize="11";
				
							tabCell[6].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualInterestAmount).toFixed(2),true);
							tabCell[6].style.textAlign="right";
							tabCell[6].style.fontSize="11";
				
							cntr = cntr+1;
						}
					}
			}
			
		}
		if(flag==0)
			{
				var table = document.getElementById("VatWithPreviousDetailsTable");
				var tabRow = table.insertRow(tabObj.rows.length);
				var tabCell = new Array();
				tabCell[0] = tabRow.insertCell(0);
				tabCell[0].innerHTML ="System has not found any PRN for Withholding VAT which are not reconciled. Please select proper period.";
				tabCell[0].style.textAlign="center";
				tabCell[0].colSpan="7";
				tabCell[0].style.color="red";
				document.getElementById("scrollableDiv").style.height='60px';
			}
		else
		{
			var px= cntr*35;
			if(px<100){
				px=80;
			}
			if(px>270)
			{
				px=270;
			}
			document.getElementById("scrollableDiv").style.height=px+'px';
		}
		document.getElementById("scrollableDiv").style.display = "";
		document.getElementById("navigationFieldsetForVatWht").style.display = "";
		document.getElementById("VatWithPreviousDetailsTable").style.display = "";
		document.getElementById('hidNavigationFlag').value = "29";
	}
}

function showPreviousDetailsTableForAmnd(partialDetailArray)
{
	var flag=0;
	if(partialDetailArray.length>=1){
		document.getElementById('navigationLegendForITWht').innerHTML = PreviousLiabilityDetails ;
		var cntr = 0;
		var tabObj = document.getElementById("ITWithPreviousDetailsTable");
		for(var l = tabObj.rows.length; l >1 ;l--){
			tabObj.deleteRow(l -1);
		}	
		var period=document.getElementById("ITWhtPeriodMonth").value;
		var dateArray=period.split('-');
		var firstDate=dateArray[0];
		var lastDate= dateArray[1];
		for(var i=0;i<partialDetailArray.length;i++){
			if(partialDetailArray[i].taxperiodFromDtWid!=null && partialDetailArray[i].taxperiodFromDtWid!=""){
				var value=CompareDates(firstDate,partialDetailArray[i].taxperiodFromDtWid);
				if(value==0 || value==2)
					{
					  var val=CompareDates(partialDetailArray[i].taxperiodFromDtWid,lastDate);
					  if(val==0 || val==2)
						{  
						  	flag=1;
							cntr = parseInt(cntr);
							var tabRow = tabObj.insertRow(tabObj.rows.length);
							tabRow.id="itWithHoldeeHdrRow_"+cntr;
							var tabCell = new Array();
							for (var j=0;j<8;j++){
								tabCell[j] = tabRow.insertCell(j);
							}
							var pmtSplDetailVO = partialDetailArray[i];
							var element = document.createElement('input');       
							element.type ='checkbox';
							element.onclick = function () {onSelectAmndmntPrevDetailRadio(this);};
							element.value = cntr;
							element.id = 'itWithHoldeeHdrCheckbox_'+cntr;
							element.name = "itWithHoldeeHdrCheckbox";
							element.className='bordercl';
							tabCell[0].appendChild(element); 
				
				
							tabCell[1].innerHTML = pmtSplDetailVO.prn;
							tabCell[1].style.textAlign="center";
							tabCell[1].style.fontSize="11";
				
							tabCell[2].innerHTML = pmtSplDetailVO.fromDate;
							tabCell[2].style.textAlign="center";
							tabCell[2].style.fontSize="11";
				
							tabCell[3].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.totalAmount).toFixed(2),true);
							tabCell[3].style.textAlign="right";
							tabCell[3].style.fontSize="11";
				
							tabCell[4].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualFineAmount).toFixed(2),true);
							tabCell[4].style.textAlign="right";
							tabCell[4].style.fontSize="11";
				
							tabCell[5].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualPenaltyAmount).toFixed(2),true);
							tabCell[5].style.textAlign="right";
							tabCell[5].style.fontSize="11";
				
							tabCell[6].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualInterestAmount).toFixed(2),true);
							tabCell[6].style.textAlign="right";
							tabCell[6].style.fontSize="11";
				
							cntr = cntr+1;
						}
					}
			}
			
		}
		if(flag==0)
			{
				var table = document.getElementById("ITWithPreviousDetailsTable");
				var tabRow = table.insertRow(tabObj.rows.length);
				var tabCell = new Array();
				tabCell[0] = tabRow.insertCell(0);
				tabCell[0].innerHTML ="System has not found any PRN for IT-Withholding which are not reconciled. Please select proper period.";
				tabCell[0].style.textAlign="center";
				tabCell[0].colSpan="7";
				tabCell[0].style.color="red";
				document.getElementById("scrollableDiv1").style.height='60px';
			}
		else
		{
			var px= cntr*35;
			if(px<100){
				px=80;
			}
			if(px>270)
			{
				px=270;
			}
			document.getElementById("scrollableDiv1").style.height=px+'px';
		}
		document.getElementById("scrollableDiv1").style.display = "";
		document.getElementById("navigationFieldsetForITWht").style.display = "";
		document.getElementById("ITWithPreviousDetailsTable").style.display = "";
		document.getElementById('hidNavigationFlag').value = "29";
		document.getElementById("uploadDiv").style.display = "none";
		
	}
}
function getVatWhtRolloutDate()
{
		var taxPayerID=document.getElementById('hidTaxPayerId').value;
		var obligationID="29";
		var effDate=null;
		GetObligationRollOutDateDtls.getObligationRollOutDateDtls(obligationID,taxPayerID,{async:false,callback: function(data){
			if(data != 'null' &&  data != null){
				effDate=data.effectiveDate;
			}
		}});
		if(effDate==null)
			{
			alert("error");
			return false;
			}
		else
			{
				var rollOutYear=parseInt(effDate.substr(6, effDate.length));
				var curdate;
				if(trim(document.getElementById('currServerDate').value)!=''){
					curdate = document.getElementById('currServerDate').value ;
				}else{
					curdate=formatDate( Date());
				}
				var curyear = parseInt(curdate.substr(6, curdate.length),10);
				dwr.util.removeAllOptions("VatWhtTaxPeriodYear");
				var oOption=document.createElement("option");
				oOption.text="--Year--";
				oOption.value="-1";
				document.getElementById("VatWhtTaxPeriodYear").add(oOption);
				for(var i=rollOutYear; i <= curyear; i++) 
					{
						var oOption=document.createElement("option");
						optionId=i;
						optionValue=i;
						oOption.text=optionValue;
						oOption.value=optionId;
						oOption.title=optionValue;
						document.getElementById("VatWhtTaxPeriodYear").add(oOption);
					}
				return true;
			}
}
function onChangeYear(obj)
{
	if (document.getElementById('cmbTaxSubHead').value== WithHoldee){
	

		if(obj.value==-1)
			{
				document.getElementById("ITWhtPeriodMonth").selectedIndex=-1;
			}
		if(onChangeYearValidation())
		{
				//getSelectedMonthOfSelectedYearWeb('VatWhtTaxPeriodYear','VatWhtPeriodMonth','true');
			if(obj.selectedIndex!= 0)
			{
			document.getElementById('ITWhtPeriodMonth').disabled=false;
			GetMonthsForVatWithholding.getMonthsForVatWithholding(document.getElementById('ITWhtTaxPeriodYear').value, 
					document.getElementById('initialLoginPin').value,WithHoldee, {async:false,callback:function(data){
					if(data!=null){
						if(data.length>=1)
						{
							dwr.util.removeAllOptions(document.getElementById("ITWhtPeriodMonth"));
							var oOption = document.createElement("OPTION"); 
							oOption.text="--Month--"; 
							oOption.value="-1"; 
							document.getElementById("ITWhtPeriodMonth").add(oOption); 
							dwr.util.addOptions(document.getElementById("ITWhtPeriodMonth"),data,'fromDate','toDate');
							return true;
						}
					}
					else{
						alert("error fetching data.");
					}
			}});
		}
		}else
			{
			document.getElementById('VatWhtPeriodMonth').disabled=true;
			return true;
			}
		
		
	}else if (document.getElementById('cmbTaxSubHead').value== VatWithholding) {
	if(obj.value==-1)
		{
			document.getElementById("VatWhtPeriodMonth").selectedIndex=-1;
		}
	if(onChangeYearValidation())
	{
			//getSelectedMonthOfSelectedYearWeb('VatWhtTaxPeriodYear','VatWhtPeriodMonth','true');
		if(obj.selectedIndex!= 0)
		{
		document.getElementById('VatWhtPeriodMonth').disabled=false;
		GetMonthsForVatWithholding.getMonthsForVatWithholding(document.getElementById('VatWhtTaxPeriodYear').value, 
				document.getElementById('initialLoginPin').value,VatWithholding, {async:false,callback:function(data){
				if(data!=null){
					if(data.length>=1)
					{
						dwr.util.removeAllOptions(document.getElementById("VatWhtPeriodMonth"));
						var oOption = document.createElement("OPTION"); 
						oOption.text="--Month--"; 
						oOption.value="-1"; 
						document.getElementById("VatWhtPeriodMonth").add(oOption); 
						dwr.util.addOptions(document.getElementById("VatWhtPeriodMonth"),data,'fromDate','toDate');
						return true;
					}
				}
				else{
					alert("error fetching data.");
				}
		}});
	}
	}else
		{
		document.getElementById('VatWhtPeriodMonth').disabled=true;
		return true;
		}
	}else {
		if(obj.value==-1)
		{
			document.getElementById("VisPeriodMonth").selectedIndex=-1;
		}
	if(onChangeYearValidation())
	{
			//getSelectedMonthOfSelectedYearWeb('VatWhtTaxPeriodYear','VatWhtPeriodMonth','true');
		if(obj.selectedIndex!= 0)
		{
		document.getElementById('VisPeriodMonth').disabled=false;
		var vatImportedServices = document.getElementById('cmbTaxSubHead').value;
		GetMonthsForVatWithholding.getMonthsForVatWithholding(document.getElementById('VisTaxPeriodYear').value, 
				document.getElementById('initialLoginPin').value,vatImportedServices, {async:false,callback:function(data){
				if(data!=null){
					if(data.length>=1)
					{
						dwr.util.removeAllOptions(document.getElementById("VisPeriodMonth"));
						var oOption = document.createElement("OPTION"); 
						oOption.text="--Month--"; 
						oOption.value="-1"; 
						document.getElementById("VisPeriodMonth").add(oOption); 
						dwr.util.addOptions(document.getElementById("VisPeriodMonth"),data,'fromDate','toDate');
						return true;
					}
				}
				else{
					alert("error fetching data.");
				}
		}});
	}
	}else
		{
		document.getElementById('VisPeriodMonth').disabled=true;
		return true;
		}
		
	}
}

function onChangeMonth(obj)
{
	var val=obj.value;
	if(document.getElementById('cmbTaxSubHead').value== VatWithholding || document.getElementById('cmbTaxSubHead').value=="VAT-Withholding"){
		if(val!=-1)
		{
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligationAmnd("N");
		}	
	}
	else if (document.getElementById('cmbTaxSubHead').value== WithHoldee){
		if(val!=-1)
		{
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligationAmnd("N");
		}	
	}
	/*Added for cancellation of VIS payment Ticket :: 66743*/
	else if (document.getElementById('cmbTaxSubHead').value== "10"){
		if(val!=-1)
		{
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligationAmnd("N");
		}	
	}
	
	//END
}
function amendmentOrNormal(obj)
{
	if(obj.value=='amendment')
		{
			document.getElementById('chooseExcelPaymentMethod').style.display='';
			document.getElementById('fileVATWith').disabled=true;
			document.getElementById('instructionsTable').style.display='none';
		}
	else if(obj.value=='normal')
		{
			document.getElementById('chooseExcelPaymentMethod').style.display='none';
			document.getElementById('VatWithPreviousDetailsTable').style.display='none';
			clear_table_data("VatWithPreviousDetailsTable");
			document.getElementById('VatWhtTaxPeriodYear').selectedIndex=0;
			document.getElementById('VatWhtPeriodMonth').selectedIndex=0;
			document.getElementById('navigationFieldsetForVatWht').style.display='none';
			document.getElementById("scrollableDiv").style.display = 'none';
			document.getElementById('fileVATWith').disabled=false;
			document.getElementById('instructionsTable').style.display='';
			document.getElementById('amendButton').style.display='none';
		}
}

function amendmentOrNormalITWHT(obj)
{
	if(obj.value=='amendment')
		{
			document.getElementById('chooseExcelPaymentMethodIT').style.display='';
			document.getElementById('file').disabled=true;
			document.getElementById('instructionsTableIT').style.display='none';
			document.getElementById('isAmendment').value='Y';
		}
	else if(obj.value=='normal')
		{
			document.getElementById('chooseExcelPaymentMethodIT').style.display='none';
			document.getElementById('ITWithPreviousDetailsTable').style.display='none';
			clear_table_data("ITWithPreviousDetailsTable");
			document.getElementById('ITWhtTaxPeriodYear').selectedIndex=0;
			document.getElementById('ITWhtPeriodMonth').selectedIndex=0;
			document.getElementById('navigationFieldsetForITWht').style.display='none';
			document.getElementById("scrollableDiv1").style.display = 'none';
			document.getElementById('file').disabled=false;
			document.getElementById('instructionsTableIT').style.display='';
			document.getElementById('amendButton1').style.display='none';
			document.getElementById('isAmendment').value='N';
		}
}

function amendmentOrNormalRIWHT(obj)
{
	if(obj.value=='amendment')
		{
			document.getElementById('chooseExcelPaymentMethodRI').style.display='';
			document.getElementById('file').disabled=true;
			document.getElementById('instructionsTableRI').style.display='none';
			document.getElementById('isAmendment').value='Y';
		}
	else if(obj.value=='normal')
		{
			document.getElementById('chooseExcelPaymentMethodRI').style.display='none';
			document.getElementById('RIWithPreviousDetailsTable').style.display='none';
			clear_table_data("RIWithPreviousDetailsTable");
			document.getElementById('RIWhtTaxPeriodYear').selectedIndex=0;
			document.getElementById('RIWhtPeriodMonth').selectedIndex=0;
			document.getElementById('navigationFieldsetForRIWht').style.display='none';
			document.getElementById("scrollableDiv1").style.display = 'none';
			document.getElementById('file').disabled=false;
			document.getElementById('instructionsTableRI').style.display='';
			document.getElementById('amendButton1').style.display='none';
			document.getElementById('isAmendment').value='N';
		}
}


function checkIfReconsiled()
{
	
	var prnExists=false;
	var  tableObj =document.getElementById('ITWithPreviousDetailsTable');
	// fetching selected PRN from html
	var prn=null;
	if(tableObj.rows.length > 1){
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(document.getElementById('itWithHoldeeHdrCheckbox_'+(i-1)).checked){
				if (document.all) {// for IE
					prn = tableObj.rows[i].cells[1].innerText;
				}
				else{
					var innrhtmltext = tableObj.rows[i].cells[1].textContent;
					prn = innrhtmltext; 
				}
			}}}
	
	

	var obligationId = "";
	var taxPayerId=document.getElementById('hidTaxPayerId').value;
	var startIndexStr=document.getElementById('startIndex').value;

	if( document.getElementById('cmbTaxSubHead').value==WithHoldee)
	{
		obligationId=WithHoldee;
	}
	if( document.getElementById('cmbTaxSubHead').value==PT)
	{
		obligationId=PT;
	}

	var fromDate = document.getElementById('hidObligationFromDate').value;
	var toDate = document.getElementById('hidObligationToDate').value;

	FetchSplOblHdrWebByObligationAmnd.fetchSplOblHdrWebByObligationAmnd(fromDate,toDate,taxPayerId,obligationId,'N',startIndexStr,{async:false,callback: function(data) {
		pmtSplDetailVOListForPartial =  data;
		var count=0;	

		if(pmtSplDetailVOListForPartial!= null && pmtSplDetailVOListForPartial[0].isDataAvailable=="Y"){
			partialDetailArray.length=0;
			for(var i = 0; i< pmtSplDetailVOListForPartial.length ; i++){
				var pmtSplDetailVO = pmtSplDetailVOListForPartial[i];
				if (prn==pmtSplDetailVO.prn)
					{
					prnExists=true;
					break;
					}
			}
			if (prnExists)
				{
				cancelITPRN();
				return true;
				}
			else
				{
				alert("Either of the PRN/PRN's is/are reconsiled or suspended.");
				return false;
				}
		}
	
	}});

}

function cancelITPRN(){
	var  tableObj =document.getElementById('ITWithPreviousDetailsTable');
	var obligationId="";
	var pinNo="";
	if(document.getElementById('cmbTaxHead').value==IT && document.getElementById('cmbTaxSubHead').value==WithHoldee)
	{
		obligationId=WithHoldee;
	}
	document.getElementById('prnString').value='';
	var prnstring ='';
	var prn = null; 
	if(tableObj.rows.length > 1){
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(document.getElementById('itWithHoldeeHdrCheckbox_'+(i-1)).checked){
				if (document.all) {// for IE
					prn = tableObj.rows[i].cells[1].innerText;
				}
				else{
					var innrhtmltext = tableObj.rows[i].cells[1].textContent;
					prn = innrhtmltext; 
				}
				
				prnstring =prnstring.concat(prn+',');
			}

		}
		if(prnstring.length==0){
			alert("Please select Prn for Cancellation");
		}else{
				document.getElementById('prnString').value=prnstring;
				//var excelFor=document.getElementById("excelForPaymentOrAdv").value;
				pinNo = document.getElementById('txtPin').value ;
				
				if (confirm('Are you sure you want to cancel the  PRN(s) ?')){
					showProgressbar();
					document.getElementById('cmdSaveOblig').disabled=false;//changed
					document.getElementById('cancelITPayment').disabled = true;
					document.getElementById('amendPayment').disabled = true;
					cnclPRN(pinNo,prnstring,obligationId);
				}
		
		

	}/*else{
		alert("No payment details avalible for this period");
	}*/
}
}




function cnclPRN(pinNo,prnstring,obligationId){
	
	$.ajax({
        url: 'paymentRegistration.htm?actionCode=cancelSelectedITWthPRNs',
        type: 'post',
        dataType: 'json',
        data: {"pinNo": pinNo,"prnString" : prnstring ,"obligationId":obligationId},
        success: function (data) {
        	if(data){
        	hideProgressbar();
			alert("PRN(s) cancelled successfully");
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligationAmnd("N");
			document.getElementById('cancelITPayment').disabled = false;
			document.getElementById('amendPayment').disabled = false;
			}
        	else{
				hideProgressbar();
				alert("Cannot cancel the PRN(s). Please try again");
				document.getElementById('cancelITPayment').disabled = false;
				document.getElementById('amendPayment').disabled = false;
			}
        },
        error: function (textStatus, errorThrown) {
           // Success = false;//doesnt goes here
        	hideProgressbar();
        }
    });
	
	
	/*CancelAdvPRNs.cancelSelectedPRNs(prnstring,obligationId,pinNo,{async:false,callback: function(data){
		var success=data;
		if(data==true)
			{
			hideProgressbar();
			alert("PRN(s) cancelled successfully");
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligationAmnd("N");
			document.getElementById('cancelITPayment').disabled = false;
			document.getElementById('amendPayment').disabled = false;
			}
		else if(data==false)
			{
			hideProgressbar();
			alert("Cannot cancel the PRN(s). Please try again");
			document.getElementById('cancelITPayment').disabled = false;
			document.getElementById('amendPayment').disabled = false;
			}
	}
});*/
}

function onSelectVatWithHoldeePrevDetailRadio(obj)
{
	var rows = document.getElementById('VatWithPreviousDetailsTable').rows.length;
	var flag=false;
	for(var i=0; i<rows-1;i++)
		{
			if(document.getElementById('vatWithHoldeeHdrCheckbox_'+i).checked==true)
				{
					flag=true;
				}
		}
	if(flag==true)
		{
		 document.getElementById('amendButton').style.display='';
		 document.getElementById('fileVATWith').disabled=false;
		 return true;
		}
	else
		{
			document.getElementById('amendButton').style.display='none';
			 document.getElementById('fileVATWith').disabled=true;
			 document.getElementById('fileVATWith').value='';
			return false;
		}
}


function onSelectAmndmntPrevDetailRadio(obj)
{
	var rows = document.getElementById('ITWithPreviousDetailsTable').rows.length;
	var flag=false;
	for(var i=0; i<rows-1;i++)
		{
			if(document.getElementById('itWithHoldeeHdrCheckbox_'+i).checked==true)
				{
					flag=true;
				}
		}
	if(flag==true)
		{
		 document.getElementById('amendButton1').style.display='';
		 document.getElementById('file').disabled=false;
		 return true;
		}
	else
		{
			document.getElementById('amendButton1').style.display='none';
			 document.getElementById('file').disabled=true;
			 document.getElementById('file').value='';
			return false;
		}
}


function checkAmendmentOrNormal()
{
	if(document.getElementById('excelVATWithPmtTypeRadio1').checked==true)
		{
			var rows = document.getElementById('VatWithPreviousDetailsTable').rows.length;
			var flag=false;
			for(var i=0; i<rows-1;i++)
				{
					if(document.getElementById('vatWithHoldeeHdrCheckbox_'+i).checked==true)
						{
							flag=true;
						}
				}
			if(!flag==true)
				{
					alert("Please select a PRN to amend.");
					document.getElementById('fileVATWith').value='';
					return false;
				}
		}
}
function downloadVatWhtPrnAmendment(){
	var  tableObj =document.getElementById('VatWithPreviousDetailsTable');
	document.getElementById('prnString').value='';
	var prnstring ='';
	var prn = null; 
	if(tableObj.rows.length > 1){
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(document.getElementById('vatWithHoldeeHdrCheckbox_'+(i-1)).checked){
				if (document.all) {// for IE
					prn = tableObj.rows[i].cells[1].innerText;
				}
				else{
					var innrhtmltext = tableObj.rows[i].cells[1].textContent;
					prn = innrhtmltext; 
				}
				
				prnstring =prnstring.concat(prn+',');
			}

		}
		if(prnstring.length==0){
			alert("Please select Prn for amendedment");
		}else{
			document.getElementById('prnString').value=prnstring;
			var excelFor=document.getElementById("excelForPaymentOrVatWht").value;
			if(excelFor=="forVatOnly")
				{
					if (confirm('Are you sure you want to download amendment ?')){
						document.getElementById('cmdSaveOblig').disabled=false;//changed
						document.VATWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode=downloadPaymentAmendment";
						document.VATWitholdingPaymentRegForm.submit();
					}
				}
			else
				{
				if (confirm('Are you sure you want to download amendment ?')){
					document.getElementById('cmdSaveOblig').disabled=false;//changed
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=downloadPaymentAmendment";
					document.paymentRegForm.submit();
				}
			}
		}
		

	}else{
		alert("No payment details avalible  this period");
	}
}

function downloadITWhtPrnAmendment(){
	var  tableObj =document.getElementById('ITWithPreviousDetailsTable');
	document.getElementById('prnString').value='';
	var prnstring ='';
	var prn = null; 
	if(tableObj.rows.length > 1){
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(document.getElementById('itWithHoldeeHdrCheckbox_'+(i-1)).checked){
				if (document.all) {// for IE
					prn = tableObj.rows[i].cells[1].innerText;
				}
				else{
					var innrhtmltext = tableObj.rows[i].cells[1].textContent;
					prn = innrhtmltext; 
				}
				
				prnstring =prnstring.concat(prn+',');
			}

		}
		if(prnstring.length==0){
			alert("Please select Prn for amendedment");
		}else{
			document.getElementById('prnString').value=prnstring;			
			document.getElementById('cmbTaxSubHead').value=WithHoldee;
				if (confirm('Are you sure you want to download amendment ?')){
					document.getElementById('cmdSaveOblig').disabled=false;//changed
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=downloadPaymentAmendment";
					document.paymentRegForm.submit();
				}			
		}	
		document.getElementById("uploadDiv").style.display = "";

	}else{
		alert("No payment details avalible  this period");
	}
}

function clearAllVATWthData()
{
	resetVATWithholdeeInfo();
	document.getElementById("specOblVATWithPmtTypeRadio1").checked=false;
	document.getElementById("specOblVATWithPmtTypeRadio2").checked=false;
	clear_table_data('VATWithholdeeFormTable');
}
function clearAllAdditionalAssmntData()
{
	resetAdditionalAssmntDtls();
	clear_table_data('VATWHTAdditionalAssmntTable');
}
function resetAdditionalAssmntDtls()
{
	document.getElementById('in_VATWHTAdditionalAssmntTable_3').value="";
	document.getElementById('in_VATWHTAdditionalAssmntTable_4').value="";
	document.getElementById('in_VATWHTAdditionalAssmntTable_5').value="";
	document.getElementById('totalVATAddAssAmountid').value="";/*Added by kirui on 16062022*/
}
function resetAdditionalAssmntDtlsForRentWht()
{
	document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_3').value="";
	document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_4').value="";
	document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_5').value="";
	document.getElementById('totalMRIAddAssAmountid').value="";
}
function fetchVATWHTAssessmentDetails(obj)
{
if(document.getElementById('in_VATWHTAdditionalAssmntTable_3').value!=null 
				&& document.getElementById('in_VATWHTAdditionalAssmntTable_3').value!='')
		{
			var paramArray = new Array();
			paramArray[0] = obj;
			paramArray[1]=document.getElementById('txtPin');
			paramArray[2]=document.getElementById('cmbPaymentType');
			paramArray[3]=document.getElementById('cmbTaxSubHead');
			paramArray[4]=null;
			FetchAdditionalAssessmentDetails.fetchAdditionalAssessmentDetails(paramArray[0].value, 
					paramArray[1].value,paramArray[2].value, paramArray[3].value,paramArray[4],{async:false,callback:function(data){
					if(data!=null){
						if(data.errorMsg!=null && data.errorMsg!="")
						{
							alert(data.errorMsg);
							resetAdditionalAssmntDtls();
						}else{/*Edited by kirui on 16062022*/
						document.getElementById('totalVATAddAssAmountid').value=data.totalAmountForAdditionalAssessment;
						document.getElementById('totalVATAddAssAmountid').value=convertToKenyanShillingFormatVal(document.getElementById('totalVATAddAssAmountid').value);
						document.getElementById('in_VATWHTAdditionalAssmntTable_4').value=data.taxPeriodForAdditionalAssessment;
						document.getElementById('in_VATWHTAdditionalAssmntTable_6').value=data.bclSplObligationHdrId;
						document.getElementById('in_VATWHTAdditionalAssmntTable_7').value=data.bclSplVATWithholdingHdrId;
						}
					}
					else{
						alert("Error fetching data.");
					}
			}});
		}
	else{
		alert("Please enter Assessment Notice Number.");
		resetAdditionalAssmntDtls();
		return false;
	}
}
/*added by Kirui 27062022 for part payment Enhancement :: Start*/
function addCommaToAmountToBePaidVATWHT()
{
	document.getElementById('in_VATWHTAdditionalAssmntTable_5').value=convertToKenyanShillingFormatVal(document.getElementById('in_VATWHTAdditionalAssmntTable_5').value);
}
/*added by Kirui 27062022 for part payment Enhancement :: End*/

function fetchRentWHTAssessmentDetails(obj)
{
if(document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_3').value!=null 
				&& document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_3').value!='')
		{
			var paramArray = new Array();
			paramArray[0] = obj;
			paramArray[1]=document.getElementById('txtPin');
			paramArray[2]=document.getElementById('cmbPaymentType');
			paramArray[3]=document.getElementById('cmbTaxSubHead');
			paramArray[4]=null;
			FetchAdditionalAssessmentDetails.fetchAdditionalAssessmentDetails(paramArray[0].value, 
					paramArray[1].value,paramArray[2].value, paramArray[3].value,paramArray[4],{async:false,callback:function(data){
					if(data!=null){
						if(data.errorMsg!=null && data.errorMsg!="")
						{
							alert(data.errorMsg);
							resetAdditionalAssmntDtlsForRentWht();
						}else{
						document.getElementById('totalMRIAddAssAmountid').value=data.totalAmountForAdditionalAssessment;
						document.getElementById('totalMRIAddAssAmountid').value=convertToKenyanShillingFormatVal(document.getElementById('totalMRIAddAssAmountid').value);						
						document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_4').value=data.taxPeriodForAdditionalAssessment;
						//document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_5').value);
						document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_6').value=data.bclSplObligationHdrId;
						document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_7').value=data.bclSplRentWithholdingHdrId;
						}
					}
					else{
						alert("Error fetching data.");
					}
			}});
		}
	else{
		alert("Please enter Assessment Notice Number.");
		resetAdditionalAssmntDtlsForRentWht();
		return false;
	}
}

function addCommaToAmountToBePaidWHTRental()
{
	document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_5').value=convertToKenyanShillingFormatVal(document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_5').value);
}
function validateVATWithAssessmentDetails()
{
 if(document.getElementById("in_VATWHTAdditionalAssmntTable_3").value=='' || 
   			document.getElementById("in_VATWHTAdditionalAssmntTable_3").value==null)
	   		{
	   			alert("Please enter Assessment Notice Number.");
	   			return false;
	   		}
 if(document.getElementById("in_VATWHTAdditionalAssmntTable_4").value=='' || 
   			document.getElementById("in_VATWHTAdditionalAssmntTable_4").value==null)
	   		{
	   			return false;
	   		}
 if(document.getElementById("in_VATWHTAdditionalAssmntTable_5").value=='' || 
   			document.getElementById("in_VATWHTAdditionalAssmntTable_5").value==null)
	   		{
	   			alert("Amount to be paid can not be 0.");
	   			document.getElementById("in_VATWHTAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
 if(document.getElementById("in_VATWHTAdditionalAssmntTable_5").value!='' || 
   			document.getElementById("in_VATWHTAdditionalAssmntTable_5").value!=null)
	   		{
 			var amt= parseInt(document.getElementById("in_VATWHTAdditionalAssmntTable_5").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Amount to be paid can not be 0.");
		 				document.getElementById("in_VATWHTAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
 /*Edited by kirui on 16062022 :: Start*/
 if(document.getElementById("totalVATAddAssAmountid").value=='' || 
			document.getElementById("totalVATAddAssAmountid").value==null)
	   		{
	   			alert("Additional Assessment Amount can not be 0.");
	   			document.getElementById("in_VATWHTAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
if(document.getElementById("totalVATAddAssAmountid").value!='' || 
			document.getElementById("totalVATAddAssAmountid").value!=null)
	   		{
			var amt= parseInt(document.getElementById("totalVATAddAssAmountid").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Additional Assessment Amount can not be 0.");
		 				document.getElementById("in_VATWHTAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
if(document.getElementById("in_VATWHTAdditionalAssmntTable_5").value!='' || 
			document.getElementById("in_VATWHTAdditionalAssmntTable_5").value!=null ||
			document.getElementById("totalVATAddAssAmountid").value!='' || 
			document.getElementById("totalVATAddAssAmountid").value!=null)
   		{
			var amtToBePaidAss= parseInt(removeCommaFrmInput(document.getElementById("in_VATWHTAdditionalAssmntTable_5").value));
			var totalAssAmt= removeCommaFrmInput(document.getElementById('totalVATAddAssAmountid').value);
 			if(amtToBePaidAss > totalAssAmt)
 				{
 					alert("Amount to be Paid can not be greater than the Total Amount");
 					document.getElementById("in_VATWHTAdditionalAssmntTable_5").value='';
		   			return false;
 				}
 			else if(isNaN(amtToBePaidAss))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_VATWHTAdditionalAssmntTable_5").value='';
 				return false;
 			}
 			else if(isNaN(totalAssAmt))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_VATWHTAdditionalAssmntTable_5").value='';
 				return false;
 			}
   		}/*Edited by kirui on 16062022 :: End*/
		
	 return true;
}
function validateRentIncomeWithAssessmentDetails()
{
 if(document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_3").value=='' || 
   			document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_3").value==null)
	   		{
	   			alert("Please enter Assessment Notice Number.");
	   			return false;
	   		}
 if(document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_4").value=='' || 
   			document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_4").value==null)
	   		{
	   			return false;
	   		}
 if(document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value=='' || 
   			document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value==null)
	   		{
	   			alert("Amount to be paid can not be 0.");
	   			document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
 if(document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value!='' || 
   			document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value!=null)
	   		{
 			var amt= parseInt(document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Amount to be paid can not be 0.");
		 				document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
 /*Edited by kirui on 16062022 :: Start*/
 if(document.getElementById("totalMRIAddAssAmountid").value=='' || 
			document.getElementById("totalMRIAddAssAmountid").value==null)
	   		{
	   			alert("Additional Assessment Amount can not be 0.");
	   			document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
if(document.getElementById("totalMRIAddAssAmountid").value!='' || 
			document.getElementById("totalMRIAddAssAmountid").value!=null)
	   		{
			var amt= parseInt(document.getElementById("totalMRIAddAssAmountid").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Additional Assessment Amount can not be 0.");
		 				document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
if(document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value!='' || 
			document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value!=null ||
			document.getElementById("totalMRIAddAssAmountid").value!='' || 
			document.getElementById("totalMRIAddAssAmountid").value!=null)
   		{
			var amtToBePaidAss= parseInt(removeCommaFrmInput(document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value));
			var totalAssAmt= removeCommaFrmInput(document.getElementById('totalMRIAddAssAmountid').value);
			if(amtToBePaidAss > totalAssAmt)
 				{
 					alert("Amount to be Paid can not be greater than the Total Amount");
 					document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value='';
		   			return false;
 				}
 			else if(isNaN(amtToBePaidAss))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value='';
 				return false;
 			}
 			else if(isNaN(totalAssAmt))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_RentIncomeWHTAdditionalAssmntTable_5").value='';
 				return false;
 			}
   		}/*Edited by kirui on 16062022 :: End*/
	 return true;
}
function addrowAssessmentDetails()
{
	/*Ticket 62967*/
	if(checkDuplicateVatWithAssessmentRows() && checkPaymentDetailsEntries()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('VATWHTAdditionalAssmntTable','3','5','3','validateDeleteRowVATWHTAdditionalAssmntTable','','N','N','6,7');
			/*Added by Ben on 16062022 :: Start  clearing totalAmount on add*/
			document.getElementById('totalVATAddAssAmountid').value =  "";
	   	   }
   
   }
}
function addrowRentIncomeAssessmentDetails()
{
	if(checkDuplicateRentIncomeWithAssessmentRows()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('RentIncomeWHTAdditionalAssmntTable','3','5','3','validateDeleteRowRentWHTAdditionalAssmntTable','','N','N','6,7');
		   }
		/*Added by Ben on 21062022 :: Start  clearing totalAmount on add*/
		document.getElementById('totalMRIAddAssAmountid').value =  "";
   }
}
function checkDuplicateRentIncomeWithAssessmentRows()
{
	var table = document.getElementById('RentIncomeWHTAdditionalAssmntTable');  
var assmntNo = document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_3').value;
var taxPeriod= document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_4').value;
	if(!(table.rows.length==1))
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'RentIncomeWHTAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
				(table.rows[i].cells[3].innerHTML==assmntNo) && (table.rows[i].cells[4].innerHTML==taxPeriod))
			{
				alert("You already added this details.");
				return false;
			}
		}
	}
	return true;
}
function checkDuplicateVatWithAssessmentRows()
{
	var table = document.getElementById('VATWHTAdditionalAssmntTable');  
var assmntNo = document.getElementById('in_VATWHTAdditionalAssmntTable_3').value;
var taxPeriod= document.getElementById('in_VATWHTAdditionalAssmntTable_4').value;
	if(!(table.rows.length==1))
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'VATWHTAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
				(table.rows[i].cells[3].innerHTML==assmntNo) && (table.rows[i].cells[4].innerHTML==taxPeriod))
			{
				alert("You already added this details.");
				return false;
			}
		}
	}
	return true;
}
function validateDeleteRowRentWHTAdditionalAssmntTable(tab_str, rowno, cols)
{
	var table = document.getElementById('RentIncomeWHTAdditionalAssmntTable');  
	var	totalAmt = removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var tempAmt = table.rows[rowno].cells[5].innerHTML;
	totalAmt = totalAmt - parseInt(removeCommaFrmInput(tempAmt),"10");
	document.getElementById('txtTotalAmountPaidOblig').value =  totalAmt;
	document.getElementById('txtTotalAmountPaidOblig').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true);
}
function validateDeleteRowVATWHTAdditionalAssmntTable(tab_str, rowno, cols)
{
	var table = document.getElementById('VATWHTAdditionalAssmntTable');  
	var	totalAmt = removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var tempAmt = table.rows[rowno].cells[5].innerHTML;
	totalAmt = totalAmt - parseInt(removeCommaFrmInput(tempAmt),"10");
	document.getElementById('txtTotalAmountPaidOblig').value =  totalAmt;
	document.getElementById('txtTotalAmountPaidOblig').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true);
}
function afterAddVATWHTAssmntTable()
{
	if(document.getElementById('forSpecialPayPointPage').value!='true')
		{
			TotalAssmntAmt=convertToKenyanShillingFormatVal(parseInt(VATWithHoldingAssmntTax,10)+parseInt(TotalAssmntAmt,10),true);
			document.getElementById('txtTotalAmountPaidOblig').value=TotalAssmntAmt;
		}
}
//added to check duplicate tax period 
function beforeAddVATWHTAssmntTable(row){
	var checkDuplicateFlag = checkMonthYearInAddRowForAssmnt(row,'VATWHTAdditionalAssmntTable');
	if(checkDuplicateFlag==false)
	{
		return false;
	}
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	VATWithHoldingAssmntTax=removeCommaFrmInput(document.getElementById('in_VATWHTAdditionalAssmntTable_5').value);
	TotalAssmntAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	}
}
function checkMonthYearInAddRowForAssmnt(r,id)
{
	rows=r;
	{

		document.getElementById(id).value;
		var transactionDate=document.getElementById('in_'+id+'_4').value.substr(2, document.getElementById('in_'+id+'_4').value.length);
		var tabObj1 = document.getElementById(id);
		if(tabObj1.rows.length==1)
		{
		}
		else
		{ 	
			for (var i = 1, n = tabObj1.rows.length; i <n; i++) 
			{ 
				
				if((trim(document.getElementById('id_temp_'+id+'_'+i+'_1').value))=="Delete" &&  (tabObj1.rows[i].cells[4].innerHTML.substr(2, tabObj1.rows[i].cells[4].innerHTML.length)!=transactionDate) && (tabObj1.rows[i].cells[2].innerHTML.indexOf('Modifying')==-1))
				{
					alert(cntGenPaymentslip);
					return false;
				}
			}
		}

		return true;
	}

}

function afterAddRentWHTAssmntTable()
{
	if(document.getElementById('forSpecialPayPointPage').value!='true')
		{
			TotalAssmntAmt=convertToKenyanShillingFormatVal(parseInt(RentWithHoldingAssmntTax,10)+parseInt(TotalAssmntAmt,10),true);
			document.getElementById('txtTotalAmountPaidOblig').value=TotalAssmntAmt;
		}
}
function beforeAddVATWHTAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	VATWithHoldingAssmntTax=removeCommaFrmInput(document.getElementById('in_VATWHTAdditionalAssmntTable_5').value);
	TotalAssmntAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	}
}

function beforeAddRentWHTAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	RentWithHoldingAssmntTax=removeCommaFrmInput(document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_5').value);
	TotalAssmntAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	}

}	

function afterModifyVATWHTAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	var table = document.getElementById('VATWHTAdditionalAssmntTable');
	var tmpAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var newAmt=table.rows[rowno].cells[5].innerHTML;
	var newAmountArray=newAmt.split('<');
	newAmt=newAmountArray[0];
	document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(parseInt(tmpAmt,10)+parseInt(removeCommaFrmInput(newAmt),"10")-parseInt(removeCommaFrmInput(VATWithHoldingAssmntTax),10),true); 
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
	}
}
function afterModifyRentWHTAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	var table = document.getElementById('RentIncomeWHTAdditionalAssmntTable');
	var tmpAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var newAmt=table.rows[rowno].cells[5].innerHTML;
	var newAmountArray=newAmt.split('<');
	newAmt=newAmountArray[0];
	document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(parseInt(tmpAmt,10)+parseInt(removeCommaFrmInput(newAmt),"10")-parseInt(removeCommaFrmInput(RentWithHoldingAssmntTax),10),true); 
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
	}
}
function beforeModifyVATWHTAssmntTable(row){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	if(checkDuplicateVatWithAssessmentRows()){
		rowno=row;
		var table = document.getElementById('VATWHTAdditionalAssmntTable');
		VATWithHoldingAssmntTax=table.rows[rowno].cells[5].innerHTML;
		var amtToPaidWithHoldeeArray=VATWithHoldingAssmntTax.split('<');
		VATWithHoldingAssmntTax=amtToPaidWithHoldeeArray[0];
	}
	else {
		return false;
	}
	}
}
function beforeModifyRentWHTAssmntTable(row){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	if(checkDuplicateRentIncomeWithAssessmentRows()){
		rowno=row;
		var table = document.getElementById('RentIncomeWHTAdditionalAssmntTable');
		RentWithHoldingAssmntTax=table.rows[rowno].cells[5].innerHTML;
		var amtToPaidWithHoldeeArray=RentWithHoldingAssmntTax.split('<');
		RentWithHoldingAssmntTax=amtToPaidWithHoldeeArray[0];
	}
	else {
		return false;
	}
	}
}
function onchangeOfPaymentType(obj)
{
	if(obj.value==SAT)
		{
			document.getElementById('specOblVATWithPmtTypeRadio1').checked=false;
			document.getElementById('specOblVATWithPmtTypeRadio2').checked=false;
			document.getElementById('specOblVATWithPmtTypeRadio1').style.display="";
			document.getElementById('specOblVATWithPmtTypeRadio2').style.display="";
			document.getElementById('specOblVATWithPmtTypeRadio1ForPayPointSpl').style.display="";
			document.getElementById('specOblVATWithPmtTypeRadio2ForPayPointSpl').style.display="";
			document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
			document.getElementById('paymentVATWithExcelUploadForm').style.display="none";
			document.getElementById('paymentVATWitholdingWebForm').style.display="none";
		document.getElementById("total_VATWithholdeeFormTable_10").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
			document.getElementById("total_VATWHTAdditionalAssmntTable_5").setAttribute("name", "VatWitholdingTotalAmt");
		}
	else if(obj.value==AAT)
		{
			document.getElementById('specOblVATWithPmtTypeRadio1').checked=false;
			document.getElementById('specOblVATWithPmtTypeRadio2').checked=false;
			document.getElementById('specOblVATWithPmtTypeRadio1').style.display="none";
			document.getElementById('specOblVATWithPmtTypeRadio2').style.display="none";
			document.getElementById('specOblVATWithPmtTypeRadio1ForPayPointSpl').style.display="none";
			document.getElementById('specOblVATWithPmtTypeRadio2ForPayPointSpl').style.display="none";
			document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="";
			document.getElementById('paymentVATWithExcelUploadForm').style.display="none";
			document.getElementById('paymentVATWitholdingWebForm').style.display="none";
		document.getElementById("total_VATWithholdeeFormTable_10").setAttribute("name", "VatWitholdingTotalAmt");
			document.getElementById("total_VATWHTAdditionalAssmntTable_5").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
		}
	else if(obj.value==EAT)
	{
		document.getElementById('specOblVATWithPmtTypeRadio1').checked=false;
		document.getElementById('specOblVATWithPmtTypeRadio2').checked=false;
		document.getElementById('specOblVATWithPmtTypeRadio1').style.display="none";
		document.getElementById('specOblVATWithPmtTypeRadio2').style.display="none";
		document.getElementById('specOblVATWithPmtTypeRadio1ForPayPointSpl').style.display="none";
		document.getElementById('specOblVATWithPmtTypeRadio2ForPayPointSpl').style.display="none";
		document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="";
		document.getElementById('paymentVATWithExcelUploadForm').style.display="none";
		document.getElementById('paymentVATWitholdingWebForm').style.display="none";
	    document.getElementById("total_VATWithholdeeFormTable_10").setAttribute("name", "VatWitholdingTotalAmt");
		document.getElementById("total_VATWHTAdditionalAssmntTable_5").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
	}
}
function addrowAssessmentDetailsForPayPointSpecialPage()
{
	if(checkDuplicateVatWithAssessmentRows()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('VATWHTAdditionalAssmntTable','3','5','5');
		   }
		/*Added by Ben on 21062022 :: Start  clearing totalAmount on add*/
		document.getElementById('totalVATAddAssAmountid').value =  "";
   }
}

function fetchNSSFAmtIncType(obj)
{
document.getElementById("incomeType").value = obj.value;
fetchObligationDTL(document.getElementById("cmbTaxPeriodMonth").value);
}

function savePaymentDetailNSSF()
{	
	if(removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value)>0)
			{
				//hideTab('TabView',5);
				resetErrorList();
				incError=0;
				if(saveConfirm())
				{
					document.getElementById('cmdSaveOblig').disabled=true;
					document.getElementById('cmdClearOblig').disabled=true;
					document.getElementById("txtTotalAmountPaidOblig").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value);
					document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
					document.paymentRegForm.submit();
				}
			}
			else
			{
				alert(totalAmtGreaterThenZero);
				return false;
			}
}
function setBeneBankData(flag)
{
	dwr.util.removeAllOptions('cmbBankName');
	dwr.util.removeAllOptions('beneBankNameRTGS');
	var option=document.createElement("option");
	option.text='--Select--';
	option.value='-1';
	document.getElementById("cmbBankName").add(option); 
	var oOption=document.createElement("option");
	oOption.text='--Select--';
	oOption.value='-1';
	document.getElementById("beneBankNameRTGS").add(oOption); 
	if(flag=='Y')
	{
		for(var j=0;j<nssfEnabledBeneBankData.length;j++)
		{
			var option = document.createElement("option");    
			option.text = nssfEnabledBeneBankData[j].beneBankNameRTGS;     
			option.value = nssfEnabledBeneBankData[j].beneBankIdRTGS;  
			option.title = nssfEnabledBeneBankData[j].beneBankNameRTGS;  
			document.getElementById("cmbBankName").add(option); 
		}
		for(var j=0;j<nssfEnabledBeneBankData.length;j++)
		{
			var option = document.createElement("option");    
			option.text = nssfEnabledBeneBankData[j].beneBankNameRTGS;     
			option.value = nssfEnabledBeneBankData[j].beneBankIdRTGS;  
			option.title = nssfEnabledBeneBankData[j].beneBankNameRTGS;  
			document.getElementById("beneBankNameRTGS").add(option); 
		}
	}else{
		for(var j=0;j<allBeneficiaryBankData.length;j++)
		{
			var option = document.createElement("option");    
			option.text = allBeneficiaryBankData[j].beneBankNameRTGS;     
			option.value = allBeneficiaryBankData[j].beneBankIdRTGS;  
			option.title = allBeneficiaryBankData[j].beneBankNameRTGS;  
			document.getElementById("cmbBankName").add(option); 
		}
		for(var j=0;j<allBeneficiaryBankData.length;j++)
		{
			var option = document.createElement("option");    
			option.text = allBeneficiaryBankData[j].beneBankNameRTGS;     
			option.value = allBeneficiaryBankData[j].beneBankIdRTGS;  
			option.title = allBeneficiaryBankData[j].beneBankNameRTGS;  
			document.getElementById("beneBankNameRTGS").add(option); 
		}
	}
}
function clearNSSFDetails()
{
	document.getElementById("paymentTaxObligForm").style.display='none';

}


//changes done for Enhancement 1
function displayAdvObligRadio()
{
	//document.getElementById("AdvanceTaxpaymentstDiv").style.display="none";
	document.getElementById("AdvanceTaxpaymentRadioDiv").style.display='';
	document.getElementById('paymentAdvTaxWebForm').style.display='none';
	document.getElementById('paymentAdvExcelUploadForm').style.display='none';
	document.getElementById("specOblAdvPmtTypeRadio1").checked=false;
	document.getElementById("specOblAdvPmtTypeRadio2").checked=false;
	document.getElementById("excelAdvPmtTypeRadio1").checked=false;
	document.getElementById("excelAdvPmtTypeRadio2").checked=false;
	document.getElementById('navigationFieldsetForAdv').style.display='none';
	document.getElementById('navigationLegendForAdv').style.display='none';
	document.getElementById('scrollableDiv').style.display='none';
	document.getElementById('scrollableDiv1').style.display='none';
	/*document.getElementById('txtTotalAmountPaidOTR').readOnly=true;*/
	//document.getElementById('txtTotalAmountPayableOTR').style.display='none'; 
	/*document.getElementById('txtTotalAmountPaidOTR').value="0"; 
	document.getElementById('txtTotalAmountPayableOTR').readOnly=true;*/
	//document.getElementById('lblTotalAmountPayable').style.display='none'; 
	document.getElementById("totalAmountPaidTbl").style.display='none';
	document.getElementById("navigationTableSplHdr").style.display='none';
}

function clearAdvTaxDetails()
{
	document.getElementById("totalAmountPaidTbl").style.display='';
	document.getElementById("txtTotalAmountPaidOTR").style.display='';
	document.getElementById("asrk").style.display='';
	document.getElementById("hide1").style.display='';
	document.getElementById("lblTotalAmountPaid").style.display='';
	
	
}
function clearVatWhtAssmntData()
{
	document.getElementById('paymentVATWithAdditionalAssmntForm').style.display="none";
	document.getElementById("paymentVATWithExcelUploadForm").style.display='none';
	document.getElementById("paymentVATWitholdingWebForm").style.display='none';
	clearAllVATWthData();
	clearAllAdditionalAssmntData();
}

function clearITWHTAssmntData()
{
	document.getElementById('paymentITWithAdditionalAssmntForm').style.display="none";
	clearWithholdeeExclDtls();
	clearAllAdditionalAssmntDataITWithholding();
	clearAllAdditionalAssmntDataShipping()
	clearAllAdditionalAssmntDataTrnsMs()
}
//end

//changes done for iTax Prior Assessment
function fetchitaxPriorAssessmentDetails(obj)
{
if(document.getElementById('in_iTaxPriorAssmntTable_3').value!=null 
				&& document.getElementById('in_iTaxPriorAssmntTable_3').value!='')
		{
			var paramArray = new Array();
			var assmntNo=obj.value;
			paramArray[0] = assmntNo.toUpperCase();
			
			paramArray[1]=document.getElementById('txtPin');
			document.getElementById('in_iTaxPriorAssmntTable_3').value=paramArray[0];
			/*paramArray[2]=document.getElementById('cmbPaymentType');
			paramArray[3]=document.getElementById('cmbTaxSubHead');*/
			FetchiTaxPriorAssessmentDetails.fetchiTaxPriorAssessmentDetails(paramArray[0], 
					paramArray[1].value,{async:false,callback:function(data){
					if(data!=null){
						if(data.errorMsg!=null && data.errorMsg!="")
						{
							alert(data.errorMsg);
							resetiTaxPriorAssmntDtls();
						}else{
						document.getElementById('in_iTaxPriorAssmntTable_7').value=data.totalAmountForAdditionalAssessment;
						document.getElementById('in_iTaxPriorAssmntTable_7').value=convertToKenyanShillingFormatVal(document.getElementById('in_iTaxPriorAssmntTable_7').value);
						document.getElementById('in_iTaxPriorAssmntTable_6').value=data.taxPeriodForAdditionalAssessment;
						document.getElementById('in_iTaxPriorAssmntTable_9').value=data.bclSplObligationHdrId;
						document.getElementById('bclSplObligationHdrId').value=data.bclSplObligationHdrId;
						document.getElementById('in_iTaxPriorAssmntTable_4').value=data.typeOfAssmnt;
						document.getElementById('in_iTaxPriorAssmntTable_5').value=data.taxObligation;
						document.getElementById('hidObligationId').value=data.oblId;
						document.getElementById('hidPaymentType').value=LAT;
						}
					}
					else{
						alert("Error fetching data.");
					}
			}});
		}
	else{
		alert("Please enter Legacy Assessment Order Number.");
		resetiTaxPriorAssmntDtls();
		return false;
	}
}

function resetiTaxPriorAssmntDtls()
{
	iTaxModifyFlag=0;
	document.getElementById('in_iTaxPriorAssmntTable_3').value="";
	document.getElementById('in_iTaxPriorAssmntTable_4').value="";
	document.getElementById('in_iTaxPriorAssmntTable_5').value="";
	document.getElementById('in_iTaxPriorAssmntTable_6').value="";
	document.getElementById('in_iTaxPriorAssmntTable_7').value="";
	document.getElementById('in_iTaxPriorAssmntTable_8').value="";
}

function afterModifyiTaxPriorAssmntTable(){

	var table = document.getElementById('iTaxPriorAssmntTable');
	var tmpAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var newAmt=table.rows[rowno].cells[8].innerHTML;
	var newAmountArray=newAmt.split('<');
	newAmt=newAmountArray[0];
	document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(parseInt(tmpAmt,10)+parseInt(removeCommaFrmInput(newAmt),"10")-parseInt(removeCommaFrmInput(itaxPriorAssmntTax),10),true); 
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
	iTaxModifyFlag=0;
}

function beforeModifyiTaxPriorAssmntTable(row){

	if(checkDuplicateiTaxPriorAssessmentRows()){
		iTaxModifyFlag=1;
		rowno=row;
		var table = document.getElementById('iTaxPriorAssmntTable');
		itaxPriorAssmntTax=table.rows[rowno].cells[8].innerHTML;
		var amtToPaidWithHoldeeArray=itaxPriorAssmntTax.split('<');
		itaxPriorAssmntTax=amtToPaidWithHoldeeArray[0];
	}
	else {
		return false;
	}

}

function afterAddiTaxPriorAssmntTable()
{

	TotalPriorAssmntAmt=convertToKenyanShillingFormatVal(parseInt(iTaxPriorAssmntTax,10)+parseInt(TotalPriorAssmntAmt,10),true);
	document.getElementById('txtTotalAmountPaidOblig').value=TotalPriorAssmntAmt;

}

function beforeAddiTaxPriorAssmntTable(){

	iTaxPriorAssmntTax=removeCommaFrmInput(document.getElementById('in_iTaxPriorAssmntTable_8').value);
	TotalPriorAssmntAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);

}

function checkDuplicateiTaxPriorAssessmentRows()
{
	var table = document.getElementById('iTaxPriorAssmntTable');  
	var assmntNo = document.getElementById('in_iTaxPriorAssmntTable_3').value;
	var taxPeriod= document.getElementById('in_iTaxPriorAssmntTable_6').value;
	if(!(table.rows.length==1))
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'iTaxPriorAssmntTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
					(table.rows[i].cells[3].innerHTML==assmntNo) && (table.rows[i].cells[6].innerHTML==taxPeriod))
			{
				alert("You have already added this details.");
				return false;
			}
		}
	}
	return true;
}

function addrowitaxPriorAssessmentDetails()
{
	/*if(!validateFormFields(iTaxPriorAssmntJson))
	{
		getErrTabToggle('TabView','2');	
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
		return false;
	}*/
	
	var tableObj = document.getElementById('iTaxPriorAssmntTable');
	var rowCount=tableObj.rows.length;
/*	if(rowCount>1)
	{
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(tableObj.rows[i].cells[1].textContent!='deleted' || tableObj.rows[i].cells[1].innerText!='deleted'){
				if (document.all) {// for IE
					alert('You can add only 1 Legacy Assessment Order');
					return false;
				}
				else{
					alert('You can add only 1 Legacy Assessment Order');
					return false;
				}
			}

		}
	}*/
	if(checkDuplicateiTaxPriorAssessmentRows()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('iTaxPriorAssmntTable','6','8','8','validateDeleteRowiTaxPriorAssmntTable','','N','N',9);
		   }
   
   }
}

function validateiTaxPriorAssessmentDetails()
{
	if(document.getElementById("in_iTaxPriorAssmntTable_3").value=='' || 
			document.getElementById("in_iTaxPriorAssmntTable_3").value==null)
	{
		alert("Please enter Legacy Assessment Order Number.");
		return false;
	}
	/*if(document.getElementById("in_iTaxPriorAssmntTable_4").value=='' || 
			document.getElementById("in_iTaxPriorAssmntTable_4").value==null)
	{
		return false;
	}
	if(document.getElementById("in_iTaxPriorAssmntTable_5").value=='' || 
			document.getElementById("in_iTaxPriorAssmntTable_5").value==null)
	{
		return false;
	}
	if(document.getElementById("in_iTaxPriorAssmntTable_6").value=='' || 
			document.getElementById("in_iTaxPriorAssmntTable_6").value==null)
	{
		return false;
	}
	if(document.getElementById("in_iTaxPriorAssmntTable_7").value=='' || 
			document.getElementById("in_iTaxPriorAssmntTable_7").value==null)
	{
		return false;
	}*/
	if(document.getElementById("in_iTaxPriorAssmntTable_8").value=='' || 
			document.getElementById("in_iTaxPriorAssmntTable_8").value==null)
	{
		alert("Amount to be paid should be greater than 0.");
		return false;
	}
	if(document.getElementById("in_iTaxPriorAssmntTable_8").value!='' || 
			document.getElementById("in_iTaxPriorAssmntTable_8").value!=null)
	{
		var amt= parseInt(document.getElementById("in_iTaxPriorAssmntTable_8").value);
		if(amt == 0 || amt== 0.0)
		{
			alert("Amount to be paid should be greater than 0.");
			return false;
		}
	}
	var totalAmount= parseInt(removeCommaFrmInput(document.getElementById("in_iTaxPriorAssmntTable_7").value),"10");
	var paidAmt=parseInt(document.getElementById("in_iTaxPriorAssmntTable_8").value,"10");
	if(paidAmt>totalAmount)	{
		alert("Amount to be paid cannot be greater than the Amount Payable");
		return false;
	}
	return true;
}

function validateDeleteRowiTaxPriorAssmntTable(tab_str, rowno, cols)
{
	var table = document.getElementById('iTaxPriorAssmntTable');  
	var	totalAmt = removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var tempAmt = table.rows[rowno].cells[8].innerHTML;
	totalAmt = totalAmt - parseInt(removeCommaFrmInput(tempAmt),"10");
	document.getElementById('txtTotalAmountPaidOblig').value =  totalAmt;
	document.getElementById('txtTotalAmountPaidOblig').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true);
	document.getElementById('hidObligationId').value=null;
}

function validatePriorAssmntAmountToBePaid(paidAmount)
{
	var totalAmount= parseInt(removeCommaFrmInput(document.getElementById("in_iTaxPriorAssmntTable_7").value),"10");
	if(paidAmount==null || paidAmount=='')
		{
		alert('Please enter Amount to be paid');
		return false;
		}
	else
		{
		var paidAmt=parseInt(removeCommaFrmInput(paidAmount),"10");
		}
	
	if(paidAmt>totalAmount)
	{
		alert("Amount to be paid cannot be greater than the Amount Payable");
		document.getElementById('in_iTaxPriorAssmntTable_8').value='';
		return false;
	}
	var paramArray = new Array();
	var paidAmt=parseInt(removeCommaFrmInput(paidAmount),"10");
	paramArray[0] = document.getElementById("in_iTaxPriorAssmntTable_3");
	paramArray[1] = document.getElementById('txtPin');
	paramArray[2] = paidAmt;
/*	ValidateAmountToBePaidForPriorAssmnt.validateAmountToBePaidForPriorAssmnt(paramArray[0].value, 
			paramArray[1].value,paramArray[2],{async:false,callback:function(data){
				if(data!=null){
					if(data.errorMsg!=null && data.errorMsg!="")
					{
						alert(data.errorMsg);
						resetiTaxPriorAssmntDtls();
					}else{
						document.getElementById('in_iTaxPriorAssmntTable_8').value=paidAmt;
						document.getElementById('amountPayableiTaxPrior').value=data.amountPayable;
					}
				}
				else{
					alert("Error fetching data.");
				}
		}});*/
}

function clearDetailsOfiTaxPriorAssmnt()
{
	if(isiTaxPriorAssmnt)
	{
		resetiTaxPriorAssmntDtls();
		iTaxModifyFlag=0;
		document.getElementById('txtTotalAmountPaidOblig').value=0;
		clear_table_data("iTaxPriorAssmntTable");
		document.getElementById('paymentTaxObligForm').style.display="none";
		document.getElementById('totalAmountPaidFieldSet').style.display="none";
		document.getElementById('paymentiTaxPriorAdditionalAssmntForm').style.display="none";
		document.getElementById('cmbTaxSubHead').style.display="";
		document.getElementById('tdTaxSubHeadLbl').style.display="";
		document.getElementById('tdPaymentTypeLbl').style.display="";
		document.getElementById('cmbPaymentType').style.display="";
		document.getElementById('cmbTaxPeriod').style.display="";
		document.getElementById('navigationFieldSetPriorAsmnt').style.display='none';
	}
	isiTaxPriorAssmnt=false;
	
}

function cleariTaxPriorAssmntDetails()
{
	resetiTaxPriorAssmntDtls();
	iTaxModifyFlag=0;
	document.getElementById('paymentiTaxPriorAdditionalAssmntForm').style.display="none";
}

function validateiTaxPriorAssmntNo(id)
{
	var rtnFlag;
	rtnFlag=validateFormFieldOnEvent(id,iTaxPriorAssmntJson);
	getErrTabToggle('TabView','2');	
	if(!rtnFlag)
	{
		tabview_switch('TabView', '2');
		hideAndShowTable("errorDiv");
		document.getElementById('btnTbl').style.display="none";
	}
	return rtnFlag;	
}
//end

//changes done for CR Monthly Rental Income
function checkForCGTAndMRI()
{
	//changes done
	if(flagForCGT>0)
	{
			alert(cntMergeObligationPay);
			document.getElementById('cmbTaxSubHead').selectedIndex=taxObligation;
			flagForCGT=0;
			return false;
	}
	if(flagForMRI>0)
	{
			alert(cntMergeObligationPay);
			document.getElementById('cmbTaxSubHead').selectedIndex=taxObligation;
			flagForMRI=0;
			return false;
	}
	if(flagForAmnesty>0)
	{
			alert(cntMergeObligationPay);
			document.getElementById('cmbTaxSubHead').selectedIndex=taxObligation;
			flagForAmnesty=0;
			return false;
	}
	//end
}
//end

function checkStatusOfObl(obj)
{
	for (var allMapKey in AllObligationsWithStatusMap){
		if(allMapKey == obj.value){
			if(AllObligationsWithStatusMap[allMapKey]=="CAN" || AllObligationsWithStatusMap[allMapKey]=="CANF")
			{
				alert(chosenCanclObl);
				return true;
			}
		}
	}
	return true;
}

function hideRentIncomeWithDtls()
{
	document.getElementById('paymentRentIncomeWithRadioForm').style.display='none';
	document.getElementById('paymentRentIncomeWithWebForm').style.display='none';
	document.getElementById('paymentRentIncomeWithRegForm').style.display='none';
	document.getElementById('paymentRentIncomeWithExcelUploadForm').style.display='none';
	document.getElementById('rentIncomeWithWebFormLiablibilityTbl').style.display='none';
	document.getElementById('rentIncomeWithRadio1').checked=false;
	document.getElementById('rentIncomeWithRadio2').checked=false;
	resetRentIncomeWithholdeeInfoInWith();
}

function clearRentIncomeWithholdeeExclDtls()
{
	document.getElementById('paymentRentIncomeWithExcelUploadForm').style.display='none';
	document.getElementById('paymentRentIncomeWithRadioForm').style.display='none'; 
	document.getElementById('rentIncomeWithRadio1').checked=false;
	document.getElementById('rentIncomeWithRadio2').checked=false;
}

function resetLandRatesFields(){
	
	document.getElementById('txtUpn').value='';
	document.getElementById('txtBlockNo').value='';
	document.getElementById('txtPlotNo').value='';
	document.getElementById('txtLrNumberLL').value='';
	document.getElementById('txtRatePayer').value='';
	document.getElementById('txtCoOwner').value='';
	document.getElementById('txtSubCountyLL').value='';
	document.getElementById('txtWardLL').value='';
	document.getElementById('txtLandUse').value='';
	document.getElementById('txtPropDocType').value='';
	document.getElementById('txtPhyLocProp').value='';
	document.getElementById('txtPlotSize').value='';
	document.getElementById('txtValuation').value='';
	document.getElementById('txtAmountPayableLL').value='';
	document.getElementById('txtTotalAmountPaidCountyLL').value='';
	document.getElementById("txtUpn").disabled = false;
	document.getElementById("txtBlockNo").disabled = false;
	document.getElementById("txtPlotNo").disabled = false;
	document.getElementById("txtLrNumberLL").disabled = false;

	document.getElementById('txtUpn').readOnly= false;
	document.getElementById("txtPlotNo").readOnly = false;
	document.getElementById('txtLrNumberLL').readOnly= false;
	document.getElementById('txtBlockNo').readOnly= false;
	//$('#txtUpn').addClass('form101_textfcurr form101_textfcurr_width');
	$('#txtUpn').removeClass('readonlyInput');
	$('#txtBlockNo').removeClass('readonlyInput');
	$('#txtPlotNo').removeClass('readonlyInput');
	$('#txtLrNumberLL').removeClass('readonlyInput');
}

function resetsingleBusinessPmt(){
	document.getElementById('txtSbp').value='';
	document.getElementById('txtBrn').value='';
	document.getElementById('txtMobileNo').value='';
	document.getElementById('txtEmailAdd').value='';
	document.getElementById('txtCategoryCode').value='';
	document.getElementById('txtSubCatCode').value='';
	document.getElementById('txtDescription').value='';
	document.getElementById('txtNoOfEmp').value='';
	document.getElementById('txtSubCountySBP').value='';
	document.getElementById('txtWardSBP').value='';
	document.getElementById('txtPhyAdd').value='';
	document.getElementById('txtLrNumberSBP').value='';
	document.getElementById('txtBpa').value='';
	document.getElementById('txtUpnSBP').value='';
	document.getElementById('txtSBPAmountPayable').value='';
	document.getElementById('txtSolidWasteConservancyPayable').value='';
	document.getElementById('txtFireAmountPayable').value='';
	document.getElementById('txtPublicHealthPayable').value='';
	document.getElementById('txtAnyOtherPayable').value='';
	document.getElementById('txtAmountPayableSBP').value='';
	document.getElementById('txtTotalAmountPaidCountySBP').value='';
	document.getElementById('txtBusinessNameSBP').value='';
	document.getElementById("txtSbp").disabled = false;
	document.getElementById("txtBrn").disabled = false;
	document.getElementById('txtSbp').readOnly= false;
	document.getElementById('txtBrn').readOnly= false;
	//$('#txtUpn').addClass('form101_textfcurr form101_textfcurr_width');
	$('#txtSbp').removeClass('readonlyInput');
	$('#txtBrn').removeClass('readonlyInput');
	
}

//end

//changes done for CR CGT
function hidCGTDtls() {
	/*document.getElementById('cgt2TabViewSet').style.display="none";
	document.getElementById('cgt2PTabViewSet').style.display="none";
	document.getElementById('cgt1PTabViewSet').style.display="none";
	document.getElementById('cgt1TabViewSet').style.display="none";*/
	clearDetailsOfCGT();
	document.getElementById('cgtTabViewSet').style.display="none";
	document.getElementById('paymentRegCGTRadioForm').style.display="none";
	//Added for DAT - 11/2023
	document.getElementById('paymentRegDATTaxFieldSet').style.display='none';
	document.getElementById("tdCGTTypeLbl").style.display="none";
	document.getElementById("tdCGTType").style.display="none";
	document.getElementById("cmbCGTType").selectedIndex=0;
}


//end
//added by Bhavana for presumptive Tax CR
function clearPresumptiveTaxDetails(){
	document.getElementById("ptRadioBtnForm").style.display = "none";
	document.getElementById('ptDetailsForm').style.display="none";
	document.getElementById('navigationFieldsetForPresumptiveTax').style.display="none";
	document.getElementById("presumptiveTaxPreviousDetailsTable").style.display = "none";
	document.getElementById('presumptiveTaxRadio1').checked=false;
	document.getElementById('presumptiveTaxRadio2').checked=false;
}


function checkIfReconsiledForPT()
{
	var demo=0;
	var prnExists=false;
	var  tableObj =document.getElementById('presumptiveTaxPreviousDetailsTable');
	// fetching selected PRN from html
	var prn=null;
	if(tableObj.rows.length > 1){
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(document.getElementById('itPresumptiveHdrRadio_'+(i-1)).checked){
				if (document.all) {// for IE
					prn = tableObj.rows[i].cells[1].innerText;
				}
				else{
					var innrhtmltext = tableObj.rows[i].cells[1].textContent;
					prn = innrhtmltext; 
				}
			}}}
	
	

	var obligationId = "";
	var taxPayerId=document.getElementById('hidTaxPayerId').value;
	var startIndexStr=document.getElementById('startIndex').value;

	if( document.getElementById('cmbTaxSubHead').value==WithHoldee)
	{
		obligationId=WithHoldee;
	}
	if( document.getElementById('cmbTaxSubHead').value==PT)
	{
		obligationId=PT;
	}

	var fromDate = document.getElementById('hidObligationFromDate').value;
	var toDate = document.getElementById('hidObligationToDate').value;

	FetchSplOblHdrWebByObligationAmnd.fetchSplOblHdrWebByObligationAmnd(fromDate,toDate,taxPayerId,obligationId,'N',startIndexStr,{async:false,callback: function(data) {
		pmtSplDetailVOListForPartial =  data;
		var count=0;	

		if(pmtSplDetailVOListForPartial!= null && pmtSplDetailVOListForPartial[0].isDataAvailable=="Y"){
			partialDetailArray.length=0;
			for(var i = 0; i< pmtSplDetailVOListForPartial.length ; i++){
				var pmtSplDetailVO = pmtSplDetailVOListForPartial[i];
				if (prn==pmtSplDetailVO.prn)
					{
					prnExists=true;
					break;
					}
			}
			if (prnExists)
				{
				savePTPaymentOblig();
				return true;
				}
			else
				{
				alert("Either of the PRN/PRN's is/are reconsiled or suspended.");
				onSelectionOfRadioForPresumptiveTax('n');
				return false;
				}
			
			
			
			
			/*if(obligationId==WithHoldee)
			{
				count=1;
				//showPreviousDetailsTableForAmnd(partialDetailArray);
			}
			else if(obligationId==PT)
			{
				count=1;
				//showPresumptiveTaxPreviousPrns(partialDetailArray);
				}
			
			else{
				alert(validObligation);
				return false;
			}*/
		}
	/*	if(count==0){
			partialDetailArray.length=0;
			for(var i = 0; i< pmtSplDetailVOListForPartial.length ; i++){
				var pmtSplDetailVO = pmtSplDetailVOListForPartial[i];
				partialDetailArray[i] = pmtSplDetailVO;
			}
			if(obligationId==WithHoldee)
			{
				showPreviousDetailsTableForAmnd(partialDetailArray);
			}
			if(obligationId==PT)
			{
				alert("There is no PRN available to be amended");
			}
		}*/

	}});


}
function clearAllCGTWthData()
{
	resetCGTTWithholdeeInfo();
	clear_table_data('CGTAdditionalAssmntTable');
}

function resetCGTTWithholdeeInfo()
{
	
	document.getElementById('in_CGTAdditionalAssmntTable_3').value='';
	document.getElementById('in_CGTAdditionalAssmntTable_4').value='';
	document.getElementById('totalCGTAddAssAmountid').value='';

	
}

function clearCgtPenaltyForm(){
	document.getElementById("in_cgtPenaltyTable_3").value="";
	document.getElementById("in_cgtPenaltyTable_4").value="";
	document.getElementById("in_cgtPenaltyTable_5").value="";
	document.getElementById("in_cgtInterestTable_3").value="";
	document.getElementById("in_cgtInterestTable_3").value="";
	document.getElementById("in_cgtInterestTable_3").value="";
	document.getElementById("in_cgtInterestTable_3").value="";
	document.getElementById("cmbCGTType").disabled = false;
	document.getElementById("penaltyPaymentCgt").style.display="none";
	document.getElementById("interestPaymentCgt").style.display="none";
}

function fetchiTaxPriorAssessmentDtlsForPartial(){
	var taxPayerId=document.getElementById('hidTaxPayerId').value;
	FetchiTaxPriorAssessmentDtlsForPartial.fetchiTaxPriorAssessmentDtlsForPartial(taxPayerId,{async:false,callback: function(data){
		if(data!=null && data!=""){
			showDataInPriorAssmntTbl(data.iTaxAssessmentDTLDTO);
		}
		
		
	}})
	

}
function showDataInPriorAssmntTbl(partialDetailArray)
{
	var flag=0;
	if(partialDetailArray.length>=1){
		var cntr = 0;
		var tabObj = document.getElementById("iTaxPriorAssmntDetailsTable");
		for(var l = tabObj.rows.length; l >1 ;l--){
			tabObj.deleteRow(l -1);
		}	
		for(var i=0;i<partialDetailArray.length;i++){
							 
						  	flag=1;
							cntr = parseInt(cntr);
							var tabRow = tabObj.insertRow(tabObj.rows.length);
							tabRow.id="iTaxPriorAssmntRow_"+cntr;
							var tabCell = new Array();
							for (var j=0;j<8;j++){
								tabCell[j] = tabRow.insertCell(j);
							}
							var pmtSplDetailVO = partialDetailArray[i];
							var element = document.createElement('input');       
							element.type ='radio';
							element.onclick = function () {onSelectiTaxPriorAssessmentDtlRadio(this);};
							element.value = cntr;
							element.id = 'iTaxPriorAssmntRadio_'+cntr;
							element.name = "iTaxPriorAssmntRadio";
							element.className='bordercl';
							tabCell[0].appendChild(element); 
				
				
							tabCell[1].innerHTML = pmtSplDetailVO.assessmentNoticeNumber;
							tabCell[1].style.textAlign="center";
							tabCell[1].style.fontSize="11";
				
							tabCell[2].innerHTML = pmtSplDetailVO.typeOfAssmnt;
							tabCell[2].style.textAlign="center";
							tabCell[2].style.fontSize="11";
				
							tabCell[3].innerHTML = pmtSplDetailVO.taxObligation;
							tabCell[3].style.textAlign="right";
							tabCell[3].style.fontSize="11";
				
							tabCell[4].innerHTML = pmtSplDetailVO.taxPeriod;
							tabCell[4].style.textAlign="right";
							tabCell[4].style.fontSize="11";
				
							tabCell[5].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.amountToBePaid).toFixed(2),true);
							tabCell[5].style.textAlign="right";
							tabCell[5].style.fontSize="11";
							
							tabCell[6].innerHTML = pmtSplDetailVO.obligationId;
							tabCell[6].hidden=true
							
							tabCell[7].innerHTML = pmtSplDetailVO.bclSplObligationHdrIdForiTaxPriorAssmnt;
							tabCell[7].hidden=true
													
							cntr = cntr+1;
							
			
		}
		if(flag==0)
			{
				var table = document.getElementById("iTaxPriorAssmntDetailsTable");
				var tabRow = table.insertRow(tabObj.rows.length);
				var tabCell = new Array();
				tabCell[0] = tabRow.insertCell(0);
				tabCell[0].innerHTML ="System has not found any PRN for Withholding VAT which are not reconciled. Please select proper period.";
				tabCell[0].style.textAlign="center";
				tabCell[0].colSpan="7";
				tabCell[0].style.color="red";
				document.getElementById("scrollableDiv").style.height='60px';
			}
		else
		{
			var px= cntr*35;
			if(px<100){
				px=80;
			}
			if(px>270)
			{
				px=270;
			}
			document.getElementById("scrollableDiv").style.height=px+'px';
		}
		document.getElementById("scrollableDiv").style.display = "";
		document.getElementById("navigationFieldSetPriorAsmnt").style.display = "";
		document.getElementById("iTaxPriorAssmntDetailsTable").style.display = "";
	}
}

function onSelectiTaxPriorAssessmentDtlRadio(pmtSplDetailVO){
	if(pmtSplDetailVO!=null){
		
		document.getElementById('in_iTaxPriorAssmntTable_3').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[1].innerHTML;
		document.getElementById('in_iTaxPriorAssmntTable_4').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[2].innerHTML;
		document.getElementById('in_iTaxPriorAssmntTable_5').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[3].innerHTML;
		document.getElementById('in_iTaxPriorAssmntTable_6').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[4].innerHTML;
		document.getElementById('in_iTaxPriorAssmntTable_7').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[5].innerHTML;
		document.getElementById('in_iTaxPriorAssmntTable_8').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[5].innerHTML;
		document.getElementById('in_iTaxPriorAssmntTable_9').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[7].innerHTML;

		document.getElementById('hidObligationId').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[6].innerHTML;
		document.getElementById('in_iTaxPriorAssmntTable_10').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[6].innerHTML;

		document.getElementById('bclSplObligationHdrId').value=document.getElementById('iTaxPriorAssmntDetailsTable').rows[Number(pmtSplDetailVO.value)+1].cells[7].innerHTML;
		document.getElementById('hidPaymentType').value=LAT;
		document.getElementById('in_iTaxPriorAssmntTable_3').readOnly=true;
		document.getElementById("in_iTaxPriorAssmntTable_3").className='readonlyInput form101_textfcurr_width textonlyRight';
		document.getElementById('in_iTaxPriorAssmntTable_4').readOnly=true;
		document.getElementById("in_iTaxPriorAssmntTable_4").className='readonlyInput form101_textfcurr_width textonlyRight';

		document.getElementById('in_iTaxPriorAssmntTable_5').readOnly=true;
		document.getElementById("in_iTaxPriorAssmntTable_5").className='readonlyInput form101_textfcurr_width textonlyRight';

		document.getElementById('in_iTaxPriorAssmntTable_6').readOnly=true;
		document.getElementById("in_iTaxPriorAssmntTable_6").className='readonlyInput form101_textfcurr_width textonlyRight';

		document.getElementById('in_iTaxPriorAssmntTable_7').readOnly=true;
		document.getElementById("in_iTaxPriorAssmntTable_7").className='readonlyInput form101_textfcurr_width textonlyRight';

			
		
	}
}
function taxHeadCheckForTR(obj)
{
	if(obj.value==IT)
	{
	
	}
	else if(obj.value==VAT)
	{
		
	}
	//Added by Mingu for Ticket #55603 START
	else if(obj.value==EXCISE)
	{
		
	}
	//Added by Mingu for Ticket #55603 END
	else if(obj.value=='AGENCY_R')
	{
		
	}
	else
	{
		document.getElementById('cmbTaxHead').value='-1';
		alert('Tax Representative can not make payment for selected obligation');
	}
}


function taxSubHeadCheckForTR(obj)
{	
	if(document.getElementById('cmbTaxHead').value=='IT')
	{
		if(obj.value==32)
		{
		
		}	
		else if(obj.value ==7 || obj.value == 2 
				|| obj.value == 3 || obj.value == 4
				|| obj.value == 5 || obj.value == 11
				|| obj.value == 6 || obj.value == 13
				|| obj.value == 14 || obj.value == 22
				|| obj.value == 32 || obj.value == 34
				|| obj.value == 33)//Added by Mingu for Ticket 55603
		{
		
		}
		//added by Kirui and Mingu to enable DST Payment Registration By Tax Rep start
		else if(obj.value ==44)
		{
		
		}

		//added by Kirui and Mingu to enable DST Payment Registration By Tax Rep end
		else
		{
			document.getElementById('cmbTaxSubHead').value='-1';
			alert('Tax Representative can not make payment for selected obligation');
		}
		
	}
	else if(document.getElementById('cmbTaxHead').value=='VAT')
	{
		if(obj.value==9 ||
				obj.value==10 ||
				obj.value==29) //Added Vat WHT and VAT on Imported Services By MINGU
		{
			
		}
		else
		{
			document.getElementById('cmbTaxSubHead').value='-1';
			alert('Tax Representative can not make payment for selected obligation');			
		}
	}
	else if(document.getElementById('cmbTaxHead').value=='AGENCY_R')
	{
		if(obj.value==24)
		{
			
		}
		//ADDED for Ticket Number 64397 :: start
		else if(obj.value ==42)
		{
		
		}
		//ADDED for Ticket Number 64397 :: end
		//ADDED for Ticket Number 69965 :: start
		else if(obj.value ==41)
		{
		
		}
		//ADDED for Ticket Number 69965 :: end
		else
		{
			document.getElementById('cmbTaxSubHead').value='-1';
			alert('Tax Representative can not make payment for selected obligation');			
		}
	}
	else
	{	
		document.getElementById('cmbTaxSubHead').value='-1';
		alert('Tax Representative can not make payment for selected obligation');
	}
}

function taxPaymentTypeCheckForTR(obj)
{
	/*Added for tax rep payment:: START 63497*/
	//if(obj.value!='SAT' )
	if(obj.value!='SAT' && obj.value!='NITAR' )
	/*Added for tax rep payment :: END 63497*/
	{
		document.getElementById('cmbPaymentType').value='-1';
		alert('Tax Representative can do only self assessment payment');
	}
}
function checkVatPreviousLiab(){
	//document.getElementById("txtTotalAmountPaidOblig").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value);
	//var rows = document.getElementById('vatWithWebFormLiablibilityTbl').rows.length;
	var flag=false;
	var table = document.getElementById('vatWithholdeeWebFormTable');
	if(table!=null){
	if(!(table.rows.length==1))
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'vatWithholdeeWebFormTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify"))
			{
				return true;
				break;
			}
		}
		return false;
	}
	}
}
function caclDTSTax()
{
	var taxRate= document.getElementById('DTSRate').value;
	var MonthlyTOT= parseInt(document.getElementById('monthlyTurnover').value);
	if(isNaN(MonthlyTOT))
	{
		alert("Please Enter Numeric Value in Monthly Turnover Field.");
		document.getElementById('monthlyTurnover').value='';
		document.getElementById('txtTotalAmountPaidOblig').value='';
		return false;
	}
	if(MonthlyTOT<0 || MonthlyTOT==0)
	{
		alert("Monthly turnover cannot be less than or equal to zero, please enter value greater than zero");
		document.getElementById('monthlyTurnover').value='';
		document.getElementById('txtTotalAmountPaidOblig').value='';
		return false;
	}
	else
	{
		var totalTax = (taxRate*MonthlyTOT)/100;
		document.getElementById('txtTotalAmountPaidOblig').value=totalTax;
	}
}

//Added by Jaimin for Additional Assessment / Penalty functionality in stamp Duty tax sub head
function fetchTaxRateFromTransactionDt()
{
	var transactionDate = document.getElementById('in_vatOnImpTable_5').value;
	FetchTaxRateFromTransactionDt.fetchTaxRateFromTransactionDt(transactionDate,{async:false,callback: function(data){
		if(data!=null){
			if(data.errorMsg != null && data.errorMsg != 'Y'){
				alert(data.errorMsg);
			}else{
				document.getElementById("in_vatOnImpTable_11").value=data.sbp;
				if(document.getElementById('in_vatOnImpTable_7').value!=""){
				if(validateVisDtls('in_vatOnImpTable_7')){
					calcVatOnInvoice();
					}
				}
			}
		}
	}});
}
//Ended by Jaimin for Additional Assessment / Penalty functionality in stamp Duty tax sub head
//Added By Jaimin to add AAT and EAT in income tax addition tax
function fetchAdvancetaxAssmtDtlsFromAssmtNo(obj)
{

	if(document.getElementById('in_AdvanceTaxAdditionalAssmntTable_3').value!=null 
					&& document.getElementById('in_AdvanceTaxAdditionalAssmntTable_3').value!='')
			{
				var paramArray = new Array();
				paramArray[0] = obj;
				paramArray[1]=document.getElementById('txtPin');
				paramArray[2]=document.getElementById('cmbPaymentType');
				paramArray[3]=document.getElementById('cmbTaxSubHead');
				paramArray[4]=document.getElementById('cmbCGTType');
				FetchAdditionalAssessmentDetails.fetchAdditionalAssessmentDetails(paramArray[0].value, 
						paramArray[1].value,paramArray[2].value, paramArray[3].value,paramArray[4].value,{async:false,callback:function(data){
						if(data!=null){
							if(data.errorMsg!=null && data.errorMsg!="")
							{
								alert(data.errorMsg);
								resetAdditionalAssmntDtlsForAdvanceTax();
							}else{
							document.getElementById('in_AdvanceTaxAdditionalAssmntTable_5').value=data.totalAmountForAdditionalAssessment;
							document.getElementById('in_AdvanceTaxAdditionalAssmntTable_5').value=convertToKenyanShillingFormatVal(document.getElementById('in_AdvanceTaxAdditionalAssmntTable_5').value);
							document.getElementById('in_AdvanceTaxAdditionalAssmntTable_4').value=data.taxPeriodForAdditionalAssessment;

							//document.getElementById('in_AdvanceTaxAdditionalAssmntTable_6').value=data.totalAmountPaidForAdditionalAssessment;
							//document.getElementById('in_AdvanceTaxAdditionalAssmntTable_6').value=convertToKenyanShillingFormatVal(document.getElementById('in_AdvanceTaxAdditionalAssmntTable_5').value);
							
							document.getElementById('in_AdvanceTaxAdditionalAssmntTable_7').value=data.bclSplObligationHdrId;
							document.getElementById('in_AdvanceTaxAdditionalAssmntTable_8').value=data.bclSplAdvanceDtlId;
							}
						}
						else{
							alert("Error fetching data.");
						}
				}});
			}
		else{
			alert("Please enter Assessment Notice Number.");
			resetAdditionalAssmntDtlsForAdvanceTax();
			return false;
		}
}

function resetAdditionalAssmntDtlsForAdvanceTax()
{
	document.getElementById('in_AdvanceTaxAdditionalAssmntTable_3').value="";
	document.getElementById('in_AdvanceTaxAdditionalAssmntTable_4').value="";
	document.getElementById('in_AdvanceTaxAdditionalAssmntTable_5').value="";
	document.getElementById('in_AdvanceTaxAdditionalAssmntTable_6').value="";

}
//Ended By Jaimin to add AAT and EAT in income tax addition tax


/*65215 Added for NITA Arrears*/
function liabilityDetailsNitar(taxPeriod,isPayerRegistered){
	var i;
	var incomeType;
	var taxPeriodArr = taxPeriod.split("-");
	var frmDate = taxPeriodArr[0];
	var toDate = taxPeriodArr[1];
	var obligationId=document.getElementById('cmbTaxSubHead').value;
	var taxPeriodMonth = document.getElementById('cmbTaxPeriodMonth').selectedIndex;
	var taxPeriodMonthValue =document.getElementById('cmbTaxPeriodMonth')[taxPeriodMonth].text;
	var taxPeriodYear = document.getElementById('cmbTaxPeriodYear').selectedIndex;
	var taxPeriodYearValue =document.getElementById('cmbTaxPeriodYear')[taxPeriodYear].text;
	var taxPeriodValue=taxPeriodMonthValue+" "+taxPeriodYearValue;
	var effDateWithNoPayeYear = 2022;
	var effDateWithNoPayeMnth = 4;
	var effDateNitar = 2013;
	var effDateNitarMnth = 4;

	var taxPayerId=document.getElementById('hidTaxPayerId').value;
	var paymentType=document.getElementById('cmbPaymentType').value;
	
	var currentDate = toDayDate();
	var serverDateArray = currentDate.split("/");
	var curdate = new Date(serverDateArray[2],serverDateArray[1]-1,serverDateArray[0]);
	//curdate.setMonth(curdate.getMonth());
	var mm = parseInt(serverDateArray[0]); // now moths are 1-12
	var currYear = parseInt(serverDateArray[2]);

	
	if(parseInt(taxPeriodYearValue) == currYear && taxPeriodMonth >= mm){
		alert("Please select a valid payment period.");
		return false;
	}
	
	if(paymentType == SAT && obligationId == 42 && 
			((parseInt(taxPeriodYearValue) == effDateWithNoPayeYear && 
			taxPeriodMonth < effDateWithNoPayeMnth)
			||(parseInt(taxPeriodYearValue) < effDateWithNoPayeYear)) ){
		alert("Please select period after April 2022.");
		return false;
	}
	
	if(paymentType == NITAR && (parseInt(taxPeriodYearValue) == effDateNitar && 
			taxPeriodMonth < effDateNitarMnth) ){
		alert("Please select period after April 2013.");
		return false;
	}
	
	
	

	document.getElementById('hidRadioValue').value=0;
	document.getElementById('hidObligationFromDate').value = frmDate;
	document.getElementById('hidObligationToDate').value = toDate;
						document.getElementById('txtTotalAmountPaidOblig').readOnly=true;
						document.getElementById('txtTotalAmountPaidOblig').className='readonlyInput form101_textfcurr_width textonlyRight';
								document.getElementById("navigationFieldset").style.display = '';
								document.getElementById("navigationTable").style.display = 'none';
								document.getElementById("LiablibilityTbl").style.display = '';
								if(obligationId==housingLevy || obligationId==42 ||obligationId==TOTFP){
									document.getElementById("paymentTaxObligForm").style.display = '';
									}
								document.getElementById("goBtn").disabled = true;
							
									document.getElementById('startIndex').value 		= null;
									document.getElementById('endIndex').value 			= null;
									document.getElementById('pageNo').value 			= null;
									document.getElementById('totalRecords').value 		= null;
									document.getElementById('totalPagesId').value 		= null;
									document.getElementById('recordsPerPage').value 	= null;
									document.getElementById('startIndexUpdate').value 	= null;
									document.getElementById('oldStartIndex').value 		= null;
									document.getElementById('lastStartIndex').value 	= null;
									document.getElementById('maxResult').value 			= null;
													
									document.getElementById('totalRecordsTd').innerHTML = "Total No. of Records " ;
									document.getElementById('totalRecordsTd').style.textAlign="center";
									document.getElementById('totalRecordsTd').style.fontWeight="bold";
									document.getElementById('totalRecordsTd').innerHTML+=document.getElementById('totalRecords').value;
									
									document.getElementById('recordsFromToTd').innerHTML = "Records From ";
									document.getElementById('recordsFromToTd').style.textAlign="center";
									document.getElementById('recordsFromToTd').style.fontWeight="bold";
									document.getElementById('recordsFromToTd').innerHTML+=document.getElementById('oldStartIndex').value+"";
									document.getElementById('recordsFromToTd').innerHTML+="To ";
									document.getElementById('recordsFromToTd').innerHTML+=document.getElementById('endIndex').value;

									document.getElementById('pageNoTd').innerHTML = "PageNo ";
									document.getElementById('pageNoTd').style.textAlign="center";
									document.getElementById('pageNoTd').style.fontWeight="bold";
									document.getElementById('pageNoTd').innerHTML+=document.getElementById('pageNo').value+"";
									document.getElementById('pageNoTd').innerHTML+="of ";
									document.getElementById('pageNoTd').innerHTML+=document.getElementById('totalPagesId').value;

									
									var cntr = 0;
									var tabObj = document.getElementById("LiablibilityTbl");
									for(var l = tabObj.rows.length; l >1 ;l--){
										tabObj.deleteRow(l -1);
									}
									for(var i=0;i<=0;i++)
									{
										cntr = parseInt(cntr);
										var tabRow = tabObj.insertRow(tabObj.rows.length);
										tabRow.id="LiabilityRow_"+cntr;
										var tabCell = new Array();
										for (var j=0;j<15;j++){
											tabCell[j] = tabRow.insertCell(j);
										}
									
							            {
									 		var element = document.createElement('input');       
											element.type ='radio';
											element.onclick = function () {onSelectliabilityRadio(this);};
											element.value = cntr;
											element.id ='liabilityRadio_'+cntr;
											element.name = "liabilityRadio";
											tabCell[0].appendChild(element);
									 		 
									 		tabCell[0].appendChild(element);

									 		if(document.getElementById('cmbTaxSubHead').value!=CGT || document.getElementById('cmbTaxSubHead').value!=rentIncomeCode )
										 		{
									 				tabCell[1].innerHTML = taxPeriodValue;
													tabCell[1].style.textAlign="center";
													tabCell[1].style.fontSize="11";
										 		}
												
												// actual principal amount
												tabCell[2].innerHTML = convertToKenyanShillingFormatValWithDecimal("0",true);
												tabCell[2].style.textAlign="right";
												tabCell[2].style.fontSize="11";
												tabCell[2].id = 'actualPrincipalAmount_'+cntr;
												tabCell[2].name = 'actualPrincipalAmount_'+cntr;
												var elementInterestImg = document.createElement("img");
												elementInterestImg.name= "actualPrincipalAmount_img"+cntr;
												elementInterestImg.id= "actualPrincipalAmount_img"+cntr;
												elementInterestImg.style.visibility='hidden';
												tabCell[2].appendChild(elementInterestImg);
											
												//actual actualFineAmount
												tabCell[3].innerHTML = convertToKenyanShillingFormatValWithDecimal("0",true);
												tabCell[3].style.textAlign="right";
												tabCell[3].style.fontSize="11";
												tabCell[3].innerHTML = tabCell[3].innerHTML +"  ";
												var elementFineImg = document.createElement("img");
												elementFineImg.name= "imgShowFine_"+cntr;
												elementFineImg.id="imgShowFine_"+cntr;
												elementFineImg.onclick = function () {return changeImgNew(this,3);};
												elementFineImg.style.visibility='hidden';
												tabCell[3].appendChild(elementFineImg);
													
										
											// actualPenaltyAmount
												tabCell[4].innerHTML = convertToKenyanShillingFormatValWithDecimal("0",true);
												tabCell[4].style.textAlign="right";
												tabCell[4].style.fontSize="11";
												tabCell[4].innerHTML = tabCell[4].innerHTML +"  ";
												var elementPenaltyImg = document.createElement("img");
												elementPenaltyImg.name ="imgShowPenalty_"+cntr;
												elementPenaltyImg.id ="imgShowPenalty_"+cntr;
												elementPenaltyImg.style.visibility='hidden';
												tabCell[4].appendChild(elementPenaltyImg);
										
												//actualInterestAmount
												tabCell[5].innerHTML = convertToKenyanShillingFormatValWithDecimal("0",true);
												tabCell[5].style.textAlign="right";
												tabCell[5].style.fontSize="11";
												tabCell[5].innerHTML = tabCell[5].innerHTML +"  ";
												var elementInterestImg = document.createElement("img");
												elementInterestImg.name= "imgShowIntrest_"+cntr;
												elementInterestImg.id="imgShowIntrest_"+cntr;
												elementInterestImg.style.visibility='hidden';
												tabCell[5].appendChild(elementInterestImg);

											//actualPaymentAmount
											var taxPayerId=document.getElementById('hidTaxPayerId').value;
											tabCell[6].innerHTML = convertToKenyanShillingFormatValWithDecimal((0).toFixed(2),true);
											tabCell[6].style.textAlign="right";
											tabCell[6].style.fontSize="11";
											tabCell[6].innerHTML = tabCell[6].innerHTML +"  ";
											var elementPaymentImg = document.createElement("img");
											elementPaymentImg.name= "imgShowPayment_"+cntr;
											elementPaymentImg.id="imgShowPayment_"+cntr;
											elementPaymentImg.style.visibility='hidden';
											tabCell[6].appendChild(elementPaymentImg);
											
											
											
											

											//actualLiabilityAmount
											tabCell[6].style.display="none";
											tabCell[7].innerHTML = convertToKenyanShillingFormatValWithDecimal((0).toFixed(2),true); 
											tabCell[7].style.textAlign="right";
											tabCell[7].style.fontSize="11";
											tabCell[7].id = 'actualPaymentAmount_'+cntr;
											tabCell[7].name='actualPaymentAmount_'+cntr;
											
											var elementTextBox = document.createElement("input");
											elementTextBox.type ='text';
											elementTextBox.onchange = function () {onChangeLiabilityAmountNitar(this.value);convertToKenyanShillingFormatValWithDecimal((this.value),true)};
											elementTextBox.name='actualLiabilityAmount_'+cntr;
											elementTextBox.id='actualLiabilityAmount_'+cntr;
											elementTextBox.setAttribute("value", convertToKenyanShillingFormatVal(Math.ceil((0).toFixed(2)),true));
											elementTextBox.className='form101_textfcurr form101_textfcurr_width textAlignRight';
											elementTextBox.setAttribute('maxlength', 15);
											elementTextBox.style.textAlign = 'right'; 
											tabCell[8].appendChild(elementTextBox);
											tabCell[8].style.textAlign="right";
											tabCell[8].style.fontSize="11";
											

											
											
						                 }

								      var element = document.createElement('input');
					  		          element.type = 'hidden';
					                  element.value =  obligationId;
					                  element.id = 'obligation_id_nitar';
					                  element.name='obligation_id_nitar';
					                  element.width = "0%";
					                  tabCell[9].appendChild(element);
					                  tabCell[9].style.display = "none";

					                  var element = document.createElement('input');
					  		          element.type = 'hidden';
					                  element.value = frmDate;
					                  element.id = 'frm_date_nitar';
					                  element.name='frm_date_nitar';
					                  element.width = "0%";
					                  tabCell[10].appendChild(element);
					                  tabCell[10].style.display = "none";

					                  var element = document.createElement('input');
					  		          element.type = 'hidden';
					                  element.value =  toDate;
					                  element.id = 'to_date_nitar';
					                  element.name='to_date_nitar';
					                  element.width = "0%";
					                  tabCell[11].appendChild(element);
					                  tabCell[11].style.display = "none";

									  if (document.getElementById('cmbTaxSubHead').value!=12)
								      { 
					                  var element = document.createElement('input');
					  		          element.type = 'hidden';
					  		          element.id = 'hdr_id_nitar';
					                  element.name='hdr_id_nitar';
					                  element.value =  "0";
					                  element.width = "0%";
					                  tabCell[12].appendChild(element);
					                  tabCell[12].style.display = "none";
								      }
									  
									 
					                  
								      
									  
									  
									  if (document.getElementById('cmbTaxSubHead').value ==12)
								      { 
					                  var element = document.createElement('input');
					  		          element.type = 'hidden';
					  		          element.id = 'hdr_id_nitar';
					                  element.name='hdr_id_nitar';
					                  element.value =  "0";
					                  element.width = "0%";
					                  tabCell[12].appendChild(element);
					                  tabCell[12].style.display = "none";
								      }
					                  var element = document.createElement('input');
					  		          element.type = 'hidden';
					                  element.value =  "TAX";
					                  element.width = "0%";
					                  tabCell[13].appendChild(element);
					                  tabCell[13].style.display = "none";
					                 
					             
					                  var  tabObj1=document.getElementById('taxObligationTable');
					  				if(tabObj1.rows.length==1)
					  				{
					  				}
					  				else
					  				{
					  					for (var i=1, n=tabObj1.rows.length; i <n; i++) 
					  					{  
					  						document.getElementById('imgShowIntrest_' + cntr).style.visibility = 'hidden';
				  							document.getElementById('imgShowPenalty_' + cntr).style.visibility = 'hidden';
				  							document.getElementById('imgShowFine_' + cntr).style.visibility = 'hidden';
				  							document.getElementById('imgShowPayment_'+ cntr).style.visibility = 'hidden';
				  							
					  						if((document.getElementById('id_taxObligationTable_'+i+'_2').innerHTML)=="Modifying")
					  						{
						  						document.getElementById('showTaxObligationTable').style.display='';
						  						if(document.getElementById('cmbTaxSubHead').value!=amnestyCode)
							  						{
					  								document.getElementById('actualLiabilityAmount_'+cntr).readOnly = false;
							  						}
						  						
					  							document.getElementById('actualLiabilityAmount_'+cntr).className='form101_textfcurr form101_textfcurr_width textonlyRight';
					  							document.getElementById('hidRadioValue').value =cntr;
					  							document.getElementById('hidActualLiabilityAmount').value = document.getElementById('actualLiabilityAmount_' + cntr).value;
					  							document.getElementById('imgShowIntrest_' + cntr).style.visibility = 'visible';
					  							document.getElementById('imgShowPenalty_' + cntr).style.visibility = 'visible';
					  							document.getElementById('imgShowFine_' + cntr).style.visibility = 'visible';
					  							document.getElementById('imgShowPayment_' + cntr).style.visibility = 'visible';
					  							

					  							document.getElementById('in_taxObligationTable_11').value=document.getElementById('cmbTaxHead').value;
					  							document.getElementById('ObligationDetailFieldSet').style.display = '';
					  							document.getElementById('showTaxObligationTable').style.display = ''; 
					  							var hidActualLiabilityAmount=removeCommaFrmInput(document.getElementById('hidActualLiabilityAmount').value);
					  							document.getElementById('in_taxObligationTable_5').value = convertToKenyanShillingFormatValWithDecimal(parseInt(hidActualLiabilityAmount,10).toFixed(2),true);
					  							document.getElementById('in_taxObligationTable_6').value = document.getElementById('actualLiabilityAmount_' + cntr).value;
					  							
					  							document.getElementById('liabilityRadio_'+cntr).checked=true;
					  							if(document.getElementById('cmbTaxSubHead').value!=amnestyCode || document.getElementById('cmbTaxSubHead').value!=NSSF)
						  							{
					  								document.getElementById('actualLiabilityAmount_'+cntr).readOnly=false;
						  							}
					  							document.getElementById('actualLiabilityAmount_'+cntr).className='form101_textfcurr form101_textfcurr_width textonlyRight';
					  							if(document.all)
						  						{
						  							document.getElementById('actualLiabilityAmount_'+cntr).value= tabObj1.rows[i].cells[6].innerText;
					  							document.getElementById('hid_taxObligationTable_6').value= tabObj1.rows[i].cells[6].innerText; 
					  							document.getElementById('in_taxObligationTable_6').value=tabObj1.rows[i].cells[6].innerText; 
						  						}
					  							else
						  						{
					  								document.getElementById('actualLiabilityAmount_'+cntr).value= tabObj1.rows[i].cells[6].textContent;
						  							document.getElementById('hid_taxObligationTable_6').value= tabObj1.rows[i].cells[6].textContent; 
						  							document.getElementById('in_taxObligationTable_6').value=tabObj1.rows[i].cells[6].textContent;
						  						}
					  							return true;
					  						}
					  					}
					  				
					  				}
					  				document.getElementById('liabilityRadio_'+cntr).checked=true;
									onSelectliabilityRadio(document.getElementById('liabilityRadio_'+cntr));
									  cntr = cntr+1;
									}
}
function onChangeLiabilityAmountNitar(liabilityAmount){
	document.getElementById('actualPrincipalAmount_0').innerHTML = convertToKenyanShillingFormatVal(parseInt(liabilityAmount,10).toFixed(2),false);
	document.getElementById('actualPaymentAmount_0').innerHTML = convertToKenyanShillingFormatVal(parseInt(liabilityAmount,10).toFixed(2),false);
	document.getElementById('actualLiabilityAmount_0').value = convertToKenyanShillingFormatVal(parseInt(liabilityAmount,10).toFixed(2),false);
}

/*65215*/


/* Ticket 62967
 * Limiting generation of PRN for only one period
 */
function checkPaymentDetailsEntries(){
	var table = document.getElementById('VATWHTAdditionalAssmntTable');  
	
	if(!(table.rows.length==1))
	{ 
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{
			if((trim(document.getElementById('id_temp_'+'VATWHTAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" )
			{
				alert("You can only generate PRN for one period");
				return false;	
			}
		}
	}
	return true;
} 
/* Ticket 62967*/

//ADDED by Mingu for Ticket 64973 :: START 
function loadCgtRates(){
	var cgtType = document.getElementById('cmbCGTType').value;
	var isAllowedSplRate = document.getElementById('isAllowedSplRate').value;
	var transferDate;
	if(cgtType == "CGT_1" || cgtType == "CGT_1P"){
		transferDate = document.getElementById('dateOfTransferCGT1').value;
	}
	else if(cgtType == "CGT_2" || cgtType == "CGT_2P" || cgtType == "CGT_2N"){
		transferDate = document.getElementById('dateOfTransfer').value;
	}
	var dateArr = transferDate.split("/");
	var day = dateArr[0];
	var month = dateArr[1];
	var year = dateArr[2];
	var yearInt = parseInt(year);
	if(cgtType == "CGT_2N"){
		if(yearInt<2023){
			alert("The Date of Transfer should be on or after 1st January 2023");
			document.getElementById('dateOfTransfer').value = "";
			return false;
		}
	}
	if(isAllowedSplRate != null && isAllowedSplRate != ""){
		if(yearInt<2023 && isAllowedSplRate == "Y"){
			document.getElementById('cgtSpecialRate').value = 5;
			if(cgtType == "CGT_1"){
				document.getElementById("15percentdiv").style.display ="none";
				document.getElementById("5percentdiv").style.display ="";
			}
			else if(cgtType == "CGT_2" || cgtType == "CGT_2P" || cgtType == "CGT_1P"){
				document.getElementById("capitalGainTaxLbl").style.display ="none";
				document.getElementById("capitalGainTaxLbl5").style.display ="";
			}
		}
		else{
			document.getElementById('cgtSpecialRate').value = 15;
			if(cgtType == "CGT_1"){
				document.getElementById("15percentdiv").style.display ="";
				document.getElementById("5percentdiv").style.display ="none";
			}
			else if(cgtType == "CGT_2" || cgtType == "CGT_2P" || cgtType == "CGT_1P"){
				document.getElementById("capitalGainTaxLbl").style.display ="";
				document.getElementById("capitalGainTaxLbl5").style.display ="none";
			}
		}
	}
}
//ADDED by Mingu for Ticket 64973 :: END

/*Added for cancellation of WHTVAT Payments :: 66743*/
function cancelVatWht(){
	var cmbTaxSubHead = document.getElementById('cmbTaxSubHead').value;
	var taxPin = document.getElementById('txtPin').value;
	var obj =document.getElementById('VatWhtPeriodMonth').value;
	
	var  tableObj =document.getElementById('VatWithPreviousDetailsTable');
	document.getElementById('prnString').value='';
	var prnstring ='';
	var prn = null; 
	if(tableObj.rows.length > 1){
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(document.getElementById('vatWithHoldeeHdrCheckbox_'+(i-1)).checked){
				if (document.all) {// for IE
					prn = tableObj.rows[i].cells[1].innerText;
				}
				else{
					var innrhtmltext = tableObj.rows[i].cells[1].textContent;
					prn = innrhtmltext; 
				}
				
				prnstring =prnstring.concat(prn+',');
			}

		}
		if(prnstring.length==0){
			alert("Please select Prn for cancellation");
		}
		/*Added to limit cancellation of one PRN at a time*/
		else if(prnstring.length>17){
			alert("Please select One PRN at a time for cancellation");
		/*Added to limit cancellation of one PRN at a time :: END*/	
		}else if('' != cmbTaxSubHead 
			&& cmbTaxSubHead.length > 0
			/*&& pinChecked(taxPin)*/){
			document.getElementById('prnString').value=prnstring;
		
					if (confirm('Are you sure you want to cancel payment?')){
						FetchTaxpayerDetailWithoutValidationSplObl.cancelWhtVatPayment(prnstring,taxPin,cmbTaxSubHead,
								{async:false, callback:function(data){
									if(data != null){
										if(data == "Y"){
											alert("Payment cancelled successfully!");
											if(tableObj.rows.length >= 1){
												for(var i = 1, n = tableObj.rows.length; i <n; i++) 
												{
													if(document.getElementById('vatWithHoldeeHdrCheckbox_'+(i-1)).checked){
														if (document.all) {// for IE
															tableObj.deleteRow(i);
														}
														else{
															tableObj.deleteRow(i);
														}
														
														
													}

												}
											}
											onChangeMonth(obj);
										
										}else{
											alert("Payment cancellation unsuccessful!");
										}
									}else{
										alert("Payment cancellation unsuccessful!");
									}
									
								}});
					}
					
		}
		

	}else{
		alert("No payment details avalible  this period");
	}
}

function canclPmtVIS(obj)
{
	if(obj.value=='cancel')
		{
			document.getElementById('chooseExcelPaymentMethod1').style.display='';
//			document.getElementById('pmtRegVIS').style.display='';
			document.getElementById('paymentTaxObligForm').style.display="none";
		
		}else if(obj.value=='registration'){
			document.getElementById('chooseExcelPaymentMethod1').style.display='none';
			document.getElementById('navigationFieldsetForVis').style.display='none';
			document.getElementById('paymentTaxObligForm').style.display="";
		}
	
}

function showPreviousDetailsTableForVis(partialDetailArray)
{
	var flagVis=0;
	if(partialDetailArray.length>=1){
		document.getElementById('navigationLegendForVis').innerHTML = PreviousLiabilityDetails ;
		var cntr = 0;
		var tabObj = document.getElementById("VisPreviousDetailsTable");
		for(var l = tabObj.rows.length; l >1 ;l--){
			tabObj.deleteRow(l -1);
		}
	
		var periodVis=document.getElementById("VisPeriodMonth").value;
		var dateArrayVis=periodVis.split('-');
		var firstDateVis=dateArrayVis[0];
		var lastDateVis= dateArrayVis[1];
		for(var i=0;i<partialDetailArray.length;i++){
			if(partialDetailArray[i].taxperiodFromDtWid!=null && partialDetailArray[i].taxperiodFromDtWid!=""){
				var valueVis=CompareDates(firstDateVis,partialDetailArray[i].taxperiodFromDtWid);
				if(valueVis==0 || valueVis==2)
					{
					  var valVis=CompareDates(partialDetailArray[i].taxperiodFromDtWid,lastDateVis);
					  if(valVis==0 || valVis==2)
						{  
						  flagVis=1;
							cntr = parseInt(cntr);
							var tabRow = tabObj.insertRow(tabObj.rows.length);
							tabRow.id="itWithHoldeeHdrRow_"+cntr;
							var tabCell = new Array();
							for (var j=0;j<8;j++){
								tabCell[j] = tabRow.insertCell(j);
							}
							var pmtSplDetailVO = partialDetailArray[i];
							var element = document.createElement('input');       
							element.type ='checkbox';
							element.onclick = function () {onSelectCanclPrevDetailRadio(this);};
							element.value = cntr;
							element.id = 'itWithHoldeeHdrCheckbox_'+cntr;
							element.name = "itWithHoldeeHdrCheckbox";
							element.className='bordercl';
							tabCell[0].appendChild(element); 
				
				
							tabCell[1].innerHTML = pmtSplDetailVO.prn;
							tabCell[1].style.textAlign="center";
							tabCell[1].style.fontSize="11";
				
							tabCell[2].innerHTML = pmtSplDetailVO.fromDate;
							tabCell[2].style.textAlign="center";
							tabCell[2].style.fontSize="11";
				
							tabCell[3].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.totalAmount).toFixed(2),true);
							tabCell[3].style.textAlign="right";
							tabCell[3].style.fontSize="11";
				
							tabCell[4].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualFineAmount).toFixed(2),true);
							tabCell[4].style.textAlign="right";
							tabCell[4].style.fontSize="11";
				
							tabCell[5].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualPenaltyAmount).toFixed(2),true);
							tabCell[5].style.textAlign="right";
							tabCell[5].style.fontSize="11";
				
							tabCell[6].innerHTML = convertToKenyanShillingFormatValWithDecimal(Math.ceil(pmtSplDetailVO.actualInterestAmount).toFixed(2),true);
							tabCell[6].style.textAlign="right";
							tabCell[6].style.fontSize="11";
				
							cntr = cntr+1;
						}
					}
			}
			
		}
		if(flagVis==0)
			{
				var table = document.getElementById("VisPreviousDetailsTable");
				var tabRow = table.insertRow(tabObj.rows.length);
				var tabCell = new Array();
				tabCell[0] = tabRow.insertCell(0);
				tabCell[0].innerHTML ="System has not found any PRN for VAT on Imported Services which are not reconciled. Please select proper period.";
				tabCell[0].style.textAlign="center";
				tabCell[0].colSpan="7";
				tabCell[0].style.color="red";
				document.getElementById("scrollableDiv").style.height='60px';
			}
		else
		{
			var px= cntr*35;
			if(px<100){
				px=80;
			}
			if(px>270)
			{
				px=270;
			}
			document.getElementById("scrollableDivVis").style.height=px+'px';
		}
		document.getElementById("scrollableDivVis").style.display = "";
		document.getElementById("navigationFieldsetForVis").style.display = "";
		document.getElementById("VisPreviousDetailsTable").style.display = "";
		document.getElementById('hidNavigationFlag').value = "29";
		
	}
}

function onSelectCanclPrevDetailRadio(obj)
{
	var rows = document.getElementById('VisPreviousDetailsTable').rows.length;
	var flag=false;
	for(var i=0; i<rows-1;i++)
		{
			if(document.getElementById('itWithHoldeeHdrCheckbox_'+i).checked==true)
				{
					flag=true;
				}
		}
	if(flag==true)
		{
		 document.getElementById('cancelPaymentDiv').style.display='';
		 return true;
		}
	else
		{
			document.getElementById('cancelPaymentDiv').style.display='none';
			return false;
		}
}

function cancelVatImpServc(){
	var cmbTaxSubHead = document.getElementById('cmbTaxSubHead').value;
	var taxPayerPin = document.getElementById('txtPin').value;
	var obj =document.getElementById('VisPeriodMonth').value;
	
	var  tableObj =document.getElementById('VisPreviousDetailsTable');
	document.getElementById('prnString').value='';
	var prnstring ='';
	var prn = null; 
	if(tableObj.rows.length > 1){
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(document.getElementById('itWithHoldeeHdrCheckbox_'+(i-1)).checked){
				if (document.all) {// for IE
					prn = tableObj.rows[i].cells[1].innerText;
				}
				else{
					var innrhtmltext = tableObj.rows[i].cells[1].textContent;
					prn = innrhtmltext; 
				}
				
				prnstring =prnstring.concat(prn+',');
			}

		}
		if(prnstring.length==0){
			alert("Please select Prn for cancellation");
		}
		/*Added to limit cancellation of one PRN at a time*/
		else if(prnstring.length>17){
			alert("Please select One PRN at a time for cancellation");
		/*Added to limit cancellation of one PRN at a time :: END*/	
		}else if('' != cmbTaxSubHead 
			&& cmbTaxSubHead.length > 0
			/*&& pinChecked(taxPayerPin)*/){
		document.getElementById('prnString').value=prnstring;
		
					if (confirm('Are you sure you want to cancel payment?')){
						FetchTaxpayerDetailWithoutValidationSplObl.cancelWhtVatPayment(prnstring,taxPayerPin,cmbTaxSubHead,
								{async:false, callback:function(data){
									if(data != null){
										if(data == "Y"){
											alert("Payment cancelled successfully!");
											if(tableObj.rows.length >= 1){
												for(var i = 1, n = tableObj.rows.length; i <n; i++) 
												{
													if(document.getElementById('itWithHoldeeHdrCheckbox_'+(i-1)).checked){
														if (document.all) {// for IE
															tableObj.deleteRow(i);
														}
														else{
															tableObj.deleteRow(i);
														}
														
														
													}

												}
											}
											onChangeMonth(obj);
										}else{
											alert("Payment cancellation unsuccessful!");
										}
									}else{
										alert("Payment cancellation unsuccessful!");
									}
									
								}});
					}
					
		}
		

	}else{
		alert("No payment details avalible  this period");
	}
}
function onSelectionOfRadioForITWith(radioValue)
{
	if(radioValue=='e')
	  {
		  document.getElementById('paymentExcelUploadForm').style.display ='';
		  document.getElementById('paymentTaxObligForm').style.display='none';
		  resetVATWithholdeeInfo();
		  clear_table_data("withholdeeFormTable");
		  clear_table_data("withholdeeFormTbl");
		 // getVatWhtRolloutDate();
		  //document.getElementById('fileVATWith').disabled=false;
		  	document.getElementById('excelVATWithPmtTypeRadio2').checked=true;
			amendmentOrNormal(document.getElementById('excelVATWithPmtTypeRadio2'));
	  }
	else{
		document.getElementById('paymentExcelUploadForm').style.display ='none';
		document.getElementById('paymentTaxObligForm').style.display='';
		document.getElementById('fileVATWith').value='';
		clear_table_data("VatWithPreviousDetailsTable");
		document.getElementById('VatWithPreviousDetailsTable').style.display='none';
		document.getElementById("navigationFieldsetForVatWht").style.display = 'none';
		document.getElementById("scrollableDiv").style.display = 'none';
		document.getElementById("VatWhtPeriodMonth").selectedIndex=-1;
		document.getElementById("VatWhtTaxPeriodYear").selectedIndex=-1;
		document.getElementById('fileVATWith').disabled=true;
		document.getElementById('amendButton').style.display='none';
		document.getElementById('excelVATWithPmtTypeRadio1').checked=false;
		document.getElementById('excelVATWithPmtTypeRadio2').checked=false;
		if(document.getElementById('lblPin').innerHTML!="Withholder’s PIN (HQ)"){ 
		fetchSplOblHdrWebByObligation("N");
		}
	}
}
//Added by Mingu for ITWHT Paypoint PRN Registration :: START
function savePaymentDetailObligItWhtPpt()
{
	{
		var payementType = document.getElementById('cmbPaymentType').value;
		if(payementType == ""){
			alert("Please select Payment Type");
			document.getElementById('specOblPmtTypeRadio1').checked=false;
			document.getElementById('specOblPmtTypeRadio2').checked=false;
			return false;
		}
		if(document.getElementById('cmbPaymentType').value==SAT || document.getElementById('cmbPaymentType').value==VTDP)
		{
			document.getElementById('hidPaymentType').value='SAT';
			if(document.getElementById('cmbTaxSubHead').value==VisOblCode||document.getElementById('cmbTaxSubHead').value==WithHoldee || document.getElementById('cmbTaxSubHead').value==TransmissionOblCode || document.getElementById('cmbTaxSubHead').value==shippingOblCode)
			{

				if (document.getElementById('cmbTaxSubHead').value==WithHoldee && document.getElementById('splPmtType').value=='e'){
					
					if(document.getElementById('isAmendment').value=='Y')
					{
					var  tableObj =document.getElementById('ITWithPreviousDetailsTable');
					document.getElementById('prnString').value='';
					var prnstring ='';
					var prn = null; 
					if(tableObj.rows.length > 1){
						for(var i = 1, n = tableObj.rows.length; i <n; i++) 
						{
							if(document.getElementById('itWithHoldeeHdrCheckbox_'+(i-1)).checked){
								if (document.all) {// for IE
									prn = tableObj.rows[i].cells[1].innerText;
								}
								else{
									var innrhtmltext = tableObj.rows[i].cells[1].textContent;
									prn = innrhtmltext; 
								}
								
								prnstring =prnstring.concat(prn+',');
							}

						}
						if(prnstring.length==0){
							alert("Please select Prn for amendedment");
							return false;
						}else{
							document.getElementById('prnString').value=prnstring;
						}
					}
				}		
					
						if(validateFile())
					{
						if(saveConfirm())
						{
							paymentRegFormSubmitFormItWhtPpt("savePaymentExcelDetail");

						}
					}

				}
				else{

					if(validateFormFields(paymentRegTaxObligPaymentDetailsJson))
					{
						hideTab('TabView',5);
						resetErrorList();
						incError=0;
						if(document.getElementById('cmbTaxSubHead').value==WithHoldee && document.getElementById('cmbPaymentType').value!=VTDP)
						{
							if(document.getElementById('specOblPmtTypeRadio1').checked == false && document.getElementById('specOblPmtTypeRadio2').checked == false)
							{
								alert('Please select atleast one operation for withholding payment.');
								return false;
							}
						}
						if(document.getElementById('checkDisclaimer').checked==true /*&& document.getElementById('cmbPaymentType').value !=VTDP*/)
						{
							if(modifyFlagWithHoldee==1||modifyFlagShipping==1||modifyFlagCable==1||modifyFlagVis==1 ||modifyFlagAGENCY==1 || modifyFlagAUCTION==1)
							{
								alert(firstModify);
								return false;
							}
							else
							{
								if(removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value)>0)
								{
									if(saveConfirm())
									{	var table = document.getElementById('withholdeeWebFormTable');  
										document.getElementById("txtTotalAmountPaidOblig").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value);
										var rows = document.getElementById('withholdeeWebFormTable').rows.length;
										var flag=false;
										for(var i=0; i<rows;i++)
										{
											
											if (null!=document.getElementById('id_'+'withholdeeWebFormTable'+'_'+i+'_1') && ""!=document.getElementById('id_'+'withholdeeWebFormTable'+'_'+i+'_1'))
											 {
												modify=document.getElementById('id_'+'withholdeeWebFormTable'+'_'+i+'_2').innerHTML;
												del=document.getElementById('id_'+'withholdeeWebFormTable'+'_'+i+'_1').innerHTML;
											if((trim(document.getElementById('id_'+'withholdeeWebFormTable'+'_'+i+'_1').innerHTML))=="Delete" && (modify=="Modify"))
											{
												flag=true;
												break;
											}
											 }
											
											
											/*if(document.getElementById('withHoldeeWebFormRadio_'+i).checked==true)
											{
												flag=true;
											}*/
										}
										if(flag==true)
										{
											document.getElementById('isPrevLiabilityChosenForITWht').value='Y';
										}
										else
										{
											document.getElementById('isPrevLiabilityChosenForITWht').value='N';
										}
										paymentRegFormSubmitFormItWhtPpt("saveObligationDetail");
										
									}
								}
								else
								{
									alert(totalAmtGreaterThenZero);
									return false;
								}
							}
						}

						else
						{
							if(document.getElementById('cmbPaymentType').value !=VTDP){
								alert(checkDisclaimer);
								return false;
							}
							if(removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value)>0)
							{
								if(saveConfirm())
								{
									document.getElementById("txtTotalAmountPaidOblig").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value);
									paymentRegFormSubmitFormItWhtPpt("saveObligationDetail");
								}
							}
							else{
								alert(atleastOneObligation);
								return false;
							}
							
						}
					}
					else
					{
						errorPage();
						
					}
				}
			}
			else
			{	
				if(modifyFlagTaxOblig == 1)
				{
					alert(firstModify);
					return false;
				}
				else
				{
					if(removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value)>0)
					{
						if(isWithoutLogin == "Y" || isWithoutLogin =="y"){

							if(document.getElementById('cmbTaxSubHead').value==exciseTaxOblCode)
							{
								if(document.getElementById("taxPayerRegWith").value==goods || document.getElementById("taxPayerRegWith").value==services )
								{
									if(saveConfirm())
									{
										document.getElementById("txtTotalAmountPaidOblig").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value);
										paymentRegFormSubmitFormItWhtPpt("saveObligationDetail");
																			
									}
								}
								else
								{
									alert(paymentAlert);	
									return false;
								}
							}
							else
							{
								if(saveConfirm())
								{
									document.getElementById("txtTotalAmountPaidOblig").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value);
									paymentRegFormSubmitFormItWhtPpt("saveObligationDetail");
									
								}
							}
						}
						else
						{
							if(saveConfirm())
							{
								document.getElementById("txtTotalAmountPaidOblig").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value);
								paymentRegFormSubmitFormItWhtPpt("saveObligationDetail");
								
							}
						}
					}
					else
					{
						alert(atleastOneObligation);
						return false;
					}
				}
			}
		}
		else if(document.getElementById('cmbPaymentType').value==AAT || document.getElementById('cmbPaymentType').value==EAT){
			document.getElementById('hidPaymentType').value='AAT';
			if (removeCommaFrmInput(document.getElementById('total_ITWHTAdditionalAssmntTable_5').value) <= 0) {
				alert(totalAmtGreaterThenZero);
				return false;
			}
			else{
				if (confirm(saveDetails)) {
					document.getElementById('hidObligationType').value='TAX';
					document.getElementById('hidObligationId').value='6';
					document.getElementById('back').disabled=true;
					document.getElementById('cmdSaveOblig').disabled=true;
					document.getElementById('cmdClearOblig').disabled=true;
					document.getElementById('total_ITWHTAdditionalAssmntTable_5').value=removeCommaFrmInput(document.getElementById('total_ITWHTAdditionalAssmntTable_5').value);
					paymentRegFormSubmitFormItWhtPpt("saveObligationDetail");
				}
			}
			}
	}
}
function paymentRegFormSubmitFormItWhtPpt(actionCode)
{
	//document.getElementById('hidPaymentType').value='SAT';
	document.getElementById('hidObligationType').value='TAX';
	document.getElementById('hidObligationId').value='6';
	document.getElementById('cmdSaveOblig').disabled=true;
	document.getElementById('cmdClearOblig').disabled=true;
	document.getElementById('back').disabled=true;
	document.ITWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode="+actionCode;
	document.ITWitholdingPaymentRegForm.submit();
}
//Added by Mingu for ITWHT Paypoint PRN Registration :: END


//Added by Ben and Philemon for RIWHT Paypoints PRN Registration :: START

function onSelectionOfRadioForSpecOblPmtRIWht (specOblPmtTypeRadio){
	var payementType = document.getElementById('cmbPaymentType').value;
	if(payementType == ""){
		alert("Please select Payment Type");
		document.getElementById('rentIncomeWithRadio1').checked=false;
		document.getElementById('rentIncomeWithRadio2').checked=false;
		return false;
	}
	
	  if(specOblPmtTypeRadio=='e')
	  {
		  resetRentIncomeWithholdeeInfoInWith();
		
		  document.getElementById('paymentRentIncomeWithExcelUploadForm').style.display ='';
		  document.getElementById('paymentRentIncomeWithWebForm').style.display='none'; 
		  document.getElementById('RentIncomeWithPaymentFieldlset').style.display='none';
		  document.getElementById('instructionsTableRentIncomeWith').style.display='';
		  //document.getElementById('paymentTaxObligForm').style.display=''; 
		  document.getElementById('paymentRentIncomeWithWebForm').style.display='none'; 
		  document.getElementById('paymentRentIncomeWithRegForm').style.display='none'; 
		  document.getElementById('RentIncomeWithPaymentType').value='e';
		  document.getElementById('disclaimerFieldSet').style.display='none';
		  document.getElementById('RentIncomeWithPaymentFieldlset').style.display='none';
		  //document.getElementById('totalAmountPaidFieldSet').style.display='none';
		  //document.getElementById('rentIncomeWithWebFormLiablibilityTbl').style.display='none';
		  //document.getElementById('navigationFieldset').style.display='none'; 
		  clear_table_data('rentIncomeWithTable');
		  selectedFlagPartial=0;
		  setOtrParamForCSV();
		  clearNevigationData();
		  selectedFlagRentIncomeWithHoldee=0;
		  document.getElementById('excelRentIncomeWithPmtTypeRadio2').checked=true;
		  amendmentOrNormalRentIncomeWHT(document.getElementById('excelRentIncomeWithPmtTypeRadio2'));

		  // document.getElementById('liabilityBtn').disabled=false;
	  }
	  else
	  {
		  document.getElementById('RentIncomeWithPaymentType').value='n';
		  document.getElementById('paymentRentIncomeWithExcelUploadForm').style.display = 'none';
		  
		  document.getElementById('paymentRentIncomeWithWebForm').style.display='none'; 
		  document.getElementById('paymentRentIncomeWithRegForm').style.display='';
		  document.getElementById('RentIncomeWithPaymentFieldlset').style.display='';
		  document.getElementById('instructionsTableRentIncomeWith').style.display='none';
		  //document.getElementById('totalAmountPaidFieldSet').style.display='';
		  //document.getElementById('TotalTaxFieldSet').style.display = 'none';
		  document.getElementById('navigationFieldsetForRentIncomeWith').style.display = 'none';
		  //document.getElementById("txtTotalAmountPaidOblig").value=0;  
		  document.getElementById('disclaimerFieldSet').style.display='none';
		  document.getElementById("txtTotalAmountPaidOblig").readOnly=true;
		  document.getElementById("txtTotalAmountPaidOblig").className='readonlyInput form101_textfcurr_width textonlyRight';
		  //document.getElementById('ObligationDetailFieldSet').style.display = 'none';
		  taxObligation=document.getElementById('cmbTaxSubHead').selectedIndex;
		  document.getElementById('LiablibilityTbl').style.display = 'none';
		  document.getElementById('navigationTable').style.display = 'none';
		  document.getElementById("tblFineList").style.display="none";
		  document.getElementById("tblIntrestList").style.display="none";
		  document.getElementById("tblPaymentList").style.display="none";
		  document.getElementById("tblPenaltyList").style.display="none";
		  document.getElementById('btnTbl').style.display="";
			rowNumbmerPartial=0;
			selectedFlagPartial=0;
			setOtrParamForCSV();
			clearNevigationData();
			if(document.getElementById('isWithoutLogin').value == "N")
				fetchSplOblHdrWebByObligation("N");
			
		  
		  clear_table_data("RentIncomeWithPreviousDetailsTable");
			document.getElementById('RentIncomeWithPreviousDetailsTable').style.display='none';
			document.getElementById("navigationFieldsetForRentIncomeWith").style.display = 'none';
			document.getElementById("scrollableDivRentIncomeWith").style.display = 'none';
			document.getElementById("RentIncomeWithPeriodMonth").selectedIndex=-1;
			document.getElementById("RentIncomeWithTaxPeriodYear").selectedIndex=-1;
	  }
}

function paymentRegFormSubmitFormRIWhtPpt(actionCode)
{
/*	document.getElementById('hidPaymentType').value='SAT';*/
	document.getElementById('hidObligationType').value='TAX';
	document.getElementById('hidObligationId').value='35';
	document.getElementById('cmdSaveOblig').disabled=true;
	document.getElementById('cmdClearOblig').disabled=true;
	document.getElementById('back').disabled=true;
	document.RIWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode="+actionCode;
	document.RIWitholdingPaymentRegForm.submit();
}
function saveRIWHTforpp(){

	if (document.getElementById('cmbTaxSubHead').value==rentIncomeWith && document.getElementById('RentIncomeWithPaymentType').value=='e' && document.getElementById('cmbPaymentType').value==SAT){
		document.getElementById('hidPaymentType').value='SAT';
		if(document.getElementById('isAmendment').value=='Y')
		{
			var  tableObj =document.getElementById('RentIncomeWithPreviousDetailsTable');
			document.getElementById('prnString').value='';
			var prnstring ='';
			var prn = null; 
			if(tableObj.rows.length > 1){
				for(var i = 1, n = tableObj.rows.length; i <n; i++) 
				{
					if(document.getElementById('rentIncomeWithHoldeeHdrCheckbox_'+(i-1)).checked){
						if (document.all) {// for IE
							prn = tableObj.rows[i].cells[1].innerText;
						}
						else{
							var innrhtmltext = tableObj.rows[i].cells[1].textContent;
							prn = innrhtmltext; 
						}

						prnstring =prnstring.concat(prn+',');
					}

				}
				if(prnstring.length==0){
					alert("Please select Prn for amendedment");
					return false;
				}else{
					document.getElementById('prnString').value=prnstring;
				}
			}
		}

		if(validateFileRentIncomeWith())
		{
			if(saveConfirm())
			{
				
				document.getElementById('cmdSaveOblig').disabled=true;
				document.getElementById('cmdClearOblig').disabled=true;
				document.getElementById('back').disabled=true;
				document.RIWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode=savePaymentExcelDetail";
				document.RIWitholdingPaymentRegForm.submit();

			}
		}

	}
	else if(document.getElementById('cmbPaymentType').value==AAT || document.getElementById('cmbPaymentType').value==EAT){
		document.getElementById('hidPaymentType').value='AAT';
		if (removeCommaFrmInput(document.getElementById('total_RentIncomeWHTAdditionalAssmntTable_5').value) <= 0) {
			alert(totalAmtGreaterThenZero);
			return false;
		}
		else{
			if (confirm(saveDetails)) {
				document.getElementById('hidObligationType').value='TAX';
				document.getElementById('hidObligationId').value='35';
				document.getElementById('back').disabled=true;
				document.getElementById('cmdSaveOblig').disabled=true;
				document.getElementById('cmdClearOblig').disabled=true;
				document.getElementById('total_RentIncomeWHTAdditionalAssmntTable_5').value=removeCommaFrmInput(document.getElementById('total_RentIncomeWHTAdditionalAssmntTable_5').value);
				paymentRegFormSubmitFormRIWhtPpt("saveObligationDetail");
			}
		}
	}else{
		if(validateFormFields(paymentRegTaxObligPaymentDetailsJson))
		{
			hideTab('TabView',5);
			resetErrorList();
			incError=0;
			if(document.getElementById('cmbTaxSubHead').value==rentIncomeWith)
			{
				if(document.getElementById('rentIncomeWithRadio1').checked == false && document.getElementById('rentIncomeWithRadio2').checked == false && document.getElementById('hidPaymentType').value =='SAT')
				{
					alert('Please select atleast one operation for Rent Income Withholding payment.');
					return false;
				}
			}

			if(modifyFlagRentIncomeWithHoldee==1)
			{
				alert(firstModify);
				return false;
			}
			else
			{
				if(removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value)>0)
				{
					if(saveConfirm())
					{
						document.getElementById('hidPaymentType').value='SAT';
						document.getElementById('cmdSaveOblig').disabled=true;
						document.getElementById('cmdClearOblig').disabled=true;
						document.getElementById('back').disabled=true;
						document.getElementById("txtTotalAmountPaidOblig").value = removeCommaFrmInput(document.getElementById("txtTotalAmountPaidOblig").value);
						var flag=false;
						/*var rows = document.getElementById('rentIncomeWithWebFormLiablibilityTbl').rows.length;
						var flag=false;
						var table = document.getElementById('rentIncomeWithholdeeWebFormTable');
						if(!(table.rows.length==1))
						{ 	
							for (var i = 1, n = table.rows.length; i <n; i++) 
							{ 
								modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
								if((trim(document.getElementById('id_temp_'+'rentIncomeWithholdeeWebFormTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify"))
								{
									flag=true;
									break;
								}
							}
						}*/
						if(flag)
						{
							document.getElementById('isPrevLiabilityChosenForITWht').value='Y';
						}
						else
						{
							document.getElementById('isPrevLiabilityChosenForITWht').value='N';
						}
					/*	document.paymentRegForm.action="paymentRegistration.htm?actionCode=saveObligationDetail";
						document.paymentRegForm.submit();*/
						paymentRegFormSubmitFormRIWhtPpt("saveObligationDetail");
					}
				}
				else
				{
					alert(totalAmtGreaterThenZero);
					return false;
				}
			}
		}
	}
}

function onchangeOfPaymentTypeRIWhtPpt(obj)
{
	if(obj.value==SAT)
		{
			document.getElementById('rentIncomeWithRadio1').checked=false;
			document.getElementById('rentIncomeWithRadio2').checked=false;
			document.getElementById('RentIncomeWithPaymentType').style.display="";
			document.getElementById('rentIncomeWithRadio1').style.display="";
			document.getElementById('rentIncomeWithRadio2').style.display="";
			document.getElementById('disclaimerFieldSet').style.display="none";
			document.getElementById('paymentRentIncomeWithExcelUploadForm').style.display="none";
			document.getElementById('paymentRentIncomeWithRegForm').style.display="none";
			document.getElementById('paymentRentIncomeWithWebForm').style.display="none";
			document.getElementById('paymentRentIncomeWithAdditionalAssmntForm').style.display="none";
			document.getElementById('lblTotalAmountPaid').style.display ='';
			  document.getElementById('txtTotalAmountPaidOblig').style.display ='';
			  document.getElementById("txtTotalAmountPaidOblig").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
				document.getElementById("total_RentIncomeWHTAdditionalAssmntTable_5").setAttribute("name", "VatWitholdingTotalAmt");
		}
	else if(obj.value==AAT)
		{
		document.getElementById('rentIncomeWithRadio1').checked=false;
		document.getElementById('rentIncomeWithRadio2').checked=false;
		document.getElementById('RentIncomeWithPaymentType').style.display="none";
		document.getElementById('rentIncomeWithRadio1').style.display="none";
		document.getElementById('rentIncomeWithRadio2').style.display="none";
		document.getElementById('disclaimerFieldSet').style.display="none";
		document.getElementById('paymentRentIncomeWithExcelUploadForm').style.display="none";
		document.getElementById('paymentRentIncomeWithRegForm').style.display="none";
		document.getElementById('paymentRentIncomeWithWebForm').style.display="none";
		document.getElementById('paymentRentIncomeWithAdditionalAssmntForm').style.display="";
		document.getElementById('lblTotalAmountPaid').style.display ="none";
		  document.getElementById('txtTotalAmountPaidOblig').style.display ="none";
		  document.getElementById("txtTotalAmountPaidOblig").setAttribute("name", "VatWitholdingTotalAmt");
			document.getElementById("total_RentIncomeWHTAdditionalAssmntTable_5").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
		}
	else if(obj.value==EAT)
	{
		document.getElementById('rentIncomeWithRadio1').checked=false;
		document.getElementById('rentIncomeWithRadio2').checked=false;
		document.getElementById('RentIncomeWithPaymentType').style.display="none";
		document.getElementById('rentIncomeWithRadio1').style.display="none";
		document.getElementById('rentIncomeWithRadio2').style.display="none";
		document.getElementById('disclaimerFieldSet').style.display="none";
		document.getElementById('paymentRentIncomeWithExcelUploadForm').style.display="none";
		document.getElementById('paymentRentIncomeWithRegForm').style.display="none";
		document.getElementById('paymentRentIncomeWithWebForm').style.display="none";
		document.getElementById('paymentRentIncomeWithAdditionalAssmntForm').style.display="";
		document.getElementById('lblTotalAmountPaid').style.display ="none";
		  document.getElementById('txtTotalAmountPaidOblig').style.display ="none";
		  document.getElementById("txtTotalAmountPaidOblig").setAttribute("name", "VatWitholdingTotalAmt");
			document.getElementById("total_RentIncomeWHTAdditionalAssmntTable_5").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
		
	}
}
function addrowAssessmentDetailsForRIWhtPayPointSpecialPage()
{
	if(checkDuplicateRentIncomeWithAssessmentRows()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('RentIncomeWHTAdditionalAssmntTable','3','5','5','validateDeleteRowRentWHTAdditionalAssmntTable','','N','N','6,7');
		   }
		/*Added by Ben on 21062022 :: Start  clearing totalAmount on add*/
		document.getElementById('totalMRIAddAssAmountid').value =  "";
   }

}
//Added by  by Ben and Philemon for RIWHT Paypoints PRN Registration :: END
//END
function onchangeOfPaymentTypeItWhtPpt(obj)
{
	if(obj.value==SAT)
		{
			document.getElementById('specOblPmtTypeRadio1').checked=false;
			document.getElementById('specOblPmtTypeRadio2').checked=false;
			document.getElementById('withholdeeFormTableItWht').style.display="";
			document.getElementById('specOblPmtTypeRadio1').style.display="";
			document.getElementById('specOblPmtTypeRadio2').style.display="";
			document.getElementById('disclaimerFieldSet').style.display="none";
			document.getElementById('paymentExcelUploadForm').style.display="none";
			document.getElementById('paymentWithWebForm').style.display="none";
			document.getElementById('paymentTaxObligForm').style.display="none";
			document.getElementById('paymentITWithAdditionalAssmntForm').style.display="none";
			document.getElementById('lblTotalAmountPaid').style.display ='';
			  document.getElementById('txtTotalAmountPaidOblig').style.display ='';
			  document.getElementById("txtTotalAmountPaidOblig").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
				document.getElementById("total_ITWHTAdditionalAssmntTable_5").setAttribute("name", "VatWitholdingTotalAmt");
		}
	else if(obj.value==AAT)
		{
		document.getElementById('specOblPmtTypeRadio1').checked=false;
		document.getElementById('specOblPmtTypeRadio2').checked=false;
		document.getElementById('withholdeeFormTableItWht').style.display="none";
		document.getElementById('specOblPmtTypeRadio1').style.display="none";
		document.getElementById('specOblPmtTypeRadio2').style.display="none";
		document.getElementById('disclaimerFieldSet').style.display="none";
		document.getElementById('paymentExcelUploadForm').style.display="none";
		document.getElementById('paymentWithWebForm').style.display="none";
		document.getElementById('paymentTaxObligForm').style.display="none";
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display="";
		document.getElementById('lblTotalAmountPaid').style.display ="none";
		  document.getElementById('txtTotalAmountPaidOblig').style.display ="none";
		  document.getElementById("txtTotalAmountPaidOblig").setAttribute("name", "VatWitholdingTotalAmt");
			document.getElementById("total_ITWHTAdditionalAssmntTable_5").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
		}
	else if(obj.value==EAT)
	{
		document.getElementById('specOblPmtTypeRadio1').checked=false;
		document.getElementById('specOblPmtTypeRadio2').checked=false;
		document.getElementById('withholdeeFormTableItWht').style.display="none";
		document.getElementById('specOblPmtTypeRadio1').style.display="none";
		document.getElementById('specOblPmtTypeRadio2').style.display="none";
		document.getElementById('disclaimerFieldSet').style.display="none";
		document.getElementById('paymentExcelUploadForm').style.display="none";
		document.getElementById('paymentWithWebForm').style.display="none";
		document.getElementById('paymentTaxObligForm').style.display="none";
		document.getElementById('paymentITWithAdditionalAssmntForm').style.display="";
		document.getElementById('lblTotalAmountPaid').style.display ="none";
		  document.getElementById('txtTotalAmountPaidOblig').style.display ="none";
		  document.getElementById("txtTotalAmountPaidOblig").setAttribute("name", "VatWitholdingTotalAmt");
			document.getElementById("total_ITWHTAdditionalAssmntTable_5").setAttribute("name", "paymentdetailDTO.totalAmountTobePaid");
		
	}
}
function fetchITWHTPPTAssessmentDetails(obj)
{
if(document.getElementById('in_ITWHTAdditionalAssmntTable_3').value!=null 
				&& document.getElementById('in_ITWHTAdditionalAssmntTable_3').value!='')
		{
			var paramArray = new Array();
			paramArray[0] = obj;
			paramArray[1]=document.getElementById('txtPin');
			paramArray[2]=document.getElementById('cmbPaymentType');
			paramArray[3]=document.getElementById('cmbTaxSubHead');
			paramArray[4]=null;
			FetchAdditionalAssessmentDetails.fetchAdditionalAssessmentDetails(paramArray[0].value, 
					paramArray[1].value,paramArray[2].value, paramArray[3].value,paramArray[4],{async:false,callback:function(data){
					if(data!=null){
						if(data.errorMsg!=null && data.errorMsg!="")
						{
							alert(data.errorMsg);
							resetAdditionalAssmntDtls();
						}else{/*Edited by kirui on 16062022*/
						document.getElementById('totalITAddAssAmountid').value=data.totalAmountForAdditionalAssessment;
						document.getElementById('totalITAddAssAmountid').value=convertToKenyanShillingFormatVal(document.getElementById('totalITAddAssAmountid').value);
						document.getElementById('in_ITWHTAdditionalAssmntTable_4').value=data.taxPeriodForAdditionalAssessment;
						document.getElementById('in_ITWHTAdditionalAssmntTable_6').value=data.bclSplObligationHdrId;
						document.getElementById('in_ITWHTAdditionalAssmntTable_7').value=data.bclSplWithholdingHdrId;
						}
					}
					else{
						alert("Error fetching data.");
					}
			}});
		}
	else{
		alert("Please enter Assessment Notice Number.");
		resetAdditionalAssmntDtls();
		return false;
	}
}
function validateITWithPptAssessmentDetails()
{
 if(document.getElementById("in_ITWHTAdditionalAssmntTable_3").value=='' || 
   			document.getElementById("in_ITWHTAdditionalAssmntTable_3").value==null)
	   		{
	   			alert("Please enter Assessment Notice Number.");
	   			return false;
	   		}
 if(document.getElementById("in_ITWHTAdditionalAssmntTable_4").value=='' || 
   			document.getElementById("in_ITWHTAdditionalAssmntTable_4").value==null)
	   		{
	   			return false;
	   		}
 if(document.getElementById("in_ITWHTAdditionalAssmntTable_5").value=='' || 
   			document.getElementById("in_ITWHTAdditionalAssmntTable_5").value==null)
	   		{
	   			alert("Amount to be paid can not be 0.");
	   			document.getElementById("in_ITWHTAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
 if(document.getElementById("in_ITWHTAdditionalAssmntTable_5").value!='' || 
   			document.getElementById("in_ITWHTAdditionalAssmntTable_5").value!=null)
	   		{
 			var amt= parseInt(document.getElementById("in_ITWHTAdditionalAssmntTable_5").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Amount to be paid can not be 0.");
		 				document.getElementById("in_ITWHTAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
 /*Edited by kirui on 16062022 :: Start*/
 if(document.getElementById("totalITAddAssAmountid").value=='' || 
			document.getElementById("totalITAddAssAmountid").value==null)
	   		{
	   			alert("Additional Assessment Amount can not be 0.");
	   			document.getElementById("in_ITWHTAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
if(document.getElementById("totalITAddAssAmountid").value!='' || 
			document.getElementById("totalITAddAssAmountid").value!=null)
	   		{
			var amt= parseInt(document.getElementById("totalITAddAssAmountid").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Additional Assessment Amount can not be 0.");
		 				document.getElementById("in_ITWHTAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
if(document.getElementById("in_ITWHTAdditionalAssmntTable_5").value!='' || 
			document.getElementById("in_ITWHTAdditionalAssmntTable_5").value!=null ||
			document.getElementById("totalITAddAssAmountid").value!='' || 
			document.getElementById("totalITAddAssAmountid").value!=null)
   		{
			var amtToBePaidAss= parseInt(removeCommaFrmInput(document.getElementById("in_ITWHTAdditionalAssmntTable_5").value));
			var totalAssAmt= removeCommaFrmInput(document.getElementById('totalITAddAssAmountid').value);
 			if(amtToBePaidAss > totalAssAmt)
 				{
 					alert("Amount to be Paid can not be greater than the Total Amount");
 					document.getElementById("in_ITWHTAdditionalAssmntTable_5").value='';
		   			return false;
 				}
 			else if(isNaN(amtToBePaidAss))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_ITWHTAdditionalAssmntTable_5").value='';
 				return false;
 			}
 			else if(isNaN(totalAssAmt))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_ITWHTAdditionalAssmntTable_5").value='';
 				return false;
 			}
   		}/*Edited by kirui on 16062022 :: End*/
		
	 return true;
}
function addrowAssessmentDetailsForItWhtPayPointSpecialPage()
{
	if(checkDuplicateItWithPptAssessmentRows()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('ITWHTAdditionalAssmntTable','3','5','5');
		   }
		/*Added by Ben on 21062022 :: Start  clearing totalAmount on add*/
		document.getElementById('totalITAddAssAmountid').value =  "";
   }
}
function checkDuplicateItWithPptAssessmentRows()
{
	var table = document.getElementById('ITWHTAdditionalAssmntTable');  
var assmntNo = document.getElementById('in_ITWHTAdditionalAssmntTable_3').value;
var taxPeriod= document.getElementById('in_ITWHTAdditionalAssmntTable_4').value;
	if(!(table.rows.length==1))
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'ITWHTAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
				(table.rows[i].cells[3].innerHTML==assmntNo) && (table.rows[i].cells[4].innerHTML==taxPeriod))
			{
				alert("You already added this details.");
				return false;
			}
		}
	}
	return true;
}
function amendmentOrNormalITWHTPaypoint(obj)
{
	if(obj.value=='amendment')
		{
			document.getElementById('chooseExcelPaymentMethodIT').style.display='';
			document.getElementById('file').disabled=true;
			document.getElementById('instructionsTableIT').style.display='none';
			document.getElementById('isAmendment').value='Y';
		}
	else if(obj.value=='normal')
		{
			document.getElementById('chooseExcelPaymentMethodIT').style.display='none';
			document.getElementById('ITWithPreviousDetailsTable').style.display='none';
			clear_table_data("ITWithPreviousDetailsTable");
			document.getElementById('ITWhtTaxPeriodYear').selectedIndex=0;
			document.getElementById('ITWhtPeriodMonth').selectedIndex=0;
			document.getElementById('navigationFieldsetForITWht').style.display='none';
			document.getElementById("scrollableDiv1").style.display = 'none';
			document.getElementById('file').disabled=false;
			document.getElementById('instructionsTableIT').style.display='';
			document.getElementById('amendButton1').style.display='none';
			document.getElementById('isAmendment').value='N';
		}
}
function downloadITWhtPrnAmendmentPaypoint(){
	var  tableObj =document.getElementById('ITWithPreviousDetailsTable');
	document.getElementById('prnString').value='';
	var prnstring ='';
	var prn = null; 
	if(tableObj.rows.length > 1){
		for(var i = 1, n = tableObj.rows.length; i <n; i++) 
		{
			if(document.getElementById('itWithHoldeeHdrCheckbox_'+(i-1)).checked){
				if (document.all) {// for IE
					prn = tableObj.rows[i].cells[1].innerText;
				}
				else{
					var innrhtmltext = tableObj.rows[i].cells[1].textContent;
					prn = innrhtmltext; 
				}
				
				prnstring =prnstring.concat(prn+',');
			}

		}
		if(prnstring.length==0){
			alert("Please select Prn for amendedment");
		}else{
			document.getElementById('prnString').value=prnstring;			
			document.getElementById('cmbTaxSubHead').value=WithHoldee;
				if (confirm('Are you sure you want to download amendment ?')){
					document.getElementById('cmdSaveOblig').disabled=false;//changed
					document.ITWitholdingPaymentRegForm.action="paymentRegistration.htm?actionCode=downloadPaymentAmendment";
					document.ITWitholdingPaymentRegForm.submit();
				}			
		}	
		document.getElementById("uploadDiv").style.display = "";

	}else{
		alert("No payment details avalible  this period");
	}
}
//Added for VAT on Imported Services :: START
function validatevISWithAssessmentDetails()
{
 if(document.getElementById("in_VisAdditionalAssmntTable_3").value=='' || 
   			document.getElementById("in_VisAdditionalAssmntTable_3").value==null)
	   		{
	   			alert("Please enter Assessment Notice Number.");
	   			return false;
	   		}
 if(document.getElementById("in_VisAdditionalAssmntTable_4").value=='' || 
   			document.getElementById("in_VisAdditionalAssmntTable_4").value==null)
	   		{
	   			return false;
	   		}
 if(document.getElementById("in_VisAdditionalAssmntTable_5").value=='' || 
   			document.getElementById("in_VisAdditionalAssmntTable_5").value==null)
	   		{
	   			alert("Amount to be paid can not be 0.");
	   			document.getElementById("in_VisAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
 if(document.getElementById("in_VisAdditionalAssmntTable_5").value!='' || 
   			document.getElementById("in_VisAdditionalAssmntTable_5").value!=null)
{
 				var amt= parseInt(document.getElementById("in_VisAdditionalAssmntTable_5").value);
	 			if(amt == 0 || amt== 0.0)
 				{
	 				alert("Amount to be paid can not be 0.");
	 				document.getElementById("in_VisAdditionalAssmntTable_5").value='';
		   			return false;
 				}
	 			if(document.getElementById("in_VisAdditionalAssmntTable_8").value=='' || 
				document.getElementById("in_VisAdditionalAssmntTable_8").value==null)
		   		{
		   			alert("Additional Assessment Amount can not be 0.");
		   			document.getElementById("in_VisAdditionalAssmntTable_5").value='';
		   			return false;
		   		}
}
if(document.getElementById("in_VisAdditionalAssmntTable_8").value!='' || 
			document.getElementById("in_VisAdditionalAssmntTable_8").value!=null)
	   		{
			var amt= parseInt(document.getElementById("in_VisAdditionalAssmntTable_8").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Additional Assessment Amount can not be 0.");
		 				document.getElementById("in_VisAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
if(document.getElementById("in_VisAdditionalAssmntTable_5").value!='' || 
			document.getElementById("in_VisAdditionalAssmntTable_5").value!=null ||
			document.getElementById("in_VisAdditionalAssmntTable_8").value!='' || 
			document.getElementById("in_VisAdditionalAssmntTable_8").value!=null)
   		{
			var amtToBePaidAss= parseInt(removeCommaFrmInput(document.getElementById("in_VisAdditionalAssmntTable_5").value));
			var totalAssAmt= removeCommaFrmInput(document.getElementById('in_VisAdditionalAssmntTable_8').value);
			if(amtToBePaidAss > totalAssAmt)
 				{
 					alert("Amount to be Paid can not be greater than the Total Amount");
 					document.getElementById("in_VisAdditionalAssmntTable_5").value='';
		   			return false;
 				}
 			else if(isNaN(amtToBePaidAss))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_VisAdditionalAssmntTable_5").value='';
 				return false;
 			}
 			else if(isNaN(totalAssAmt))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_VisAdditionalAssmntTable_5").value='';
 				return false;
 			}
	}
	 return true;
}
function addrowVisAssessmentDetails()
{
	//if(checkDuplicateVisWithAssessmentRows() && checkPaymentDetailsEntriesVis()){
	if(checkDuplicateVisWithAssessmentRows() && checkPaymentDetailsEntriesVis()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('VisAdditionalAssmntTable','3','6','3','validateDeleteRowVisAdditionalAssmntTable','','N','N','6,7');
		   }
		/*Added by Ben on 21062022 :: Start  clearing totalAmount on add*/
		document.getElementById('in_VisAdditionalAssmntTable_8').value =  "";
   }
}
function checkDuplicateVisWithAssessmentRows()
{
	var table = document.getElementById('VisAdditionalAssmntTable');  
	var assmntNo = document.getElementById('in_VisAdditionalAssmntTable_3').value;
	var taxPeriod= document.getElementById('in_VisAdditionalAssmntTable_4').value;
	if(!(table.rows.length==1))
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'VisAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
				(table.rows[i].cells[3].innerHTML==assmntNo) && (table.rows[i].cells[4].innerHTML==taxPeriod))
			{
				alert("You already added this details.");
				return false;
			}
		}
	}
	return true;
}
function validateDeleteRowVisAdditionalAssmntTable(tab_str, rowno, cols)
{
	var table = document.getElementById('VisAdditionalAssmntTable');  
	var	totalAmt = removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var tempAmt = table.rows[rowno].cells[5].innerHTML;
	totalAmt = totalAmt - parseInt(removeCommaFrmInput(tempAmt),"10");
	document.getElementById('txtTotalAmountPaidOblig').value =  totalAmt;
	document.getElementById('txtTotalAmountPaidOblig').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true);
}
function fetchVisAssessmentDetails(obj)
{
if(document.getElementById('in_VisAdditionalAssmntTable_3').value!=null 
				&& document.getElementById('in_VisAdditionalAssmntTable_3').value!='')
		{
			var paramArray = new Array();
			paramArray[0] = obj;
			paramArray[1]=document.getElementById('txtPin');
			paramArray[2]=document.getElementById('cmbPaymentType');
			paramArray[3]=document.getElementById('cmbTaxSubHead');
			paramArray[4]=null;
			FetchAdditionalAssessmentDetails.fetchAdditionalAssessmentDetails(paramArray[0].value, 
					paramArray[1].value,paramArray[2].value, paramArray[3].value,paramArray[4],{async:false,callback:function(data){
					if(data!=null){
						if(data.errorMsg!=null && data.errorMsg!="")
						{
							alert(data.errorMsg);
							resetAdditionalAssmntDtlsForVis();
						}else{
						document.getElementById('in_VisAdditionalAssmntTable_8').value=data.totalAmountForAdditionalAssessment;
						document.getElementById('in_VisAdditionalAssmntTable_8').value=convertToKenyanShillingFormatVal(document.getElementById('in_VisAdditionalAssmntTable_8').value);						
						document.getElementById('in_VisAdditionalAssmntTable_4').value=data.taxPeriodForAdditionalAssessment;
						//document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_5').value);
						document.getElementById('in_VisAdditionalAssmntTable_6').value=data.bclSplObligationHdrId;
						document.getElementById('in_VisAdditionalAssmntTable_7').value=data.bclSplImpServiceHdrId;
						}
					}
					else{
						alert("Error fetching data.");
					}
			}});
		}
	else{
		alert("Please enter Assessment Notice Number.");
		resetAdditionalAssmntDtlsForVis();
		return false;
	}
}
function resetAdditionalAssmntDtlsForVis()
{
	document.getElementById('in_VisAdditionalAssmntTable_3').value="";
	document.getElementById('in_VisAdditionalAssmntTable_4').value="";
	document.getElementById('in_VisAdditionalAssmntTable_5').value="";
	document.getElementById('in_VisAdditionalAssmntTable_8').value="";
}
function addCommaToAmountToBePaidVis()
{
	document.getElementById('in_VisAdditionalAssmntTable_5').value=convertToKenyanShillingFormatVal(document.getElementById('in_VisAdditionalAssmntTable_5').value);
}
function beforeAddVisAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	VisAssmntTax=removeCommaFrmInput(document.getElementById('in_VisAdditionalAssmntTable_5').value);
	TotalAssmntAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	}

}
function afterAddVisAssmntTable()
{
	if(document.getElementById('forSpecialPayPointPage').value!='true')
		{
			TotalAssmntAmt=convertToKenyanShillingFormatVal(parseInt(VisAssmntTax,10)+parseInt(TotalAssmntAmt,10),true);
			document.getElementById('txtTotalAmountPaidOblig').value=TotalAssmntAmt;
		}
}
function beforeModifyVisAssmntTable(row){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	if(checkDuplicateVisWithAssessmentRows()){
		rowno=row;
		var table = document.getElementById('VisAdditionalAssmntTable');
		VisAssmntTax=table.rows[rowno].cells[5].innerHTML;
		var amtToPaidWithHoldeeArray=VisAssmntTax.split('<');
		VisAssmntTax=amtToPaidWithHoldeeArray[0];
	}
	else {
		return false;
	}
	}
}
function afterModifyVisAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	var table = document.getElementById('VisAdditionalAssmntTable');
	var tmpAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var newAmt=table.rows[rowno].cells[5].innerHTML;
	var newAmountArray=newAmt.split('<');
	newAmt=newAmountArray[0];
	document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(parseInt(tmpAmt,10)+parseInt(removeCommaFrmInput(newAmt),"10")-parseInt(removeCommaFrmInput(VisAssmntTax),10),true); 
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
	}
}
function checkPaymentDetailsEntriesVis(){
	var table = document.getElementById('VisAdditionalAssmntTable');  
	
	if(!(table.rows.length==1))
	{ 
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{
			if((trim(document.getElementById('id_temp_'+'VisAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" )
			{
				alert("You can only generate PRN for one period");
				return false;	
			}
		}
	}
	return true;
}
function clearAllAdditionalAssmntDataVIS()
{
	resetAdditionalAssmntDtlsForVIS();
	clear_table_data('VisAdditionalAssmntTable');
	document.getElementById('txtTotalAmountPaidOblig').value=0; 
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
}

//added for 81171 START
function caclSEPDeemedAmtTax()
{
	var taxRate= 10.0;
	var taxRateofDeedmed= 30.0;
	var MonthlySEP= parseInt(document.getElementById('monthlyTurnoverSEP').value);
	if(isNaN(MonthlySEP))
	{
		alert("Please Enter Numeric Value in Monthly Turnover Field.");
		document.getElementById('monthlyTurnoverSEP').value='';
		document.getElementById('deemedTaxProfitSEP').value='';
		document.getElementById('txtTotalAmountPaidOblig').value='';
		return false;
	}
	if(MonthlySEP<0 || MonthlySEP==0)
	{
		alert("Monthly turnover cannot be less than or equal to zero, please enter value greater than zero");
		document.getElementById('monthlyTurnoverSEP').value='';
		document.getElementById('deemedTaxProfitSEP').value='';
		document.getElementById('txtTotalAmountPaidOblig').value='';
		return false;
	}
	else
	{
		var deemedtotalTax = (taxRate*MonthlySEP)/100;
		document.getElementById('deemedTaxProfitSEP').value = deemedtotalTax;
		var totalTax = (taxRateofDeedmed*deemedtotalTax)/100;
		document.getElementById('txtTotalAmountPaidOblig').value=totalTax;
	}
}

function fetchDatAssessmentDetails(obj)
{
if(document.getElementById('in_DatAdditionalAssmntTable_3').value!=null 
				&& document.getElementById('in_DatAdditionalAssmntTable_3').value!='')
		{
			var paramArray = new Array();
			paramArray[0] = obj;
			paramArray[1]=document.getElementById('txtPin');
			paramArray[2]=document.getElementById('cmbPaymentType');
			paramArray[3]=document.getElementById('cmbTaxSubHead');
			paramArray[4]=null;
			FetchAdditionalAssessmentDetails.fetchAdditionalAssessmentDetails(paramArray[0].value, 
					paramArray[1].value,paramArray[2].value, paramArray[3].value,paramArray[4],{async:false,callback:function(data){
					if(data!=null){
						if(data.errorMsg!=null && data.errorMsg!="")
						{
							alert(data.errorMsg);
							resetAdditionalAssmntDtlsForDat();
						}else{
						document.getElementById('in_DatAdditionalAssmntTable_8').value=data.totalAmountForAdditionalAssessment;
						document.getElementById('in_DatAdditionalAssmntTable_8').value=convertToKenyanShillingFormatVal(document.getElementById('in_DatAdditionalAssmntTable_8').value);						
						document.getElementById('in_DatAdditionalAssmntTable_4').value=data.taxPeriodForAdditionalAssessment;
						//document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_5').value);
						document.getElementById('in_DatAdditionalAssmntTable_6').value=data.bclSplObligationHdrId;
						document.getElementById('in_DatAdditionalAssmntTable_7').value=data.bclSplImpServiceHdrId;
						}
					}
					else{
						alert("Error fetching data.");
					}
			}});
		}
	else{
		alert("Please enter Assessment Notice Number.");
		resetAdditionalAssmntDtlsForDat();
		return false;
	}
}

//Start: EAT and AAT SEP 22/07/2025
function fetchSEPAssessmentDetails(obj)
{
if(document.getElementById('in_SEPAdditionalAssmntTable_3').value!=null 
				&& document.getElementById('in_SEPAdditionalAssmntTable_3').value!='')
		{
			var paramArray = new Array();
			paramArray[0] = obj;
			paramArray[1]=document.getElementById('txtPin');
			paramArray[2]=document.getElementById('cmbPaymentType');
			paramArray[3]=document.getElementById('cmbTaxSubHead');
			paramArray[4]=null;
			FetchAdditionalAssessmentDetails.fetchAdditionalAssessmentDetails(paramArray[0].value, 
					paramArray[1].value,paramArray[2].value, paramArray[3].value,paramArray[4],{async:false,callback:function(data){
					if(data!=null){
						if(data.errorMsg!=null && data.errorMsg!="")
						{
							alert(data.errorMsg);
							resetAdditionalAssmntDtlsForSEP();
						}else{
						document.getElementById('in_SEPAdditionalAssmntTable_8').value=data.totalAmountForAdditionalAssessment;
						document.getElementById('in_SEPAdditionalAssmntTable_8').value=convertToKenyanShillingFormatVal(document.getElementById('in_SEPAdditionalAssmntTable_8').value);						
						document.getElementById('in_SEPAdditionalAssmntTable_4').value=data.taxPeriodForAdditionalAssessment;
						//document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(document.getElementById('in_RentIncomeWHTAdditionalAssmntTable_5').value);
						document.getElementById('in_SEPAdditionalAssmntTable_6').value=data.bclSplObligationHdrId;
						document.getElementById('in_SEPAdditionalAssmntTable_7').value=data.bclSplImpServiceHdrId;
						}
					}
					else{
						alert("Error fetching data.");
					}
			}});
		}
	else{
		alert("Please enter Assessment Notice Number.");
		resetAdditionalAssmntDtlsForSEP();
		return false;
	}
}

function resetAdditionalAssmntDtlsForSEP()
{
	document.getElementById('in_SEPAdditionalAssmntTable_3').value="";
	document.getElementById('in_SEPAdditionalAssmntTable_4').value="";
	document.getElementById('in_SEPAdditionalAssmntTable_5').value="";
	document.getElementById('in_SEPAdditionalAssmntTable_8').value="";
}
function validateSEPWithAssessmentDetails()
{
 if(document.getElementById("in_SEPAdditionalAssmntTable_3").value=='' || 
   			document.getElementById("in_SEPAdditionalAssmntTable_3").value==null)
	   		{
	   			alert("Please enter Assessment Notice Number.");
	   			return false;
	   		}
 if(document.getElementById("in_SEPAdditionalAssmntTable_4").value=='' || 
   			document.getElementById("in_SEPAdditionalAssmntTable_4").value==null)
	   		{
	   			return false;
	   		}
 if(document.getElementById("in_SEPAdditionalAssmntTable_5").value=='' || 
   			document.getElementById("in_SEPAdditionalAssmntTable_5").value==null)
	   		{
	   			alert("Amount to be paid can not be 0.");
	   			document.getElementById("in_SEPAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
 if(document.getElementById("in_SEPAdditionalAssmntTable_5").value!='' || 
   			document.getElementById("in_SEPAdditionalAssmntTable_5").value!=null)
{
 				var amt= parseInt(document.getElementById("in_SEPAdditionalAssmntTable_5").value);
	 			if(amt == 0 || amt== 0.0)
 				{
	 				alert("Amount to be paid can not be 0.");
	 				document.getElementById("in_SEPAdditionalAssmntTable_5").value='';
		   			return false;
 				}
	 			if(document.getElementById("in_SEPAdditionalAssmntTable_8").value=='' || 
				document.getElementById("in_SEPAdditionalAssmntTable_8").value==null)
		   		{
		   			alert("Additional Assessment Amount can not be 0.");
		   			document.getElementById("in_SEPAdditionalAssmntTable_5").value='';
		   			return false;
		   		}
}
if(document.getElementById("in_SEPAdditionalAssmntTable_8").value!='' || 
			document.getElementById("in_SEPAdditionalAssmntTable_8").value!=null)
	   		{
			var amt= parseInt(document.getElementById("in_SEPAdditionalAssmntTable_8").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Additional Assessment Amount can not be 0.");
		 				document.getElementById("in_SEPAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
if(document.getElementById("in_SEPAdditionalAssmntTable_5").value!='' || 
			document.getElementById("in_SEPAdditionalAssmntTable_5").value!=null ||
			document.getElementById("in_SEPAdditionalAssmntTable_8").value!='' || 
			document.getElementById("in_SEPAdditionalAssmntTable_8").value!=null)
   		{
			var amtToBePaidAss= parseInt(removeCommaFrmInput(document.getElementById("in_SEPAdditionalAssmntTable_5").value));
			var totalAssAmt= removeCommaFrmInput(document.getElementById('in_SEPAdditionalAssmntTable_8').value);
			if(amtToBePaidAss > totalAssAmt)
 				{
 					alert("Amount to be Paid can not be greater than the Total Amount");
 					document.getElementById("in_SEPAdditionalAssmntTable_5").value='';
		   			return false;
 				}
 			else if(isNaN(amtToBePaidAss))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_SEPAdditionalAssmntTable_5").value='';
 				return false;
 			}
 			else if(isNaN(totalAssAmt))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_SEPAdditionalAssmntTable_5").value='';
 				return false;
 			}
	}
	 return true;
}
function addrowSEPAssessmentDetails()
{
	//if(checkDuplicateDatWithAssessmentRows() && checkPaymentDetailsEntriesDat()){
	if(checkDuplicateSEPWithAssessmentRows() && checkPaymentDetailsEntriesSEP()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('SEPAdditionalAssmntTable','3','6','3','validateDeleteRowSEPAdditionalAssmntTable','','N','N','6,7');
		   }
		document.getElementById('in_SEPAdditionalAssmntTable_8').value =  "";
   }
}
function checkDuplicateSEPWithAssessmentRows()
{
	var table = document.getElementById('SEPAdditionalAssmntTable');  
	var assmntNo = document.getElementById('in_SEPAdditionalAssmntTable_3').value;
	var taxPeriod= document.getElementById('in_SEPAdditionalAssmntTable_4').value;
	if(!(table.rows.length==1))
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'SEPAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
				(table.rows[i].cells[3].innerHTML==assmntNo) && (table.rows[i].cells[4].innerHTML==taxPeriod))
			{
				alert("You already added this details.");
				return false;
			}
		}
	}
	return true;
}
function checkPaymentDetailsEntriesSEP(){
	var table = document.getElementById('SEPAdditionalAssmntTable');  
	
	if(!(table.rows.length==1))
	{ 
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{
			if((trim(document.getElementById('id_temp_'+'SEPAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" )
			{
				alert("You can only generate PRN for one period");
				return false;	
			}
		}
	}
	return true;
}

function validateDeleteRowSEPAdditionalAssmntTable(tab_str, rowno, cols)
{
	var table = document.getElementById('SEPAdditionalAssmntTable');  
	var	totalAmt = removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var tempAmt = table.rows[rowno].cells[5].innerHTML;
	totalAmt = totalAmt - parseInt(removeCommaFrmInput(tempAmt),"10");
	document.getElementById('txtTotalAmountPaidOblig').value =  totalAmt;
	document.getElementById('txtTotalAmountPaidOblig').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true);
}

function afterAddSEPAssmntTable()
{
	if(document.getElementById('forSpecialPayPointPage').value!='true')
		{
			TotalAssmntAmt=convertToKenyanShillingFormatVal(parseInt(DatAssmntTax,10)+parseInt(TotalAssmntAmt,10),true);
			document.getElementById('txtTotalAmountPaidOblig').value=TotalAssmntAmt;
		}
}
function beforeAddSEPAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	DatAssmntTax=removeCommaFrmInput(document.getElementById('in_SEPAdditionalAssmntTable_5').value);
	TotalAssmntAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	}

}
function beforeModifySEPAssmntTable(row){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	if(checkDuplicateSEPWithAssessmentRows()){
		rowno=row;
		var table = document.getElementById('SEPAdditionalAssmntTable');
		DatAssmntTax=table.rows[rowno].cells[5].innerHTML;
		var amtToPaidWithHoldeeArray=DatAssmntTax.split('<');
		DatAssmntTax=amtToPaidWithHoldeeArray[0];
	}
	else {
		return false;
	}
	}
}
function afterModifySEPAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	var table = document.getElementById('SEPAdditionalAssmntTable');
	var tmpAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var newAmt=table.rows[rowno].cells[5].innerHTML;
	var newAmountArray=newAmt.split('<');
	newAmt=newAmountArray[0];
	document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(parseInt(tmpAmt,10)+parseInt(removeCommaFrmInput(newAmt),"10")-parseInt(removeCommaFrmInput(DatAssmntTax),10),true); 
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
	}
}
//End: EAT and AAT SEP 22/07/2025


function resetAdditionalAssmntDtlsForDat()
{
	document.getElementById('in_DatAdditionalAssmntTable_3').value="";
	document.getElementById('in_DatAdditionalAssmntTable_4').value="";
	document.getElementById('in_DatAdditionalAssmntTable_5').value="";
	document.getElementById('in_DatAdditionalAssmntTable_8').value="";
}
function validateDatWithAssessmentDetails()
{
 if(document.getElementById("in_DatAdditionalAssmntTable_3").value=='' || 
   			document.getElementById("in_DatAdditionalAssmntTable_3").value==null)
	   		{
	   			alert("Please enter Assessment Notice Number.");
	   			return false;
	   		}
 if(document.getElementById("in_DatAdditionalAssmntTable_4").value=='' || 
   			document.getElementById("in_DatAdditionalAssmntTable_4").value==null)
	   		{
	   			return false;
	   		}
 if(document.getElementById("in_DatAdditionalAssmntTable_5").value=='' || 
   			document.getElementById("in_DatAdditionalAssmntTable_5").value==null)
	   		{
	   			alert("Amount to be paid can not be 0.");
	   			document.getElementById("in_DatAdditionalAssmntTable_5").value='';
	   			return false;
	   		}
 if(document.getElementById("in_DatAdditionalAssmntTable_5").value!='' || 
   			document.getElementById("in_DatAdditionalAssmntTable_5").value!=null)
{
 				var amt= parseInt(document.getElementById("in_DatAdditionalAssmntTable_5").value);
	 			if(amt == 0 || amt== 0.0)
 				{
	 				alert("Amount to be paid can not be 0.");
	 				document.getElementById("in_DatAdditionalAssmntTable_5").value='';
		   			return false;
 				}
	 			if(document.getElementById("in_DatAdditionalAssmntTable_8").value=='' || 
				document.getElementById("in_DatAdditionalAssmntTable_8").value==null)
		   		{
		   			alert("Additional Assessment Amount can not be 0.");
		   			document.getElementById("in_DatAdditionalAssmntTable_5").value='';
		   			return false;
		   		}
}
if(document.getElementById("in_DatAdditionalAssmntTable_8").value!='' || 
			document.getElementById("in_DatAdditionalAssmntTable_8").value!=null)
	   		{
			var amt= parseInt(document.getElementById("in_DatAdditionalAssmntTable_8").value);
	 			if(amt == 0 || amt== 0.0)
	 				{
		 				alert("Additional Assessment Amount can not be 0.");
		 				document.getElementById("in_DatAdditionalAssmntTable_5").value='';
			   			return false;
	 				}
	   		}
if(document.getElementById("in_DatAdditionalAssmntTable_5").value!='' || 
			document.getElementById("in_DatAdditionalAssmntTable_5").value!=null ||
			document.getElementById("in_DatAdditionalAssmntTable_8").value!='' || 
			document.getElementById("in_DatAdditionalAssmntTable_8").value!=null)
   		{
			var amtToBePaidAss= parseInt(removeCommaFrmInput(document.getElementById("in_DatAdditionalAssmntTable_5").value));
			var totalAssAmt= removeCommaFrmInput(document.getElementById('in_DatAdditionalAssmntTable_8').value);
			if(amtToBePaidAss > totalAssAmt)
 				{
 					alert("Amount to be Paid can not be greater than the Total Amount");
 					document.getElementById("in_DatAdditionalAssmntTable_5").value='';
		   			return false;
 				}
 			else if(isNaN(amtToBePaidAss))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_DatAdditionalAssmntTable_5").value='';
 				return false;
 			}
 			else if(isNaN(totalAssAmt))
 			{
 				alert("Please enter valid amount to be paid.");
 				document.getElementById("in_DatAdditionalAssmntTable_5").value='';
 				return false;
 			}
	}
	 return true;
}
function addrowDatAssessmentDetails()
{
	//if(checkDuplicateDatWithAssessmentRows() && checkPaymentDetailsEntriesDat()){
	if(checkDuplicateDatWithAssessmentRows() && checkPaymentDetailsEntriesDat()){
		if(confirm("Do you want to add details?"))
	   	   {
			addrow('DatAdditionalAssmntTable','3','6','3','validateDeleteRowDatAdditionalAssmntTable','','N','N','6,7');
		   }
		/*Added by Ben on 21062022 :: Start  clearing totalAmount on add*/
		document.getElementById('in_DatAdditionalAssmntTable_8').value =  "";
   }
}
function checkDuplicateDatWithAssessmentRows()
{
	var table = document.getElementById('DatAdditionalAssmntTable');  
	var assmntNo = document.getElementById('in_DatAdditionalAssmntTable_3').value;
	var taxPeriod= document.getElementById('in_DatAdditionalAssmntTable_4').value;
	if(!(table.rows.length==1))
	{ 	
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{ 
			modify=trim(table.rows[i].cells[2].getElementsByTagName('A')[0].innerHTML);
			if((trim(document.getElementById('id_temp_'+'DatAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" && (modify=="Modify") &&
				(table.rows[i].cells[3].innerHTML==assmntNo) && (table.rows[i].cells[4].innerHTML==taxPeriod))
			{
				alert("You already added this details.");
				return false;
			}
		}
	}
	return true;
}
function validateDeleteRowDatAdditionalAssmntTable(tab_str, rowno, cols)
{
	var table = document.getElementById('DatAdditionalAssmntTable');  
	var	totalAmt = removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var tempAmt = table.rows[rowno].cells[5].innerHTML;
	totalAmt = totalAmt - parseInt(removeCommaFrmInput(tempAmt),"10");
	document.getElementById('txtTotalAmountPaidOblig').value =  totalAmt;
	document.getElementById('txtTotalAmountPaidOblig').value = convertToKenyanShillingFormatVal(document.getElementById("txtTotalAmountPaidOblig").value, true);
}
function addCommaToAmountToBePaidDat()
{
	document.getElementById('in_DatAdditionalAssmntTable_5').value=convertToKenyanShillingFormatVal(document.getElementById('in_DatAdditionalAssmntTable_5').value);
}
function beforeAddDatAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	DatAssmntTax=removeCommaFrmInput(document.getElementById('in_DatAdditionalAssmntTable_5').value);
	TotalAssmntAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	}

}
function afterAddDatAssmntTable()
{
	if(document.getElementById('forSpecialPayPointPage').value!='true')
		{
			TotalAssmntAmt=convertToKenyanShillingFormatVal(parseInt(DatAssmntTax,10)+parseInt(TotalAssmntAmt,10),true);
			document.getElementById('txtTotalAmountPaidOblig').value=TotalAssmntAmt;
		}
}
function beforeModifyDatAssmntTable(row){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	if(checkDuplicateDatWithAssessmentRows()){
		rowno=row;
		var table = document.getElementById('DatAdditionalAssmntTable');
		DatAssmntTax=table.rows[rowno].cells[5].innerHTML;
		var amtToPaidWithHoldeeArray=DatAssmntTax.split('<');
		DatAssmntTax=amtToPaidWithHoldeeArray[0];
	}
	else {
		return false;
	}
	}
}
function afterModifyDatAssmntTable(){
	if(document.getElementById('forSpecialPayPointPage').value!='true')
	{
	var table = document.getElementById('DatAdditionalAssmntTable');
	var tmpAmt=removeCommaFrmInput(document.getElementById('txtTotalAmountPaidOblig').value);
	var newAmt=table.rows[rowno].cells[5].innerHTML;
	var newAmountArray=newAmt.split('<');
	newAmt=newAmountArray[0];
	document.getElementById('txtTotalAmountPaidOblig').value=convertToKenyanShillingFormatVal(parseInt(tmpAmt,10)+parseInt(removeCommaFrmInput(newAmt),"10")-parseInt(removeCommaFrmInput(DatAssmntTax),10),true); 
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
	}
}
function checkPaymentDetailsEntriesDat(){
	var table = document.getElementById('DatAdditionalAssmntTable');  
	
	if(!(table.rows.length==1))
	{ 
		for (var i = 1, n = table.rows.length; i <n; i++) 
		{
			if((trim(document.getElementById('id_temp_'+'DatAdditionalAssmntTable'+'_'+i+'_1').value))=="Delete" )
			{
				alert("You can only generate PRN for one period");
				return false;	
			}
		}
	}
	return true;
}
function clearAllAdditionalAssmntDataDat()
{
	resetAdditionalAssmntDtlsForDat();
	clear_table_data('DatAdditionalAssmntTable');
	document.getElementById('txtTotalAmountPaidOblig').value=0; 
	document.getElementById('txtTotalAmountPaidOblig').readOnly=true; 
}